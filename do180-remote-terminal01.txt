[student@workstation ~]$ git config --global credential.helper cache
[student@workstation ~]$ lab-configure 

This script configures the connection parameters to access the OpenShift cluster for your lab scripts

 · Enter the API Endpoint: https://api.eu46.prod.nextcle.com:6443
 · Enter the Username: philbb
 · Enter the Password: cb3b1ad14a804986949e
 · Enter the GitHub Account Name: lmatouse
 · Enter the Quay.io Account Name: lmatouse

You entered:
 · API Endpoint:			https://api.eu46.prod.nextcle.com:6443
 · Username:				philbb
 · Password:				cb3b1ad14a804986949e
 · GitHub Account Name:			lmatouse
 · Quay.io Account Name:		lmatouse

Generated config:
 · API Endpoint:			https://api.eu46.prod.nextcle.com:6443
 · Wildcard Domain:			apps.eu46.prod.nextcle.com
 · Nexus Server Host:			nexus-common.apps.eu46.prod.nextcle.com
 · Username:				philbb
 · Password:				cb3b1ad14a804986949e
 · GitHub Account Name:			lmatouse
 · Quay.io Account Name:		lmatouse

Verifying your API Endpoint...

ERROR:
Cannot connect to an OpenShift 4.5 API using your URL.
Please verify you network connectivity and that the URL does not point to an OpenShift 3.x nor to a non-OpenShift Kubernetes API.
[student@workstation ~]$ lab 
appendix-microservices      dockerfile-create           manage-lifecycle            multicontainer-design       openshift-review            troubleshoot-review
comprehensive-review        dockerfile-review           manage-networking           multicontainer-openshift    openshift-routes            troubleshoot-s2i
container-create            image-operations            manage-review               multicontainer-review       openshift-s2i               
container-review            image-review                manage-storage              mysql-openshift             openshift-webconsole        
container-rootless          linking-containers          multicontainer-application  openshift-resources         troubleshoot-container      
[student@workstation ~]$ lab-configure 

This script configures the connection parameters to access the OpenShift cluster for your lab scripts

 · Enter the API Endpoint: https://api.eu46.prod.nextcle.com:6443
 · Enter the Username: philbb
 · Enter the Password: cb3b1ad14a804986949e
 · Enter the GitHub Account Name: lmatouse
 · Enter the Quay.io Account Name: lmatouse

You entered:
 · API Endpoint:			https://api.eu46.prod.nextcle.com:6443
 · Username:				philbb
 · Password:				cb3b1ad14a804986949e
 · GitHub Account Name:			lmatouse
 · Quay.io Account Name:		lmatouse

Generated config:
 · API Endpoint:			https://api.eu46.prod.nextcle.com:6443
 · Wildcard Domain:			apps.eu46.prod.nextcle.com
 · Nexus Server Host:			nexus-common.apps.eu46.prod.nextcle.com
 · Username:				philbb
 · Password:				cb3b1ad14a804986949e
 · GitHub Account Name:			lmatouse
 · Quay.io Account Name:		lmatouse

Verifying your API Endpoint...

Verifying your Nexus host...

Verifying your OpenShift developer user credentials...

Verifying your GitHub account name...

Verifying your Quay.io account name...

Verifying your cluster configuration...

Saving your lab configuration file...

All fine, lab config saved. You can now proceed with your exercises.

If you need to modify the configuration, rerun this script or directly modify the values in /usr/local/etc/ocp4.config.

[student@workstation ~]$ git clone https://github.com/lmatouse/DO180-apps
Cloning into 'DO180-apps'...
remote: Enumerating objects: 78, done.
remote: Total 78 (delta 0), reused 0 (delta 0), pack-reused 78
Unpacking objects: 100% (78/78), done.
[student@workstation ~]$ cd DO180-apps/
[student@workstation DO180-apps]$ git status 
On branch master
Your branch is up to date with 'origin/master'.

nothing to commit, working tree clean
[student@workstation DO180-apps]$ git checkout -b testbranch
Switched to a new branch 'testbranch'
[student@workstation DO180-apps]$ echo "DO180" > TEST
[student@workstation DO180-apps]$ git add .
[student@workstation DO180-apps]$ git commit -am "DO180"
[testbranch 2eb6e52] DO180
 1 file changed, 1 insertion(+)
 create mode 100644 TEST
[student@workstation DO180-apps]$ git push --set-upstream origin testbranch
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 284 bytes | 284.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
remote: 
remote: Create a pull request for 'testbranch' on GitHub by visiting:
remote:      https://github.com/lmatouse/DO180-apps/pull/new/testbranch
remote: 
To https://github.com/lmatouse/DO180-apps
 * [new branch]      testbranch -> testbranch
Branch 'testbranch' set up to track remote branch 'testbranch' from 'origin'.
[student@workstation DO180-apps]$ echo "OCP4.6" > TEST
[student@workstation DO180-apps]$ git add .
[student@workstation DO180-apps]$ git commit -am "OCP4.6""
> ^C
[student@workstation DO180-apps]$ git commit -am "OCP4.6"
[testbranch b318125] OCP4.6
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 275 bytes | 275.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/lmatouse/DO180-apps
   2eb6e52..b318125  testbranch -> testbranch
[student@workstation DO180-apps]$ head README.md 
# DO180-apps
DO180 Repository for Sample Applications
[student@workstation DO180-apps]$ cd
[student@workstation ~]$ lab container-create start

Setting up workstation for the Guided Exercise: Creating a MySQL database instance

 · Checking podman configuration...............................  SUCCESS
 · Creating create_table.txt file..............................  SUCCESS
[student@workstation ~]$ podman login registry.redhat.io
Username: lmatouse
Password: 
Login Succeeded!
[student@workstation ~]$ podman run  --name mysql-basic -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 -d registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Copying blob 0d875a68bf99 done
Copying blob 950c796b5dbc done
Copying blob 8dfe9326f733 done
Copying blob 4974e12a6555 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
097a740b556fb36699093bce574ca1e3daff957ec0fe29f6829fa03c0220c033
[student@workstation ~]$ podman ps --format "{{.ID}} {{.Image}} {{.Names}}"
097a740b556f registry.redhat.io/rhel8/mysql-80:1 mysql-basic
[student@workstation ~]$ podman exec -it mysql-basic /bin/bash
bash-4.4$ mysql -uroot
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.26 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| items              |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.00 sec)

mysql> use items;
Database changed
mysql> CREATE TABLE Projects (id int NOT NULL, name varchar(255) DEAFAULT NULL, coed varchar(255) DEFAULT NULL, PRIMARY KEY (id));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DEAFAULT NULL, coed varchar(255) DEFAULT NULL, PRIMARY KEY (id))' at line 1
mysql> CREATE TABLE Projects (id int NOT NULL, name varchar(255) DEAFAULT NULL, code varchar(255) DEFAULT NULL, PRIMARY KEY (id));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DEAFAULT NULL, code varchar(255) DEFAULT NULL, PRIMARY KEY (id))' at line 1
mysql> CREATE TABLE Projects (id int NOT NULL, name varchar(255) DEFAULT NULL, code varchar(255) DEFAULT NULL, PRIMARY KEY (id));
Query OK, 0 rows affected (0.10 sec)

mysql> show tables;
+-----------------+
| Tables_in_items |
+-----------------+
| Projects        |
+-----------------+
1 row in set (0.00 sec)

mysql> insert into Projects (id, name, code) values (1, 'DevOps', 'DO180');
Query OK, 1 row affected (0.01 sec)

mysql> select * from Projects;
+----+--------+-------+
| id | name   | code  |
+----+--------+-------+
|  1 | DevOps | DO180 |
+----+--------+-------+
1 row in set (0.00 sec)

mysql> exit
Bye
bash-4.4$ exit
exit
[student@workstation ~]$ lab container-create finish 

Completing the Guided Exercise: Creating a MySQL database instance

 · Removing "mysql-basic" container............................  SUCCESS
 · Removing "registry.redhat.io/rhel8/mysql-80:1" image........  SUCCESS
[student@workstation ~]$ lab container-rootless start

Setting up workstation for the Guided Exercise: Exploring root and rootless containers

 · Checking podman configuration...............................  SUCCESS
[student@workstation ~]$ sudo podman run --rm --name asroot -ti registry.access.redhat.com/ubi8:latest /bin/bash
Trying to pull registry.access.redhat.com/ubi8:latest...
Getting image source signatures
Copying blob 0d875a68bf99 done
Copying blob 8dfe9326f733 done
Copying config 52de04277b done
Writing manifest to image destination
Storing signatures
[root@12eacb03e12b /]# whoami
root
[root@12eacb03e12b /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@12eacb03e12b /]# sleep 1000
^C
[root@12eacb03e12b /]# exit
exit
[student@workstation ~]$ sudo podman run --rm --name asuser -ti registry.access.redhat.com/ubi8:latest /bin/bash
[root@854854618c9a /]# whoami
root
[root@854854618c9a /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@854854618c9a /]# sleep 2000
^C
[root@854854618c9a /]# exit
exit
[student@workstation ~]$ sudo podman run --rm --name asuser -ti registry.access.redhat.com/ubi8:latest /bin/bash
[root@024a46d8e78f /]# whoami
root
[root@024a46d8e78f /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@024a46d8e78f /]# sleep 2000
^C
[root@024a46d8e78f /]# exit
exit
[student@workstation ~]$ sudo podman run --rm --name asstudent -ti registry.access.redhat.com/ubi8:latest /bin/bash
[root@105e4ecd5bcf /]# whoami
root
[root@105e4ecd5bcf /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@105e4ecd5bcf /]# sleep 2000
^C
[root@105e4ecd5bcf /]# exit
exit
[student@workstation ~]$ sudo podman run --rm --name asuser -ti registry.access.redhat.com/ubi8:latest /bin/bash
[root@c2dc97f3aa22 /]# whoami
root
[root@c2dc97f3aa22 /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@c2dc97f3aa22 /]# sleep 3000
e
ex^C
[root@c2dc97f3aa22 /]# exit
exit
[student@workstation ~]$ podman ps --format "{{.ID}} {{.Image}} {{.Names}}"
[student@workstation ~]$ lab container-rootless finish 

Completing the Guided Exercise: Exploring root and rootless containers

[student@workstation ~]$ lab container-rootless start

Setting up workstation for the Guided Exercise: Exploring root and rootless containers

 · Checking podman configuration...............................  SUCCESS
[student@workstation ~]$ sudo podman run --rm --name asroot -ti registry.access.redhat.com/ubi8:latest /bin/bash
[root@321f1a8ef57b /]# whoami
root
[root@321f1a8ef57b /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@321f1a8ef57b /]# sleep 1000
^C
[root@321f1a8ef57b /]# exit
exit
[student@workstation ~]$ podman run --rm --name asuser -ti registry.access.redhat.com/ubi8:latest /bin/bash
Trying to pull registry.access.redhat.com/ubi8:latest...
Getting image source signatures
Copying blob 8dfe9326f733 done
Copying blob 0d875a68bf99 done
Copying config 52de04277b done
Writing manifest to image destination
Storing signatures
[root@ad6deacf91ad /]# whoami
root
[root@ad6deacf91ad /]# id
uid=0(root) gid=0(root) groups=0(root)
[root@ad6deacf91ad /]# sleep 2000
^C
[root@ad6deacf91ad /]# exit
exit
[student@workstation ~]$ lab container-rootless finish 

Completing the Guided Exercise: Exploring root and rootless containers

[student@workstation ~]$ lab container-review start

Setting up workstation for the Lab: Creating Containerized Services

 · Checking podman configuration...............................  SUCCESS
 · Setting up labs folder......................................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ podman run --help
Run a command in a new container

Description:
  Runs a command in a new container from the given image

Usage:
  podman run [flags] IMAGE [COMMAND [ARG...]]

Examples:
  podman run imageID ls -alF /etc
  podman run --net=host imageID dnf -y install java
  podman run --volume /var/hostdir:/var/ctrdir -i -t fedora /bin/bash

Flags:
      --add-host strings                         Add a custom host-to-IP mapping (host:ip) (default [])
      --annotation strings                       Add annotations to container (key:value) (default [])
  -a, --attach strings                           Attach to STDIN, STDOUT or STDERR (default [])
      --authfile string                          Path of the authentication file. Use REGISTRY_AUTH_FILE environment variable to override (default "/run/user/1000/containers/auth.json")
      --blkio-weight string                      Block IO weight (relative weight) accepts a weight value between 10 and 1000.
      --blkio-weight-device DEVICE_NAME:WEIGHT   Block IO weight (relative device weight, format: DEVICE_NAME:WEIGHT)
      --cap-add strings                          Add capabilities to the container
      --cap-drop strings                         Drop capabilities from the container
      --cgroup-parent string                     Optional parent cgroup for the container
      --cgroupns string                          cgroup namespace to use (default "host")
      --cgroups string                           control container cgroup configuration (default "enabled")
      --cidfile string                           Write the container ID to the file
      --conmon-pidfile string                    Path to the file that will receive the PID of conmon
      --cpu-period uint                          Limit the CPU CFS (Completely Fair Scheduler) period
      --cpu-quota int                            Limit the CPU CFS (Completely Fair Scheduler) quota
      --cpu-rt-period uint                       Limit the CPU real-time period in microseconds
      --cpu-rt-runtime int                       Limit the CPU real-time runtime in microseconds
      --cpu-shares uint                          CPU shares (relative weight)
      --cpus float                               Number of CPUs. The default is 0.000 which means no limit
      --cpuset-cpus string                       CPUs in which to allow execution (0-3, 0,1)
      --cpuset-mems string                       Memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only effective on NUMA systems.
  -d, --detach                                   Run container in background and print container ID
      --detach-keys [a-Z]                        Override the key sequence for detaching a container. Format is a single character [a-Z] or a comma separated sequence of `ctrl-<value>`, where `<value>` is one of: `a-z`, `@`, `^`, `[`, `\`, `]`, `^` or `_`
      --device strings                           Add a host device to the container (default [])
      --device-read-bps strings                  Limit read rate (bytes per second) from a device (e.g. --device-read-bps=/dev/sda:1mb)
      --device-read-iops strings                 Limit read rate (IO per second) from a device (e.g. --device-read-iops=/dev/sda:1000)
      --device-write-bps strings                 Limit write rate (bytes per second) to a device (e.g. --device-write-bps=/dev/sda:1mb)
      --device-write-iops strings                Limit write rate (IO per second) to a device (e.g. --device-write-iops=/dev/sda:1000)
      --dns strings                              Set custom DNS servers
      --dns-opt strings                          Set custom DNS options
      --dns-search strings                       Set custom DNS search domains
      --entrypoint string                        Overwrite the default ENTRYPOINT of the image
  -e, --env stringArray                          Set environment variables in container
      --env-file strings                         Read in a file of environment variables
      --env-host                                 Use all current host environment variables in container
      --expose strings                           Expose a port or a range of ports (default [])
      --gidmap strings                           GID map to use for the user namespace
      --group-add strings                        Add additional groups to join (default [])
      --health-cmd string                        set a healthcheck command for the container ('none' disables the existing healthcheck)
      --health-interval string                   set an interval for the healthchecks (a value of disable results in no automatic timer setup) (default "30s")
      --health-retries uint                      the number of retries allowed before a healthcheck is considered to be unhealthy (default 3)
      --health-start-period string               the initialization time needed for a container to bootstrap (default "0s")
      --health-timeout string                    the maximum time allowed to complete the healthcheck before an interval is considered failed (default "30s")
  -h, --hostname string                          Set container hostname
      --http-proxy                               Set proxy environment variables in the container based on the host proxy vars (default true)
      --image-volume string                      Tells podman how to handle the builtin image volumes. The options are: 'bind', 'tmpfs', or 'ignore' (default "bind")
      --init                                     Run an init binary inside the container that forwards signals and reaps processes
      --init-path string                         Path to the container-init binary (default: "/usr/libexec/podman/catatonit")
  -i, --interactive                              Keep STDIN open even if not attached
      --ip string                                Specify a static IPv4 address for the container
      --ipc string                               IPC namespace to use
      --kernel-memory <number>[<unit>]           Kernel memory limit (format: <number>[<unit>], where unit = b (bytes), k (kilobytes), m (megabytes), or g (gigabytes))
  -l, --label stringArray                        Set metadata on container (default [])
      --label-file strings                       Read in a line delimited file of labels (default [])
      --log-driver string                        Logging driver for the container
      --log-opt strings                          Logging driver options (default [])
      --mac-address string                       Container MAC address (e.g. 92:d0:c6:0a:29:33), not currently supported
  -m, --memory <number>[<unit>]                  Memory limit (format: <number>[<unit>], where unit = b (bytes), k (kilobytes), m (megabytes), or g (gigabytes))
      --memory-reservation <number>[<unit>]      Memory soft limit (format: <number>[<unit>], where unit = b (bytes), k (kilobytes), m (megabytes), or g (gigabytes))
      --memory-swap string                       Swap limit equal to memory plus swap: '-1' to enable unlimited swap
      --memory-swappiness int                    Tune container memory swappiness (0 to 100, or -1 for system default) (default -1)
      --mount stringArray                        Attach a filesystem mount to the container (default [])
      --name string                              Assign a name to the container
      --net string                               Connect a container to a network (default "slirp4netns")
      --network string                           Connect a container to a network (default "slirp4netns")
      --no-hosts                                 Do not create /etc/hosts within the container, instead use the version from the image
      --oom-kill-disable                         Disable OOM Killer
      --oom-score-adj int                        Tune the host's OOM preferences (-1000 to 1000)
      --pid string                               PID namespace to use
      --pids-limit int                           Tune container pids limit (set 0 for unlimited) (default 4096)
      --pod string                               Run container in an existing pod
      --privileged                               Give extended privileges to container
  -p, --publish strings                          Publish a container's port, or a range of ports, to the host (default [])
  -P, --publish-all                              Publish all exposed ports to random ports on the host interface
      --pull string                              Pull image before creating ("always"|"missing"|"never") (default "missing") (default "missing")
  -q, --quiet                                    Suppress output information when pulling images
      --read-only                                Make containers root filesystem read-only
      --read-only-tmpfs                          When running containers in read-only mode mount a read-write tmpfs on /run, /tmp and /var/tmp (default true)
      --restart string                           Restart policy to apply when a container exits
      --rm                                       Remove container (and pod if created) after exit
      --rootfs                                   The first argument is not an image but the rootfs to the exploded container
      --security-opt stringArray                 Security Options (default [])
      --shm-size <number>[<unit>]                Size of /dev/shm (format: <number>[<unit>], where unit = b (bytes), k (kilobytes), m (megabytes), or g (gigabytes)) (default "65536k")
      --sig-proxy                                Proxy received signals to the process (default true)
      --stop-signal string                       Signal to stop a container. Default is SIGTERM
      --stop-timeout uint                        Timeout (in seconds) to stop a container. Default is 10 (default 10)
      --subgidname string                        Name of range listed in /etc/subgid for use in user namespace
      --subuidname string                        Name of range listed in /etc/subuid for use in user namespace
      --sysctl strings                           Sysctl options (default [])
      --systemd string                           Run container in systemd mode ("true"|"false"|"always" (default "true") (default "true")
      --tmpfs tmpfs                              Mount a temporary filesystem (tmpfs) into a container (default [])
  -t, --tty                                      Allocate a pseudo-TTY for container
      --uidmap strings                           UID map to use for the user namespace
      --ulimit strings                           Ulimit options (default [])
  -u, --user string                              Username or UID (format: <name|uid>[:<group|gid>])
      --userns string                            User namespace to use
      --uts string                               UTS namespace to use
  -v, --volume stringArray                       Bind mount a volume into the container (default [])
      --volumes-from strings                     Mount volumes from the specified container(s) (default [])
  -w, --workdir string                           Working directory inside the container

[student@workstation ~]$ podman run --name httpd-basic -p 8080:80 -ti quay.io/redhattraining/httpd-parent:2.4 /bin/bash
Trying to pull quay.io/redhattraining/httpd-parent:2.4...
Getting image source signatures
Copying blob 787f47dbeaac done
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob 6a5240d60dc4 done
Copying blob 08b8c9fdec44 done
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 skipped: already exists
Copying blob 408208567b9a done
Writing manifest to image destination
Storing signatures
bash-4.4# netstat -atn
bash: netstat: command not found
bash-4.4# systemctl status httpd.service
System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down
bash-4.4# ps aux
bash: ps: command not found
bash-4.4# exit  
exit
[student@workstation ~]$ podman ls
Error: unrecognized command `podman ls`
Try 'podman --help' for more information.
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ podman run -d --name httpd-basic -p 8080:80/tcp -ti quay.io/redhattraining/httpd-parent:2.4 /bin/bash
Error: error creating container storage: the container name "httpd-basic" is already in use by "8b8f9aeb6aa9e06c21f39411f182fedf90a9df4574aa45fe077ce4d1ce0b45f3". You have to remove that container to be able to reuse that name.: that name is already in use
[student@workstation ~]$ podman rm
rm   rmi  
[student@workstation ~]$ podman rm httpd-basic
8b8f9aeb6aa9e06c21f39411f182fedf90a9df4574aa45fe077ce4d1ce0b45f3
[student@workstation ~]$ podman run -d --name httpd-basic -p 8080:80/tcp -ti quay.io/redhattraining/httpd-parent:2.4 /bin/bash
8ab8a68609065cda7b34d7194932f095dfa4dd4e0216257fd16724a4fd30af77
[student@workstation ~]$ podman run -d --name httpd-basic -p 8080:80/tcp quay.io/redhattraining/httpd-parent:2.4
Error: error creating container storage: the container name "httpd-basic" is already in use by "8ab8a68609065cda7b34d7194932f095dfa4dd4e0216257fd16724a4fd30af77". You have to remove that container to be able to reuse that name.: that name is already in use
[student@workstation ~]$ podman attach httpd-basic
bash-4.4# 
bash-4.4# ls
bin  boot  dev	etc  home  lib	lib64  lost+found  media  mnt  opt  proc  root	run  sbin  srv	sys  tmp  usr  var
bash-4.4# exit
exit
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ sudo podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ sudo podman ls
Error: unrecognized command `podman ls`
Try 'podman --help' for more information.
[student@workstation ~]$  podman 
attach       cp           exec         help         import       load         mount        port         restart      save         stop         unmount      volume
build        create       export       history      info         login        pause        ps           rm           search       tag          unpause      wait
commit       diff         generate     image        inspect      logout       play         pull         rmi          start        top          varlink      
container    events       healthcheck  images       kill         logs         pod          push         run          stats        umount       version      
[student@workstation ~]$  podman container ps
Error: unrecognized command `podman container ps`
Try 'podman container --help' for more information.
[student@workstation ~]$  podman container 
attach      cp          exec        inspect     logs        port        restart     run         stats       umount      wait        
checkpoint  create      exists      kill        mount       prune       restore     runlabel    stop        unmount     
commit      diff        export      list        pause       refresh     rm          start       top         unpause     
[student@workstation ~]$  podman container 
attach      cp          exec        inspect     logs        port        restart     run         stats       umount      wait        
checkpoint  create      exists      kill        mount       prune       restore     runlabel    stop        unmount     
commit      diff        export      list        pause       refresh     rm          start       top         unpause     
[student@workstation ~]$  podman container list
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$  podman container 
Error: missing command 'podman container COMMAND'
Try 'podman container --help' for more information.
[student@workstation ~]$  podman container attach httpd-basic
Error: you can only attach to running containers
[student@workstation ~]$  podman image list
REPOSITORY                            TAG      IMAGE ID       CREATED       SIZE
registry.access.redhat.com/ubi8       latest   52de04277b39   10 days ago   235 MB
quay.io/redhattraining/httpd-parent   2.4      3639ce1374d3   2 years ago   236 MB
[student@workstation ~]$  podman image rm registry.access.redhat.com/ubi8
Untagged: registry.access.redhat.com/ubi8:latest
Deleted: 52de04277b398b642a3885e21d760b2d401f7e04bceb42d40f1df64e2a500735
[student@workstation ~]$  podman image rm quay.io/redhattraining/httpd-parent
Error: unable to find 'quay.io/redhattraining/httpd-parent' in local storage: no such image
[student@workstation ~]$  podman image rm 3639ce1374d3
Error: could not remove image 3639ce1374d3611e80ed66decd7d5467b72d010c21e19e4f193cd8b944e8c9f5 as it is being used by 1 containers
[student@workstation ~]$  podman image rm 52de04277b39
Error: unable to find a name and tag match for 52de04277b39 in repotags: no such image
[student@workstation ~]$  podman container list
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$  podman container stop
Error: you must provide at least one name or id
[student@workstation ~]$  podman container stop httpd-basic
8ab8a68609065cda7b34d7194932f095dfa4dd4e0216257fd16724a4fd30af77
[student@workstation ~]$  podman container rm httpd-basic
8ab8a68609065cda7b34d7194932f095dfa4dd4e0216257fd16724a4fd30af77
[student@workstation ~]$  podman image rm 52de04277b39
Error: unable to find a name and tag match for 52de04277b39 in repotags: no such image
[student@workstation ~]$  podman image list
REPOSITORY                            TAG   IMAGE ID       CREATED       SIZE
quay.io/redhattraining/httpd-parent   2.4   3639ce1374d3   2 years ago   236 MB
[student@workstation ~]$  podman image rm 3639ce1374d3
Untagged: quay.io/redhattraining/httpd-parent:2.4
Deleted: 3639ce1374d3611e80ed66decd7d5467b72d010c21e19e4f193cd8b944e8c9f5
[student@workstation ~]$  podman image list
REPOSITORY   TAG   IMAGE ID   CREATED   SIZE
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ podman run -d -p 8080:80 --name httpd-basic quay.io/redhattraining/httpd-parent:2.4
Trying to pull quay.io/redhattraining/httpd-parent:2.4...
Getting image source signatures
Copying blob 6a5240d60dc4 done
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob 787f47dbeaac done
Copying blob 08b8c9fdec44 done
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 skipped: already exists
Copying blob 408208567b9a done
Writing manifest to image destination
Storing signatures
09377d731dc1a9b511bb8e6c23a2ab57ce5bcc413ece9bb65a39009b51cd908d
[student@workstation ~]$ podman attach httpd-basic

^C[student@workstation ~]$ podman attach httpd-basic -ti /bin/bash
Error: unknown shorthand flag: 't' in -ti
[student@workstation ~]$ podman attach httpd-basic -i /bin/bash
Error: unknown shorthand flag: 'i' in -i
[student@workstation ~]$ podman exec httpd-basic -ti /bin/bash
Error: cannot exec into container that is not running: container state improper
[student@workstation ~]$  podman container start httpd-basic
httpd-basic
[student@workstation ~]$ podman exec httpd-basic -ti /bin/bash
Error: exec failed: container_linux.go:349: starting container process caused "exec: \"-ti\": executable file not found in $PATH": OCI runtime command not found error
[student@workstation ~]$ podman exec httpd-basic  /bin/bash
[student@workstation ~]$ podman exec -ti httpd-basic  /bin/bash
bash-4.4# 
bash-4.4# 
bash-4.4# ls -la /var/www/html/
total 4
drwxr-xr-x. 2 root root 24 Jun 12  2019 .
drwxr-xr-x. 4 root root 53 Jun 12  2019 ..
-rw-r--r--. 1 root root 39 Jun 12  2019 index.html
bash-4.4# vi 
vi         view       vigr       vipw       virt-what  
bash-4.4# vi /var/www/html/index.html 
bash-4.4# exit
exit
[student@workstation ~]$ 
[student@workstation ~]$ lab manage-lifecycle start

Setting up workstation for the Guided Excercise: Managing a MySQL Container

 · Checking podman configuration...............................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials...
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ podman run --name mysql-db registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Copying blob 4974e12a6555 done
Copying blob 950c796b5dbc done
Copying blob 0d875a68bf99 done
Copying blob 8dfe9326f733 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
=> sourcing 20-validate-variables.sh ...
You must either specify the following environment variables:
  MYSQL_USER (regex: '^[a-zA-Z0-9_]+$')
  MYSQL_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
  MYSQL_DATABASE (regex: '^[a-zA-Z0-9_]+$')
Or the following environment variable:
  MYSQL_ROOT_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
Or both.
Optional Settings:
  MYSQL_LOWER_CASE_TABLE_NAMES (default: 0)
  MYSQL_LOG_QUERIES_ENABLED (default: 0)
  MYSQL_MAX_CONNECTIONS (default: 151)
  MYSQL_FT_MIN_WORD_LEN (default: 4)
  MYSQL_FT_MAX_WORD_LEN (default: 20)
  MYSQL_AIO (default: 1)
  MYSQL_KEY_BUFFER_SIZE (default: 32M or 10% of available memory)
  MYSQL_MAX_ALLOWED_PACKET (default: 200M)
  MYSQL_TABLE_OPEN_CACHE (default: 400)
  MYSQL_SORT_BUFFER_SIZE (default: 256K)
  MYSQL_READ_BUFFER_SIZE (default: 8M or 5% of available memory)
  MYSQL_INNODB_BUFFER_POOL_SIZE (default: 32M or 50% of available memory)
  MYSQL_INNODB_LOG_FILE_SIZE (default: 8M or 15% of available memory)
  MYSQL_INNODB_LOG_BUFFER_SIZE (default: 8M or 15% of available memory)

For more information, see https://github.com/sclorg/mysql-container
[student@workstation ~]$ pomdna logs mysql-db
bash: pomdna: command not found...
[student@workstation ~]$ podnan logs mysql-db
bash: podnan: command not found...
[student@workstation ~]$ podman logs mysql-db
=> sourcing 20-validate-variables.sh ...
You must either specify the following environment variables:
  MYSQL_USER (regex: '^[a-zA-Z0-9_]+$')
  MYSQL_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
  MYSQL_DATABASE (regex: '^[a-zA-Z0-9_]+$')
Or the following environment variable:
  MYSQL_ROOT_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
Or both.
Optional Settings:
  MYSQL_LOWER_CASE_TABLE_NAMES (default: 0)
  MYSQL_LOG_QUERIES_ENABLED (default: 0)
  MYSQL_MAX_CONNECTIONS (default: 151)
  MYSQL_FT_MIN_WORD_LEN (default: 4)
  MYSQL_FT_MAX_WORD_LEN (default: 20)
  MYSQL_AIO (default: 1)
  MYSQL_KEY_BUFFER_SIZE (default: 32M or 10% of available memory)
  MYSQL_MAX_ALLOWED_PACKET (default: 200M)
  MYSQL_TABLE_OPEN_CACHE (default: 400)
  MYSQL_SORT_BUFFER_SIZE (default: 256K)
  MYSQL_READ_BUFFER_SIZE (default: 8M or 5% of available memory)
  MYSQL_INNODB_BUFFER_POOL_SIZE (default: 32M or 50% of available memory)
  MYSQL_INNODB_LOG_FILE_SIZE (default: 8M or 15% of available memory)
  MYSQL_INNODB_LOG_BUFFER_SIZE (default: 8M or 15% of available memory)

For more information, see https://github.com/sclorg/mysql-container
[student@workstation ~]$ 
[student@workstation ~]$ podman run -d --name mysq -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
7779225cf1e5e3f6dd5f7b916ee1897b0f0c18b9dac9c0160dada46fe4ec1640
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}} {{.Status}}"
7779225cf1e5 mysq Up 18 seconds ago
[student@workstation ~]$ podman cp /home/student/DO180/labs/manage-lifcycle/db.sql mysq:/
Error: error evaluating symlinks "": lstat /home/student/DO180/labs/manage-lifcycle: no such file or directory
[student@workstation ~]$ podman cp /home/student/DO180/labs/manage-lifecycle/db.sql mysq:/
[student@workstation ~]$ podman exec mysq /bin/bash -c 'mysql -uuser1 -pmypa55 items < /dvb.sql'
/bin/bash: /dvb.sql: No such file or directory
Error: non zero exit code: 1: OCI runtime error
[student@workstation ~]$ podman exec mysq /bin/bash -c 'mysql -uuser1 -pmypa55 items < /db.sql'
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ podman run --name mysql-2 -it registry.redhat.io/rhel8/mysql-80:1 /bin/bash
bash-4.4$ mysql -uroot
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
bash-4.4$ exit
exit
[student@workstation ~]$ podman ps -a --format="{{.ID}} {{.Names}} {{.Status}}"
0cc6dc3bbecc mysql-2 Exited (1) 25 seconds ago
7779225cf1e5 mysq Up 4 minutes ago
374107498a98 mysql-db Exited (1) 6 minutes ago
[student@workstation ~]$ podman exec mysq /bin/bash -c 'mysql -uuser1 -pmypa55 -e "select * from items.Projects;"'
mysql: [Warning] Using a password on the command line interface can be insecure.
id	name	code
1	DevOps	DO180
[student@workstation ~]$ lab manage-lifecycle finish 

Completing the Guided Excercise: Managing a MySQL Container

 · Stopping 'mysql' container..................................  SUCCESS
 · Stopping 'mysql-2' container................................  SUCCESS
 · Removing 'mysql' container..................................  SUCCESS
 · Removing 'mysql-2' container................................  SUCCESS
 · Removing 'mysql-db' container...............................  SUCCESS
 · Removing 'registry.redhat.io/rhel8/mysql-80:1' image........  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ podman ps -a --format="{{.ID}} {{.Names}} {{.Status}}"
[student@workstation ~]$ podman image -a
Error: unknown shorthand flag: 'a' in -a
[student@workstation ~]$ podman image list
REPOSITORY   TAG   IMAGE ID   CREATED   SIZE
[student@workstation ~]$ lab manage-storage start 

Setting up workstation for the Guided Exercise: Persisting a MySQL Database

 · Checking podman configuration...............................  SUCCESS
 · Check if the directory used by lab is not created...........  SUCCESS
[student@workstation ~]$ mkdir -pv /home/student/local/mysql
mkdir: created directory '/home/student/local'
mkdir: created directory '/home/student/local/mysql'
[student@workstation ~]$ sudo semanage fcontext -a -t container_file_t '/home/student/local/mysql(/.*)?'
[student@workstation ~]$ sudo restorecon -R /home/student/local/mysql
[student@workstation ~]$ ls -lZ /home/student/local/mysql
total 0
[student@workstation ~]$ ls -ldZ /home/student/local/mysql
drwxrwxr-x. 2 student student unconfined_u:object_r:container_file_t:s0 6 Mar  8 07:06 /home/student/local/mysql
[student@workstation ~]$ podman unshare chown 27:27 /home/student/local/mysql
[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials...
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ podman pull redgistry.redhat.io/rhel8/msysql-80:1
Trying to pull redgistry.redhat.io/rhel8/msysql-80:1...
  Get https://redgistry.redhat.io/v2/: dial tcp: lookup redgistry.redhat.io on 172.25.250.254:53: no such host
Error: error pulling image "redgistry.redhat.io/rhel8/msysql-80:1": unable to pull redgistry.redhat.io/rhel8/msysql-80:1: unable to pull image: Error initializing source docker://redgistry.redhat.io/rhel8/msysql-80:1: error pinging docker registry redgistry.redhat.io: Get https://redgistry.redhat.io/v2/: dial tcp: lookup redgistry.redhat.io on 172.25.250.254:53: no such host
[student@workstation ~]$ podman pull registry.redhat.io/rhel8/msysql-80:1
Trying to pull registry.redhat.io/rhel8/msysql-80:1...
  unknown: Not Found
Error: error pulling image "registry.redhat.io/rhel8/msysql-80:1": unable to pull registry.redhat.io/rhel8/msysql-80:1: unable to pull image: Error initializing source docker://registry.redhat.io/rhel8/msysql-80:1: Error reading manifest 1 in registry.redhat.io/rhel8/msysql-80: unknown: Not Found
[student@workstation ~]$ 
[student@workstation ~]$ podman pull registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Copying blob 0d875a68bf99 done
Copying blob 4974e12a6555 done
Copying blob 950c796b5dbc done
Copying blob 8dfe9326f733 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
baf7c77844e70bcf4523ed0d5d4bb7b03ef8e09e13152520afafa248f4ee6ab4
[student@workstation ~]$ podman run --name persist-db -d -v /home/student/local/mysql:/var/lib/mysql/data -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
2ccd4047f2bbce830ccd5b51392382ca693e7f3ce51e71cc06cdb5e08eda7e5d
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS             PORTS  NAMES
2ccd4047f2bb  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  12 seconds ago  Up 12 seconds ago         persist-db
[student@workstation ~]$ podman ps -a --format="{{.ID}} {{.Names}} {{.Status}}"
2ccd4047f2bb persist-db Up 58 seconds ago
[student@workstation ~]$ ls -ld /home/student/local/mysql/items
drwxr-x---. 2 100026 100026 6 Mar  8 07:22 /home/student/local/mysql/items
[student@workstation ~]$ podman unshare ls -ld /home/student/local/mysql/items
drwxr-x---. 2 27 27 6 Mar  8 07:22 /home/student/local/mysql/items
[student@workstation ~]$ lab manage-storage finish 

Completing the Guided Exercise: Persisting a MySQL Database

 · Stopping 'persist-db' container.............................  SUCCESS
 · Removing 'persist-db' container.............................  SUCCESS
 · Removing the 'registry.redhat.io/rhel8/mysql-80:1' image....  SUCCESS
 · Removing the /home/student/local/mysql directory............  SUCCESS
 · Removing the fcontext for /home/student/local/mysql.........  SUCCESS
[student@workstation ~]$ lab manage-networking start 

Setting up workstation for the Guided Exercise: Loading the Database

 · Checking podman configuration...............................  SUCCESS
 · Creating a host directory for the database container:
   · Adding fcontext policy for /home/student/local/mysql......  SUCCESS
   · Creating the /home/student/local/mysql directory..........  SUCCESS
   · Apply fcontext policy to /home/student/local/mysql........  SUCCESS
   · Change owner of the /home/student/local/mysql to the mysql  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials...
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ podman run --name mysqldb-port -d -v /home/student/local/mysql:/var/lib/mysql/data -p 13306:3306 -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Copying blob 8dfe9326f733 done
Copying blob 0d875a68bf99 done
Copying blob 950c796b5dbc done
Copying blob 4974e12a6555 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
ea1257adc2944fb70e5fb35d7ad043cdabaf01bf46db287e673bf885112366f8
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}} {{.Ports}}"
ea1257adc294 mysqldb-port 0.0.0.0:13306-&gt;3306/tcp
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items < /home/student/DO180/labs/manage-networking/db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ podman exec it mysql-port mysql -u root items -e "SELECT * FROM items"
Error: no container with name or ID it found: no such container
[student@workstation ~]$ podman exec it mysql-port mysql -uroot items -e "SELECT * FROM items"
Error: no container with name or ID it found: no such container
[student@workstation ~]$ podman exec it mysqldb-port mysql -uroot items -e "SELECT * FROM items"
Error: no container with name or ID it found: no such container
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}} {{.Ports}}"
ea1257adc294 mysqldb-port 0.0.0.0:13306-&gt;3306/tcp
[student@workstation ~]$ podman exec -it mysqldb-port mysql -uroot items -e "SELECT * FROM items"
ERROR 1146 (42S02) at line 1: Table 'items.items' doesn't exist
Error: non zero exit code: 1: OCI runtime error
[student@workstation ~]$ podman exec -it mysqldb-port mysql -uroot items -e "SELECT * FROM Item"
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ cat /home/student/DO180/labs/manage-networking/db.sql 
CREATE TABLE `Item` (`id` BIGINT not null auto_increment primary key, `description` VARCHAR(100), `done` INT);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (1,'Pick up newspaper', 0);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (2,'Buy groceries', 1);
[student@workstation ~]$ mysql --user1 -h 127.0.0.1 -pmypa55 -P13306 items -e "SELECT * FROM Item"
mysql: [ERROR] unknown option '--user1'.
[student@workstation ~]$ mysql --uuser1 -h 127.0.0.1 -pmypa55 -P13306 items -e "SELECT * FROM Item"
mysql: [ERROR] unknown option '--uuser1'.
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items -e "SELECT * FROM Item"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ podman exec -it mysqldb-port /bin/bash 
bash-4.4$ mysqll -uroot items -e "SELECT * FROM Item"
bash: mysqll: command not found
bash-4.4$ mysql -uroot items -e "SELECT * FROM Item"
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
bash-4.4$ exit
exit
[student@workstation ~]$ lab manage-networking finish 

Completing the Guided Exercise: Loading the Database

 · Stopping the 'mysqldb-port' container.......................  SUCCESS
 · Removing the 'mysqldb-port' container.......................  SUCCESS
 · Removing the 'registry.redhat.io/rhel8/mysql-80:1' image....  SUCCESS
 · Removing the /home/student/local/mysql directory............  SUCCESS
 · Removing the fcontext for /home/student/local/mysql.........  SUCCESS
[student@workstation ~]$ lab manage-review start 

Setting up workstation for the Lab: Managing Containers

 · Checking podman configuration...............................  SUCCESS
 · Check that /home/student/local/mysql does not exist.........  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ mkdir -pv /home/student/local/mysql
mkdir: created directory '/home/student/local/mysql'
[student@workstation ~]$ sudo semanage fcontext -a -t container_file_t '/home/student/local/mysq(/.*)?'
[student@workstation ~]$ sudo restorecon -R /home/student/local/mysql
[student@workstation ~]$ podman unshare chown 27:27 /home/student/local/mysql
[student@workstation ~]$ podman run -d -v /home/student/local/mysql:/var/lib/mysql/data -p 13306:3306 --name mysql-1 -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.com/rhel8/mysql-80:1
Trying to pull registry.redhat.com/rhel8/mysql-80:1...
  Get https://registry.redhat.com/v2/: dial tcp: lookup registry.redhat.com on 172.25.250.254:53: no such host
Error: unable to pull registry.redhat.com/rhel8/mysql-80:1: unable to pull image: Error initializing source docker://registry.redhat.com/rhel8/mysql-80:1: error pinging docker registry registry.redhat.com: Get https://registry.redhat.com/v2/: dial tcp: lookup registry.redhat.com on 172.25.250.254:53: no such host
[student@workstation ~]$ podman run -d -v /home/student/local/mysql:/var/lib/mysql/data -p 13306:3306 --name mysql-1 -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Copying blob 950c796b5dbc done
Copying blob 8dfe9326f733 done
Copying blob 4974e12a6555 done
Copying blob 0d875a68bf99 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
83ada02f078bc8197cf7fdc2bea969b2e2f343fd4f1c7689bfe86cb1a5fdd5f6
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items < /home/student/DO180/labs/manage-review/db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items < /home/student/DO180/labs/manage-review/db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                    PORTS                    NAMES
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  3 minutes ago  Exited (1) 3 minutes ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ podman start 83ada02f078b
83ada02f078bc8197cf7fdc2bea969b2e2f343fd4f1c7689bfe86cb1a5fdd5f6
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                             PORTS                    NAMES
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  4 minutes ago  Exited (1) Less than a second ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ podman stop mysql-1
83ada02f078bc8197cf7fdc2bea969b2e2f343fd4f1c7689bfe86cb1a5fdd5f6
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                     PORTS                    NAMES
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  4 minutes ago  Exited (1) 45 seconds ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ ls -ldZ /home/student/local/mysql/*
ls: cannot access '/home/student/local/mysql/*': No such file or directory
[student@workstation ~]$ ls -ldZ /home/student/local/mysql
drwxrwxr-x. 2 100026 100026 unconfined_u:object_r:user_home_t:s0 6 Mar  8 07:47 /home/student/local/mysql
[student@workstation ~]$ podman unshare chown 27:27 /home/student/local/mysql
[student@workstation ~]$ sudo semanage fcontext -a -t container_file_t '/home/student/local/mysq(/.*)?'
ValueError: File context for /home/student/local/mysq(/.*)? already defined
[student@workstation ~]$ sudo restorecon -R /home/student/local/mysql
[student@workstation ~]$ ls -ldZ /home/student/local/mysql
drwxrwxr-x. 2 100026 100026 unconfined_u:object_r:user_home_t:s0 6 Mar  8 07:47 /home/student/local/mysql
[student@workstation ~]$ sudo semanage fcontext -a -t container_file_t '/home/student/local/mysql(/.*)?'
[student@workstation ~]$ sudo restorecon -R /home/student/local/mysql
[student@workstation ~]$ ls -ldZ /home/student/local/mysql
drwxrwxr-x. 2 100026 100026 unconfined_u:object_r:container_file_t:s0 6 Mar  8 07:47 /home/student/local/mysql
[student@workstation ~]$ podman start mysql-1
mysql-1
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS            PORTS                    NAMES
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  6 minutes ago  Up 8 seconds ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items < /home/student/DO180/labs/manage-review/db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items -e "SELECT * FROM Item"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ cat /home/student/DO180/labs/manage-review/db.sql
CREATE TABLE `Item` (`id` BIGINT not null auto_increment primary key, `description` VARCHAR(100), `done` INT);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (1,'Pick up newspaper', 0);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (2,'Buy groceries', 1);
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                 PORTS                    NAMES
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  8 minutes ago  Up About a minute ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ podman stop mysql-1
83ada02f078bc8197cf7fdc2bea969b2e2f343fd4f1c7689bfe86cb1a5fdd5f6
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                     PORTS                    NAMES
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  8 minutes ago  Exited (0) 11 seconds ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ podman run -d -v /home/student/local/mysql:/var/lib/mysql/data -p 13306:3306 --name mysql-2 -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
c0f412bc7acad2a57854e85e9f442cfad60fd390964237234afb14650b2ea0c7
[student@workstation ~]$ 
[student@workstation ~]$ podman ps -a 
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                         PORTS                    NAMES
c0f412bc7aca  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  13 seconds ago  Up 13 seconds ago              0.0.0.0:13306->3306/tcp  mysql-2
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  9 minutes ago   Exited (0) About a minute ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ podman ps -a > /tmp/my-containers
[student@workstation ~]$ podman exec -it mysql-2 /bin/bash
bash-4.4$ mysql -uroot items -e "SELECT * FROM Item"
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
bash-4.4$ mysql -uroot items -e "SHOW"
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
bash-4.4$ mysql -uroot items -e "LIST *"
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LIST *' at line 1
bash-4.4$ mysql -uroot items -e "LIST"
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LIST' at line 1
bash-4.4$ mysql -uroot items -e "SHOW TABLES"
+-----------------+
| Tables_in_items |
+-----------------+
| Item            |
+-----------------+
bash-4.4$ exit
exit
[student@workstation ~]$ ps -a
    PID TTY          TIME CMD
   1412 tty1     00:00:01 Xorg
   1490 tty1     00:00:00 gnome-session-b
   1524 tty1     00:00:34 gnome-shell
   1545 tty1     00:00:01 ibus-daemon
   1548 tty1     00:00:00 ibus-dconf
   1552 tty1     00:00:00 ibus-x11
   1589 tty1     00:00:00 gsd-xsettings
   1590 tty1     00:00:00 gsd-a11y-settin
   1594 tty1     00:00:00 gsd-clipboard
   1596 tty1     00:00:00 gsd-color
   1597 tty1     00:00:00 gsd-datetime
   1598 tty1     00:00:00 gsd-housekeepin
   1601 tty1     00:00:00 gsd-keyboard
   1606 tty1     00:00:00 gsd-media-keys
   1610 tty1     00:00:00 gsd-mouse
   1612 tty1     00:00:00 gsd-power
   1616 tty1     00:00:00 gsd-print-notif
   1625 tty1     00:00:00 gsd-rfkill
   1628 tty1     00:00:00 gsd-screensaver
   1631 tty1     00:00:00 gsd-sharing
   1643 tty1     00:00:13 gsd-smartcard
   1651 tty1     00:00:00 gsd-sound
   1655 tty1     00:00:00 gsd-wacom
   1676 tty1     00:00:00 ibus-engine-sim
   2445 tty2     00:01:10 Xorg
   2474 tty2     00:00:00 gnome-session-b
   2573 tty2     00:03:24 gnome-shell
   2604 tty2     00:00:01 ibus-daemon
   2608 tty2     00:00:00 ibus-dconf
   2610 tty2     00:00:00 ibus-extension-
   2613 tty2     00:00:00 ibus-x11
   2698 tty2     00:00:00 gsd-power
   2699 tty2     00:00:00 gsd-print-notif
   2705 tty2     00:00:00 gsd-rfkill
   2707 tty2     00:00:00 gsd-screensaver
   2711 tty2     00:00:00 gsd-sharing
   2715 tty2     00:00:13 gsd-smartcard
   2718 tty2     00:00:00 gsd-xsettings
   2722 tty2     00:00:00 gsd-sound
   2725 tty2     00:00:00 gsd-wacom
   2733 tty2     00:00:00 gsd-account
   2737 tty2     00:00:00 gsd-a11y-settin
   2741 tty2     00:00:00 gsd-color
   2743 tty2     00:00:00 gsd-clipboard
   2746 tty2     00:00:01 gsd-housekeepin
   2748 tty2     00:00:00 gsd-datetime
   2752 tty2     00:00:00 gsd-media-keys
   2754 tty2     00:00:00 gsd-keyboard
   2756 tty2     00:00:00 gsd-mouse
   2799 tty2     00:00:00 tracker-miner-a
   2805 tty2     00:00:00 tracker-miner-f
   2813 tty2     00:00:00 seapplet
   2818 tty2     00:00:00 evolution-alarm
   2822 tty2     00:00:00 gsd-printer
   2838 tty2     00:00:02 gnome-software
   2851 tty2     00:00:00 gsd-disk-utilit
   2865 tty2     00:00:00 ibus-engine-sim
  18670 tty2     00:00:34 firefox
  18743 tty2     00:00:02 Web Content
  18776 tty2     00:00:03 WebExtensions
  18824 tty2     00:00:04 Web Content
  18854 tty2     00:00:01 Web Content
  18897 tty2     00:00:01 Web Content
  18984 tty2     00:00:01 Web Content
  19034 tty2     00:00:00 Web Content
  27306 pts/0    00:00:00 slirp4netns
  27627 pts/0    00:00:00 ps
[student@workstation ~]$ 
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                    PORTS                    NAMES
c0f412bc7aca  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  4 minutes ago   Up 4 minutes ago          0.0.0.0:13306->3306/tcp  mysql-2
83ada02f078b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  13 minutes ago  Exited (0) 5 minutes ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ mysql -uuser1 -pmypa55 -h 127.0.0.1 -P13306 -e "INSERT INTO `Item` (`id`,`description`,`done`) VALUES (3,'Finished lab', 1);"
bash: Item: command not found...
bash: description: command not found...
bash: command substitution: line 1: syntax error near unexpected token `done'
bash: command substitution: line 1: `done'
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(uid=1000(student) gid=1000(student) groups=1000(student),10(wheel) context=unco' at line 1
[student@workstation ~]$ mysql -uuser1 -pmypa55 -h 127.0.0.1 -P13306 items -e "INSERT INTO `Item` (`id`,`description`,`done`) VALUES (3,'Finished lab', 1);"
bash: Item: command not found...
bash: description: command not found...
bash: command substitution: line 1: syntax error near unexpected token `done'
bash: command substitution: line 1: `done'
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(uid=1000(student) gid=1000(student) groups=1000(student),10(wheel) context=unco' at line 1
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55  -P13306 items -e "INSERT INTO `Item` (`id`,`description`,`done`) VALUES (3,'Finished lab', 1);"
bash: Item: command not found...
bash: description: command not found...
bash: command substitution: line 1: syntax error near unexpected token `done'
bash: command substitution: line 1: `done'
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(uid=1000(student) gid=1000(student) groups=1000(student),10(wheel) context=unco' at line 1
[student@workstation ~]$ cat /home/student/DO180/labs/manage-review/db.sql 
CREATE TABLE `Item` (`id` BIGINT not null auto_increment primary key, `description` VARCHAR(100), `done` INT);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (1,'Pick up newspaper', 0);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (2,'Buy groceries', 1);
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55  -P13306 items -e "INSERT INTO `Item` (`id`,`description`,`done`) VALUES (3,'Finished lab', 1);"
bash: Item: command not found...
bash: description: command not found...
bash: command substitution: line 1: syntax error near unexpected token `done'
bash: command substitution: line 1: `done'
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(uid=1000(student) gid=1000(student) groups=1000(student),10(wheel) context=unco' at line 1
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55  -P13306 items -e "SELECT * FROM Item;"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55  -P13306 items -e "INSERT INTO Item (`id`,`description`,`done`) VALUES (3,'Finished lab', 1);"
bash: description: command not found...
bash: command substitution: line 1: syntax error near unexpected token `done'
bash: command substitution: line 1: `done'
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=1000(student) gid=1000(student) groups=1000(student),10(wheel) context=unconfin' at line 1
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55  -P13306 items -e "INSERT INTO Item (id,description,done) VALUES (3,'Finished lab', 1);"
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55  -P13306 items -e "SELECT * FROM Item;"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
|  3 | Finished lab      |    1 |
+----+-------------------+------+
[student@workstation ~]$ podman rm mysql-1
83ada02f078bc8197cf7fdc2bea969b2e2f343fd4f1c7689bfe86cb1a5fdd5f6
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS             PORTS                    NAMES
c0f412bc7aca  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  11 minutes ago  Up 11 minutes ago  0.0.0.0:13306->3306/tcp  mysql-2
[student@workstation ~]$ lab manage-review grade

Grading the student's work for the Lab: Managing Containers

 · Checking if the /home/student/local/mysql folder exists.....  PASS
 · Checking if owner was changed...............................  PASS
 · Checking if the container mysql-1 was created...............  PASS
 · Checking if the mysql-2 container is running................  PASS
 · Checking tables for the 'Finished lab' row..................  PASS
[student@workstation ~]$ lab manage-review finish 

Completing the Lab: Managing Containers

 · Removing the /home/student/local/mysql folder...............  SUCCESS
 · Removing the fcontext for /home/student/local/mysql.........  SUCCESS
 · Stopping mysql-1 container..................................  SUCCESS
 · Removing mysql-1 container..................................  SUCCESS
 · Stopping mysql-2 container..................................  SUCCESS
 · Removing mysql-2 container..................................  SUCCESS
 · Removing MySQL container image..............................  SUCCESS
 · Removing temporary file.....................................  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ podman search --help
Search registry for image

Description:
  Search registries for a given image. Can search all the default registries or a specific registry.

  Users can limit the number of results, and filter the output based on certain conditions.

Usage:
  podman search [flags] TERM

Examples:
  podman search --filter=is-official --limit 3 alpine
  podman search registry.fedoraproject.org/  # only works with v2 registries
  podman search --format "table {{.Index}} {{.Name}}" registry.fedoraproject.org/fedora

Flags:
      --authfile string   Path of the authentication file. Use REGISTRY_AUTH_FILE environment variable to override (default "/run/user/1000/containers/auth.json")
  -f, --filter strings    Filter output based on conditions provided (default [])
      --format string     Change the output format to a Go template
      --limit int         Limit the number of results
      --no-trunc          Do not truncate the output
      --tls-verify        Require HTTPS and verify certificates when contacting registries (default true)

[student@workstation ~]$ podman search --list-tags mysql
Error: unknown flag: --list-tags
[student@workstation ~]$ podman search --list-tags registry.access.rdhat.com/ubi8
Error: unknown flag: --list-tags
[student@workstation ~]$ podman search --list-tags registry.access.rdhat.com/ubi8
Error: unknown flag: --list-tags
[student@workstation ~]$ podman version
Version:            1.6.4
RemoteAPI Version:  1
Go Version:         go1.13.4
OS/Arch:            linux/amd64
[student@workstation ~]$ 
[student@workstation ~]$ lab image-operations start 

Setting up workstation for the GE: Creating a Custom Apache Container Image

 · Checking podman configuration...............................  SUCCESS
[student@workstation ~]$ podman login quay.io
Username: lmatouse
Password: 

Error: error logging into "quay.io": invalid username/password
[student@workstation ~]$ Version:            1.6.4
bash: Version:: command not found...
[student@workstation ~]$ 
[student@workstation ~]$ podman login quay.io
Username: lmatouse
Password: 
Login Succeeded!
[student@workstation ~]$ podman run -d --name official-httpd -p 8180:80 quay.io/redhattraining/httpd-parent
Trying to pull quay.io/redhattraining/httpd-parent...
Getting image source signatures
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob 6a5240d60dc4 done
Copying blob a3ed95caeb02 skipped: already exists
Copying blob 787f47dbeaac done
Copying blob 08b8c9fdec44 done
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 skipped: already exists
Copying blob 408208567b9a done
Writing manifest to image destination
Storing signatures
ae0d17edc8a8f17d36d8e8c152d0f895c10999969b40a64366a8c742fb8e4b3a
[student@workstation ~]$ podman exec -it official-httpd /bin/bash
bash-4.4# echo "DO180 Page" > /var/www/html/do180.html
bash-4.4# exit
exit
[student@workstation ~]$ curl 127.0.0.1:8180/do180.html
DO180 Page
[student@workstation ~]$ podman diff official-httpd 
C /run/httpd
A /run/httpd/cgisock.1
A /run/httpd/httpd.pid
C /root
A /root/.bash_history
C /var
C /var/www
C /var/www/html
A /var/www/html/do180.html
C /var/log
C /var/log/httpd
A /var/log/httpd/access_log
A /var/log/httpd/error_log
[student@workstation ~]$ podman stop official-httpd 
ae0d17edc8a8f17d36d8e8c152d0f895c10999969b40a64366a8c742fb8e4b3a
[student@workstation ~]$ podman commit -a 'Ludek Matousek' official-httpd do180-custom-httpd
Getting image source signatures
Copying blob 24d85c895b6b skipped: already exists
Copying blob c613b100be16 skipped: already exists
Copying blob 574bcc187eda skipped: already exists
Copying blob 7f9108fde4a1 skipped: already exists
Copying blob c49097f0c23c done
Copying config 18c0ffe693 done
Writing manifest to image destination
Storing signatures
18c0ffe693a0505b73a20315c7d20a023fcf7d60dbe8f6dc9c80bd0148a10cca
[student@workstation ~]$ podman images
REPOSITORY                            TAG      IMAGE ID       CREATED          SIZE
localhost/do180-custom-httpd          latest   18c0ffe693a0   16 seconds ago   236 MB
quay.io/redhattraining/httpd-parent   latest   4346d3cace25   2 years ago      236 MB
[student@workstation ~]$ cat /usr/local/etc/ocp4.config 
RHT_OCP4_MASTER_API=https://api.eu46.prod.nextcle.com:6443
RHT_OCP4_WILDCARD_DOMAIN=apps.eu46.prod.nextcle.com
RHT_OCP4_NEXUS_SERVER=nexus-common.apps.eu46.prod.nextcle.com
RHT_OCP4_DEV_USER=philbb
RHT_OCP4_DEV_PASSWORD=cb3b1ad14a804986949e
RHT_OCP4_GITHUB_USER=lmatouse
RHT_OCP4_QUAY_USER=lmatouse
[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ podman tag do180-custom-httpd quay.io/${RHT_OCP_QUAY_USER}/do180-custom-httpd:v1.0
Error: error adding 'quay.io//do180-custom-httpd:v1.0' to image "do180-custom-httpd": invalid reference format
[student@workstation ~]$ podman tag do180-custom-httpd quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
[student@workstation ~]$ podman images
REPOSITORY                            TAG      IMAGE ID       CREATED         SIZE
localhost/do180-custom-httpd          latest   18c0ffe693a0   2 minutes ago   236 MB
quay.io/lmatouse/do180-custom-httpd   v1.0     18c0ffe693a0   2 minutes ago   236 MB
quay.io/redhattraining/httpd-parent   latest   4346d3cace25   2 years ago     236 MB
[student@workstation ~]$ podman push quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
Getting image source signatures
Copying blob c49097f0c23c done
Copying blob 574bcc187eda skipped: already exists
Copying blob 24d85c895b6b skipped: already exists
Copying blob c613b100be16 skipped: already exists
Copying blob 7f9108fde4a1 skipped: already exists
Copying config 18c0ffe693 done
Writing manifest to image destination
Storing signatures
[student@workstation ~]$ podman pull -q quay.io/${RHT_OCP4_QUAY_USR}/do180-custom-httpd:v1.0
Error: error pulling image "quay.io//do180-custom-httpd:v1.0": unable to pull quay.io//do180-custom-httpd:v1.0: error getting default registries to try: invalid reference format
[student@workstation ~]$ podman pull -q quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
18c0ffe693a0505b73a20315c7d20a023fcf7d60dbe8f6dc9c80bd0148a10cca
[student@workstation ~]$ podman image
Error: missing command 'podman image COMMAND'
Try 'podman image --help' for more information.
[student@workstation ~]$ podman images
REPOSITORY                            TAG      IMAGE ID       CREATED          SIZE
quay.io/lmatouse/do180-custom-httpd   v1.0     18c0ffe693a0   10 minutes ago   236 MB
localhost/do180-custom-httpd          latest   18c0ffe693a0   10 minutes ago   236 MB
quay.io/redhattraining/httpd-parent   latest   4346d3cace25   2 years ago      236 MB
[student@workstation ~]$ podman run -d --name test-httpd -p 8280:80 ${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
1e65afc993e27ca6e5fa05890b4eaf276eabd54f3feb11b49fce4f4fe811d35a
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                                     COMMAND               CREATED        STATUS            PORTS                 NAMES
1e65afc993e2  quay.io/lmatouse/do180-custom-httpd:v1.0  /bin/sh -c /usr/s...  5 seconds ago  Up 4 seconds ago  0.0.0.0:8280->80/tcp  test-httpd
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                       COMMAND               CREATED         STATUS                     PORTS                 NAMES
1e65afc993e2  quay.io/lmatouse/do180-custom-httpd:v1.0    /bin/sh -c /usr/s...  8 seconds ago   Up 7 seconds ago           0.0.0.0:8280->80/tcp  test-httpd
ae0d17edc8a8  quay.io/redhattraining/httpd-parent:latest  /bin/sh -c /usr/s...  15 minutes ago  Exited (0) 12 minutes ago  0.0.0.0:8180->80/tcp  official-httpd
[student@workstation ~]$ curl http://localhost:8280/do180.html
DO180 Page
[student@workstation ~]$ lab image-operations finish 

Completing the GE: Creating a Custom Apache Container Image

 · Stopping official-httpd container...........................  SUCCESS
 · Removing official-httpd container...........................  SUCCESS
 · Stopping test-httpd container...............................  SUCCESS
 · Removing test-httpd container...............................  SUCCESS
 · Removing redhattraining/httpd-parent image..................  SUCCESS
 · Removing quay.io/lmatouse/do180-custom-httpd image..........  SUCCESS
 · Removing localhost/do180-custom-httpd image.................  SUCCESS
[student@workstation ~]$ lab image-review start

Setting up workstation for the Lab: Managing Images

 · Checking podman configuration...............................  SUCCESS
[student@workstation ~]$ podman login quay.io
Authenticating with existing credentials...
Existing credentials are valid. Already logged in to quay.io
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ podman images
REPOSITORY   TAG   IMAGE ID   CREATED   SIZE
[student@workstation ~]$ podman pull -q quay.io/redhattraining/nginx:1.17
9beeba249f3ee158d3e495a6ac25c5667ae2de8a43ac2a8bfd2bf687a58c06c9
[student@workstation ~]$ podman images
REPOSITORY                     TAG    IMAGE ID       CREATED         SIZE
quay.io/redhattraining/nginx   1.17   9beeba249f3e   22 months ago   131 MB
[student@workstation ~]$ podman run -d -p 8080:80 --name official-nginx quay.io/redhattraining/nginx:1.17
27707f163624cbcf59a651446db495bf4d0a2daeacfeee961e825eec6e928151
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                              COMMAND               CREATED        STATUS            PORTS                 NAMES
27707f163624  quay.io/redhattraining/nginx:1.17  nginx -g daemon o...  5 seconds ago  Up 5 seconds ago  0.0.0.0:8080->80/tcp  official-nginx
[student@workstation ~]$ podman exec -it official-nginx /bin/bash
root@27707f163624:/# echo DO180 /usr/share/nginx/html/index.html 
DO180 /usr/share/nginx/html/index.html
root@27707f163624:/# echo DO180 > /usr/share/nginx/html/index.html 
root@27707f163624:/# exit
exit
[student@workstation ~]$ curl localhost:8080
DO180
[student@workstation ~]$ curl localhost:8080/idnex.html
<html>
<head><title>404 Not Found</title></head>
<body>
<center><h1>404 Not Found</h1></center>
<hr><center>nginx/1.17.10</center>
</body>
</html>
[student@workstation ~]$ curl localhost:8080/index.html
DO180
[student@workstation ~]$ podman stop official-nginx 
27707f163624cbcf59a651446db495bf4d0a2daeacfeee961e825eec6e928151
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                              COMMAND               CREATED        STATUS                    PORTS                 NAMES
27707f163624  quay.io/redhattraining/nginx:1.17  nginx -g daemon o...  6 minutes ago  Exited (0) 5 seconds ago  0.0.0.0:8080->80/tcp  official-nginx
[student@workstation ~]$ podman commit --author "Ludek Matousek" official-nginx  do180/mynginx:v1.0-SNAPSHOT
Getting image source signatures
Copying blob ffc9b21953f4 skipped: already exists
Copying blob 2f4accd375d9 skipped: already exists
Copying blob 6c7de695ede3 skipped: already exists
Copying blob 1b6dbd2d2adf done
Copying config 89accfaea8 done
Writing manifest to image destination
Storing signatures
89accfaea80f4ef3663b33a78a520ef0dba414e934f31c37a22cd841ba1241e0
[student@workstation ~]$ podman images
REPOSITORY                     TAG             IMAGE ID       CREATED         SIZE
localhost/do180/mynginx        v1.0-SNAPSHOT   89accfaea80f   7 seconds ago   131 MB
quay.io/redhattraining/nginx   1.17            9beeba249f3e   22 months ago   131 MB
[student@workstation ~]$ podman run -d --name official-nginx-dev -p 8080:80 localhost/do180/mynginx:v1.0-SNAPSHOT 
d775164abe9ff0522a1b1e2dce8af7409480816372ae8ff0c7621eda99c36f0f
[student@workstation ~]$ podman exec -it official-nginx-dev /bin/bash
root@d775164abe9f:/# echo "DO180 Page" > /usr/share/nginx/html/index.html 
root@d775164abe9f:/# exit
exit
[student@workstation ~]$ curl localhost:8080
DO180 Page
[student@workstation ~]$ podman stop official-nginx-dev 
d775164abe9ff0522a1b1e2dce8af7409480816372ae8ff0c7621eda99c36f0f
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                  COMMAND               CREATED             STATUS                    PORTS                 NAMES
d775164abe9f  localhost/do180/mynginx:v1.0-SNAPSHOT  nginx -g daemon o...  About a minute ago  Exited (0) 4 seconds ago  0.0.0.0:8080->80/tcp  official-nginx-dev
27707f163624  quay.io/redhattraining/nginx:1.17      nginx -g daemon o...  13 minutes ago      Exited (0) 7 minutes ago  0.0.0.0:8080->80/tcp  official-nginx
[student@workstation ~]$ podman commit --author "Ludek Matousek" official-nginx-dev do180/mynginx:v1.0
Getting image source signatures
Copying blob ffc9b21953f4 skipped: already exists
Copying blob 2f4accd375d9 skipped: already exists
Copying blob 6c7de695ede3 skipped: already exists
Copying blob 1b6dbd2d2adf skipped: already exists
Copying blob 978b60227471 done
Copying config 26853d13bf done
Writing manifest to image destination
Storing signatures
26853d13bf7d095d8d7b539787f9faa964bc0bcdc45f787539b99abeb3803b3f
[student@workstation ~]$ podman images
REPOSITORY                     TAG             IMAGE ID       CREATED         SIZE
localhost/do180/mynginx        v1.0            26853d13bf7d   6 seconds ago   131 MB
localhost/do180/mynginx        v1.0-SNAPSHOT   89accfaea80f   5 minutes ago   131 MB
quay.io/redhattraining/nginx   1.17            9beeba249f3e   22 months ago   131 MB
[student@workstation ~]$ podman rmi localhost/do180/mynginx:v1.0-SNAPSHOT 
Error: could not remove image 89accfaea80f4ef3663b33a78a520ef0dba414e934f31c37a22cd841ba1241e0 as it is being used by 1 containers
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
[student@workstation ~]$ podman rmi -f localhost/do180/mynginx:v1.0-SNAPSHOT 
Untagged: localhost/do180/mynginx:v1.0-SNAPSHOT
[student@workstation ~]$ podman images
REPOSITORY                     TAG    IMAGE ID       CREATED              SIZE
localhost/do180/mynginx        v1.0   26853d13bf7d   About a minute ago   131 MB
quay.io/redhattraining/nginx   1.17   9beeba249f3e   22 months ago        131 MB
[student@workstation ~]$ 
[student@workstation ~]$ podman run -d --name my-nginx -p 8280:80 localhost/do180/mynginx:v1.0 
d6c0056aac58f1695d801700f7dc855baa0c02ea577e3c57ff56d1694ca7b92c
[student@workstation ~]$ curl localhost:8280
DO180 Page
[student@workstation ~]$ lab image-review grade

Grading the student's work for the Lab: Managing Images

 · Nginx container image is pulled.............................  PASS
 · Container official-nginx is created.........................  PASS
 · Container official-nginx is stopped.........................  PASS
 · Tag do180/mynginx:v1.0-SNAPSHOT is removed..................  PASS
 · Tag do180/mynginx:v1.0 is created...........................  PASS
 · Container my-nginx is created and running...................  PASS
 · index.html is available with the custom content.............  PASS
[student@workstation ~]$ lab image-review finish 

Completing the Lab: Managing Images

 · Stopping official-nginx-dev container.......................  SUCCESS
 · Removing official-nginx-dev container.......................  SUCCESS
 · Stopping official-nginx container...........................  SUCCESS
 · Removing official-nginx container...........................  SUCCESS
 · Removing do180/mynginx:v1.0 image...........................  SUCCESS
 · Removing quay.io/redhattraining/nginx:1.17 image............  SUCCESS
[student@workstation ~]$ lab dockerfile-create start 

Setting up workstation for the Guided Exercise: Building a basic Apache Container Image

 · Checking podman configuration...............................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ vim /home/student/DO180/labs/dockerfile-create/Containerfile
[student@workstation ~]$ cd /home/student/DO180/labs/dockerfile-create/
[student@workstation dockerfile-create]$ podman build --layers=false -t do180/apache .
STEP 1: FROM ubi8/ubi:8.3
Getting image source signatures
Copying blob 4b21dcdd136d done
Copying blob 55eda7743468 done
Copying config 613e5da7a9 done
Writing manifest to image destination
Storing signatures
STEP 2: MAINTAINER Ludek Matousek <lmatouse@redhat.com>
STEP 3: LABEL description="A custom Apache cntainer based on UBI 8"
STEP 4: RUN yum install -y httpd &&     yum clean all
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.

Red Hat Universal Base Image 8 (RPMs) - BaseOS  3.3 MB/s | 797 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - AppStre  21 MB/s | 2.6 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeRea 115 kB/s |  16 kB     00:00    
Dependencies resolved.
==============================================================================================
 Package              Arch    Version                                   Repository        Size
==============================================================================================
Installing:
 httpd                x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  1.4 M
Installing dependencies:
 apr                  x86_64  1.6.3-12.el8                              ubi-8-appstream  130 k
 apr-util             x86_64  1.6.1-6.el8                               ubi-8-appstream  105 k
 httpd-filesystem     noarch  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream   40 k
 httpd-tools          x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  107 k
 mailcap              noarch  2.1.48-3.el8                              ubi-8-baseos      39 k
 mod_http2            x86_64  1.15.7-3.module+el8.4.0+8625+d397f3da     ubi-8-appstream  154 k
 redhat-logos-httpd   noarch  84.5-1.el8                                ubi-8-baseos      29 k
Installing weak dependencies:
 apr-util-bdb         x86_64  1.6.1-6.el8                               ubi-8-appstream   25 k
 apr-util-openssl     x86_64  1.6.1-6.el8                               ubi-8-appstream   27 k
Enabling module streams:
 httpd                        2.4                                                             

Transaction Summary
==============================================================================================
Install  10 Packages

Total download size: 2.0 M
Installed size: 5.5 M
Downloading Packages:
(1/10): mailcap-2.1.48-3.el8.noarch.rpm         435 kB/s |  39 kB     00:00    
(2/10): mod_http2-1.15.7-3.module+el8.4.0+8625+ 1.6 MB/s | 154 kB     00:00    
(3/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 308 kB/s |  29 kB     00:00    
(4/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 7.6 MB/s |  27 kB     00:00    
(5/10): apr-util-1.6.1-6.el8.x86_64.rpm          14 MB/s | 105 kB     00:00    
(6/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     6.7 MB/s |  25 kB     00:00    
(7/10): httpd-tools-2.4.37-43.module+el8.5.0+13  21 MB/s | 107 kB     00:00    
(8/10): httpd-filesystem-2.4.37-43.module+el8.5 7.8 MB/s |  40 kB     00:00    
(9/10): apr-1.6.3-12.el8.x86_64.rpm              17 MB/s | 130 kB     00:00    
(10/10): httpd-2.4.37-43.module+el8.5.0+13806+b  40 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            14 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    5/10 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    6/10 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    6/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           7/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  8/10 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    9/10 
  Installing       : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  1/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                           2/10 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    3/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   5/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       6/10 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    7/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               8/10 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    9/10 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
Installed products updated.

Installed:
  apr-1.6.3-12.el8.x86_64                                                       
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                        
  httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                  
  mailcap-2.1.48-3.el8.noarch                                                   
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  redhat-logos-httpd-84.5-1.el8.noarch                                          

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.

25 files removed
STEP 5: RUN echo "Hello from Containerfile" > /var/www/html/index.html
STEP 6: EXPOSE 80
STEP 7: CMD ["httpd", "-D", "FOREGROUND"]
STEP 8: COMMIT do180/apache
Getting image source signatures
Copying blob 476579af086a skipped: already exists
Copying blob 1e8cd6732429 skipped: already exists
Copying blob f64463ad6fa6 done
Copying config 1056ac40cf done
Writing manifest to image destination
Storing signatures
1056ac40cfa07f913abc9dcb2a4c57d28499b04e30bb398e68be2f0bd4c7f37b
[student@workstation dockerfile-create]$ podman images
REPOSITORY                            TAG      IMAGE ID       CREATED          SIZE
localhost/do180/apache                latest   1056ac40cfa0   44 seconds ago   234 MB
registry.access.redhat.com/ubi8/ubi   8.3      613e5da7a934   10 months ago    213 MB
[student@workstation dockerfile-create]$ podman run --name lab-apache -d -p 10080:80 do180/apache
13f101994bbd5a1adf388e1539b23e7b6c899044ef41f6344ee98a28a7c5c825
[student@workstation dockerfile-create]$ podman ps
CONTAINER ID  IMAGE                          COMMAND               CREATED        STATUS            PORTS                  NAMES
13f101994bbd  localhost/do180/apache:latest  httpd -D FOREGROU...  5 seconds ago  Up 5 seconds ago  0.0.0.0:10080->80/tcp  lab-apache
[student@workstation dockerfile-create]$ curl 127.0.0.1:10080
Hello from Containerfile
[student@workstation dockerfile-create]$ lab dockerfile-create finish 

Completing the Guided Exercise: Building a basic Apache Container Image

 · Stopping lab-apache container that is running...............  SUCCESS
 · Removing lab-apache container that is in the cache..........  SUCCESS
 · Removing do180/apache custom container image................  SUCCESS
 · Removing UBI8 container image...............................  SUCCESS
[student@workstation dockerfile-create]$ lab dockerfile-review start 

Setting up workstation for the Lab: Creating Custom Container Images

 · Checking podman configuration...............................  SUCCESS
 · Checking if the container exists or is running..............  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation dockerfile-create]$ vim /home/student/DO180/labs/dockerfile-review/Containerfile 
[student@workstation dockerfile-create]$ cd ../dockerfile-review/
[student@workstation dockerfile-review]$ podman build --layers=false -t do180/custom-apache .
STEP 1: FROM ubi8/ubi:8.3
Getting image source signatures
Copying blob 55eda7743468 done
Copying blob 4b21dcdd136d done
Copying config 613e5da7a9 done
Writing manifest to image destination
Storing signatures
STEP 2: MAINTAINER Ludek Matousek <lmatouse@redhat.com>
STEP 3: ENV PORT 8080
STEP 4: RUN yum install -y httpd &&     yum clean all
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.

Red Hat Universal Base Image 8 (RPMs) - BaseOS  4.0 MB/s | 797 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - AppStre  18 MB/s | 2.6 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeRea 117 kB/s |  16 kB     00:00    
Dependencies resolved.
==============================================================================================
 Package              Arch    Version                                   Repository        Size
==============================================================================================
Installing:
 httpd                x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  1.4 M
Installing dependencies:
 apr                  x86_64  1.6.3-12.el8                              ubi-8-appstream  130 k
 apr-util             x86_64  1.6.1-6.el8                               ubi-8-appstream  105 k
 httpd-filesystem     noarch  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream   40 k
 httpd-tools          x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  107 k
 mailcap              noarch  2.1.48-3.el8                              ubi-8-baseos      39 k
 mod_http2            x86_64  1.15.7-3.module+el8.4.0+8625+d397f3da     ubi-8-appstream  154 k
 redhat-logos-httpd   noarch  84.5-1.el8                                ubi-8-baseos      29 k
Installing weak dependencies:
 apr-util-bdb         x86_64  1.6.1-6.el8                               ubi-8-appstream   25 k
 apr-util-openssl     x86_64  1.6.1-6.el8                               ubi-8-appstream   27 k
Enabling module streams:
 httpd                        2.4                                                             

Transaction Summary
==============================================================================================
Install  10 Packages

Total download size: 2.0 M
Installed size: 5.5 M
Downloading Packages:
(1/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 228 kB/s |  29 kB     00:00    
(2/10): mailcap-2.1.48-3.el8.noarch.rpm         300 kB/s |  39 kB     00:00    
(3/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 6.0 MB/s |  27 kB     00:00    
(4/10): apr-util-1.6.1-6.el8.x86_64.rpm          10 MB/s | 105 kB     00:00    
(5/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     405 kB/s |  25 kB     00:00    
(6/10): mod_http2-1.15.7-3.module+el8.4.0+8625+ 771 kB/s | 154 kB     00:00    
(7/10): httpd-tools-2.4.37-43.module+el8.5.0+13 1.7 MB/s | 107 kB     00:00    
(8/10): httpd-filesystem-2.4.37-43.module+el8.5 9.5 MB/s |  40 kB     00:00    
(9/10): apr-1.6.3-12.el8.x86_64.rpm              17 MB/s | 130 kB     00:00    
(10/10): httpd-2.4.37-43.module+el8.5.0+13806+b  20 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                           7.3 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    5/10 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    6/10 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    6/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           7/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  8/10 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    9/10 
  Installing       : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  1/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                           2/10 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    3/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   5/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       6/10 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    7/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               8/10 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    9/10 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
Installed products updated.

Installed:
  apr-1.6.3-12.el8.x86_64                                                       
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                        
  httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                  
  mailcap-2.1.48-3.el8.noarch                                                   
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  redhat-logos-httpd-84.5-1.el8.noarch                                          

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.

25 files removed
STEP 5: RUN sed -ri -e "/^Listen 80/c\Listen ${PORT}" /etc/httpd/conf/httpd.conf &&     chown -R apache:apache /etc/httpd/logs/ &&     chown -R apache:apache /run/httpd/
STEP 6: USER apache
STEP 7: EXPOSE ${PORT}
STEP 8: COPY ["lab/*", "/var/www/html/"]
Error: error building at STEP "COPY lab/* /var/www/html/": no files found matching "/home/student/DO180/labs/dockerfile-review/lab/*": no such file or directory
[student@workstation dockerfile-review]$ ls
Containerfile  src
[student@workstation dockerfile-review]$ podman image
Error: missing command 'podman image COMMAND'
Try 'podman image --help' for more information.
[student@workstation dockerfile-review]$ podman images
REPOSITORY                            TAG   IMAGE ID       CREATED         SIZE
registry.access.redhat.com/ubi8/ubi   8.3   613e5da7a934   10 months ago   213 MB
[student@workstation dockerfile-review]$ vim /home/student/DO180/labs/dockerfile-review/Containerfile 
[student@workstation dockerfile-review]$ podman build --layers=false -t do180/custom-apache .
STEP 1: FROM ubi8/ubi:8.3
STEP 2: MAINTAINER Ludek Matousek <lmatouse@redhat.com>
STEP 3: ENV PORT 8080
STEP 4: RUN yum install -y httpd &&     yum clean all
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.

Red Hat Universal Base Image 8 (RPMs) - BaseOS  2.8 MB/s | 797 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - AppStre  19 MB/s | 2.6 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeRea 148 kB/s |  16 kB     00:00    
Dependencies resolved.
==============================================================================================
 Package              Arch    Version                                   Repository        Size
==============================================================================================
Installing:
 httpd                x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  1.4 M
Installing dependencies:
 apr                  x86_64  1.6.3-12.el8                              ubi-8-appstream  130 k
 apr-util             x86_64  1.6.1-6.el8                               ubi-8-appstream  105 k
 httpd-filesystem     noarch  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream   40 k
 httpd-tools          x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  107 k
 mailcap              noarch  2.1.48-3.el8                              ubi-8-baseos      39 k
 mod_http2            x86_64  1.15.7-3.module+el8.4.0+8625+d397f3da     ubi-8-appstream  154 k
 redhat-logos-httpd   noarch  84.5-1.el8                                ubi-8-baseos      29 k
Installing weak dependencies:
 apr-util-bdb         x86_64  1.6.1-6.el8                               ubi-8-appstream   25 k
 apr-util-openssl     x86_64  1.6.1-6.el8                               ubi-8-appstream   27 k
Enabling module streams:
 httpd                        2.4                                                             

Transaction Summary
==============================================================================================
Install  10 Packages

Total download size: 2.0 M
Installed size: 5.5 M
Downloading Packages:
(1/10): mailcap-2.1.48-3.el8.noarch.rpm         614 kB/s |  39 kB     00:00    
(2/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 451 kB/s |  29 kB     00:00    
(3/10): mod_http2-1.15.7-3.module+el8.4.0+8625+ 2.2 MB/s | 154 kB     00:00    
(4/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 1.5 MB/s |  27 kB     00:00    
(5/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     1.5 MB/s |  25 kB     00:00    
(6/10): apr-util-1.6.1-6.el8.x86_64.rpm         4.7 MB/s | 105 kB     00:00    
(7/10): httpd-tools-2.4.37-43.module+el8.5.0+13  20 MB/s | 107 kB     00:00    
(8/10): httpd-filesystem-2.4.37-43.module+el8.5 6.6 MB/s |  40 kB     00:00    
(9/10): apr-1.6.3-12.el8.x86_64.rpm             5.2 MB/s | 130 kB     00:00    
(10/10): httpd-2.4.37-43.module+el8.5.0+13806+b  33 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            14 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    5/10 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    6/10 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    6/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           7/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  8/10 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    9/10 
  Installing       : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  1/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                           2/10 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    3/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   5/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       6/10 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    7/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               8/10 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    9/10 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   10/10 
Installed products updated.

Installed:
  apr-1.6.3-12.el8.x86_64                                                       
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                        
  httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                  
  mailcap-2.1.48-3.el8.noarch                                                   
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  redhat-logos-httpd-84.5-1.el8.noarch                                          

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.

25 files removed
STEP 5: RUN sed -ri -e "/^Listen 80/c\Listen ${PORT}" /etc/httpd/conf/httpd.conf &&     chown -R apache:apache /etc/httpd/logs/ &&     chown -R apache:apache /run/httpd/
STEP 6: USER apache
STEP 7: EXPOSE ${PORT}
STEP 8: COPY ["src/*", "/var/www/html/"]
STEP 9: CMD ["httpd", "-D", "FOREGROUND"]
STEP 10: COMMIT do180/custom-apache
Getting image source signatures
Copying blob 476579af086a skipped: already exists
Copying blob 1e8cd6732429 skipped: already exists
Copying blob cbadf7ce15e8 done
Copying config ab39aac44c done
Writing manifest to image destination
Storing signatures
ab39aac44c08ceaecb239a58ed58664435a192b77fbfe502d0318782e6fb72dc
[student@workstation dockerfile-review]$ podman images
REPOSITORY                            TAG      IMAGE ID       CREATED          SIZE
localhost/do180/custom-apache         latest   ab39aac44c08   11 seconds ago   234 MB
registry.access.redhat.com/ubi8/ubi   8.3      613e5da7a934   10 months ago    213 MB
[student@workstation dockerfile-review]$ podman run -d -p 20080:8080 --name containerfile do180/custom-apache
10902d664ed72f80a10b7d43ca621d7268d73aa34cc7bb282157c811a9bec5b2
[student@workstation dockerfile-review]$ podman ps
CONTAINER ID  IMAGE                                 COMMAND               CREATED        STATUS            PORTS                    NAMES
10902d664ed7  localhost/do180/custom-apache:latest  httpd -D FOREGROU...  5 seconds ago  Up 4 seconds ago  0.0.0.0:20080->8080/tcp  containerfile
[student@workstation dockerfile-review]$ curl 127.0.0.1:20080
<html>
 <header><title>DO180 Hello!</title></header>
 <body>
   Hello World! The containerfile-review lab works!
 </body>
</html>
[student@workstation dockerfile-review]$ lab dockerfile-review grade 

Grading the student's work for Lab: Creating Custom Container Images

 · Check for apache container image............................  PASS
 · Check if the container is running...........................  PASS
 · Verifying if httpd was installed correctly in apache image..  PASS
 · Verifying if hello world is running on server...............  PASS

[student@workstation dockerfile-review]$ lab dockerfile-review finish

Completing the Lab: Creating Custom Container Images

 · Stopping grade container....................................  SUCCESS
 · Removing grade container....................................  SUCCESS
 · Stopping running container..................................  SUCCESS
 · Removing the container......................................  SUCCESS
 · Removing do180/custom-apache container image................  SUCCESS
 · Removing ubi8 container image...............................  SUCCESS

[student@workstation dockerfile-review]$ cd 
[student@workstation ~]$ lab openshift-resources start 

Setting up workstation for the Guided Exercise: Deploying a Database Server on OpenShift

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'philbb-mysql-openshift' project is absent.....  SUCCESS
[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-mysql-openshift
Now using project "philbb-mysql-openshift" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ oc new-app --template=mysql-persistent -p MYSQL_USER=user1 -p MYSQL_PASSWORD=mypa55 -p MYSQL_DATABASE=testdb -p MYSQL_ROOT_PASSWORD=r00tpa55 -p VOLUME_CAPACITY=10Gi
--> Deploying template "openshift/mysql-persistent" to project philbb-mysql-openshift

     MySQL
     ---------
     MySQL database service, with persistent storage. For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.
     
     NOTE: Scaling to more than one replica is not supported. You must have persistent volumes available in your cluster to use this template.

     The following service(s) have been created in your project: mysql.
     
            Username: user1
            Password: mypa55
       Database Name: testdb
      Connection URL: mysql://mysql:3306/
     
     For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.

     * With parameters:
        * Memory Limit=512Mi
        * Namespace=openshift
        * Database Service Name=mysql
        * MySQL Connection Username=user1
        * MySQL Connection Password=mypa55
        * MySQL root user Password=r00tpa55
        * MySQL Database Name=testdb
        * Volume Capacity=10Gi
        * Version of MySQL Image=8.0-el8

--> Creating resources ...
    secret "mysql" created
    service "mysql" created
    persistentvolumeclaim "mysql" created
    deploymentconfig.apps.openshift.io "mysql" created
--> Success
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/mysql' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc status
In project philbb-mysql-openshift on server https://api.eu46.prod.nextcle.com:6443

svc/mysql - 172.30.212.155:3306
  dc/mysql deploys openshift/mysql:8.0-el8 
    deployment #1 running for 11 seconds - 0/1 pods

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation ~]$ oc status
In project philbb-mysql-openshift on server https://api.eu46.prod.nextcle.com:6443

svc/mysql - 172.30.212.155:3306
  dc/mysql deploys openshift/mysql:8.0-el8 
    deployment #1 running for 40 seconds - 1 pod

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation ~]$ oc status
In project philbb-mysql-openshift on server https://api.eu46.prod.nextcle.com:6443

svc/mysql - 172.30.212.155:3306
  dc/mysql deploys openshift/mysql:8.0-el8 
    deployment #1 deployed 45 seconds ago - 1 pod

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation ~]$ oc status
In project philbb-mysql-openshift on server https://api.eu46.prod.nextcle.com:6443

svc/mysql - 172.30.212.155:3306
  dc/mysql deploys openshift/mysql:8.0-el8 
    deployment #1 deployed about a minute ago - 1 pod

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation ~]$ oc get pods
NAME             READY   STATUS      RESTARTS   AGE
mysql-1-deploy   0/1     Completed   0          81s
mysql-1-gkqr5    1/1     Running     0          78s
[student@workstation ~]$ oc describe pod mysql-1-gkqr5
Name:         mysql-1-gkqr5
Namespace:    philbb-mysql-openshift
Priority:     0
Node:         eu46-bxxxq-worker-0-97qb7/10.0.3.10
Start Time:   Wed, 09 Mar 2022 07:26:42 -0500
Labels:       deployment=mysql-1
              deploymentconfig=mysql
              name=mysql
Annotations:  k8s.v1.cni.cncf.io/network-status:
                [{
                    "name": "",
                    "interface": "eth0",
                    "ips": [
                        "10.129.2.201"
                    ],
                    "default": true,
                    "dns": {}
                }]
              k8s.v1.cni.cncf.io/networks-status:
                [{
                    "name": "",
                    "interface": "eth0",
                    "ips": [
                        "10.129.2.201"
                    ],
                    "default": true,
                    "dns": {}
                }]
              kubernetes.io/limit-ranger: LimitRanger plugin set: cpu request for container mysql; cpu limit for container mysql
              openshift.io/deployment-config.latest-version: 1
              openshift.io/deployment-config.name: mysql
              openshift.io/deployment.name: mysql-1
              openshift.io/generated-by: OpenShiftNewApp
              openshift.io/scc: restricted
Status:       Running
IP:           10.129.2.201
IPs:
  IP:           10.129.2.201
Controlled By:  ReplicationController/mysql-1
Containers:
  mysql:
    Container ID:   cri-o://e597cf472ca9ee88b18dcc255f65dcb8afd88c46ec446f07ab561af0bf4c3894
    Image:          image-registry.openshift-image-registry.svc:5000/openshift/mysql@sha256:144c42e7437f4024eee4ce556d6ead03b4ec7d0ba636a0f1ce0ace9ace49c545
    Image ID:       image-registry.openshift-image-registry.svc:5000/openshift/mysql@sha256:144c42e7437f4024eee4ce556d6ead03b4ec7d0ba636a0f1ce0ace9ace49c545
    Port:           3306/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 09 Mar 2022 07:27:02 -0500
    Ready:          True
    Restart Count:  0
    Limits:
      cpu:     1500m
      memory:  512Mi
    Requests:
      cpu:      5m
      memory:   512Mi
    Liveness:   exec [/bin/sh -i -c MYSQL_PWD="$MYSQL_PASSWORD" mysqladmin -u $MYSQL_USER ping] delay=30s timeout=1s period=10s #success=1 #failure=3
    Readiness:  exec [/bin/sh -i -c MYSQL_PWD="$MYSQL_PASSWORD" mysqladmin -u $MYSQL_USER ping] delay=5s timeout=1s period=10s #success=1 #failure=3
    Environment:
      MYSQL_USER:           <set to the key 'database-user' in secret 'mysql'>           Optional: false
      MYSQL_PASSWORD:       <set to the key 'database-password' in secret 'mysql'>       Optional: false
      MYSQL_ROOT_PASSWORD:  <set to the key 'database-root-password' in secret 'mysql'>  Optional: false
      MYSQL_DATABASE:       <set to the key 'database-name' in secret 'mysql'>           Optional: false
    Mounts:
      /var/lib/mysql/data from mysql-data (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-bkmkf (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  mysql-data:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  mysql
    ReadOnly:   false
  default-token-bkmkf:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-bkmkf
    Optional:    false
QoS Class:       Burstable
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/memory-pressure:NoSchedule op=Exists
                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason                  Age   From                     Message
  ----     ------                  ----  ----                     -------
  Normal   Scheduled               112s  default-scheduler        Successfully assigned philbb-mysql-openshift/mysql-1-gkqr5 to eu46-bxxxq-worker-0-97qb7
  Normal   SuccessfulAttachVolume  104s  attachdetach-controller  AttachVolume.Attach succeeded for volume "pvc-d115929a-356c-4eae-8dbf-8727673545d8"
  Normal   AddedInterface          94s   multus                   Add eth0 [10.129.2.201/23]
  Normal   Pulled                  93s   kubelet                  Container image "image-registry.openshift-image-registry.svc:5000/openshift/mysql@sha256:144c42e7437f4024eee4ce556d6ead03b4ec7d0ba636a0f1ce0ace9ace49c545" already present on machine
  Normal   Created                 93s   kubelet                  Created container mysql
  Normal   Started                 93s   kubelet                  Started container mysql
  Warning  Unhealthy               87s   kubelet                  Readiness probe failed: sh: cannot set terminal process group (-1): Inappropriate ioctl for device
sh: no job control in this shell
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)'
Check that mysqld is running and that the socket: '/var/lib/mysql/mysql.sock' exists!
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc describe pod mysql-1-5vfn4
Error from server (NotFound): pods "mysql-1-5vfn4" not found
[student@workstation ~]$ oc describe pod mysql-1-gkqr5
Name:         mysql-1-gkqr5
Namespace:    philbb-mysql-openshift
Priority:     0
Node:         eu46-bxxxq-worker-0-97qb7/10.0.3.10
Start Time:   Wed, 09 Mar 2022 07:26:42 -0500
Labels:       deployment=mysql-1
              deploymentconfig=mysql
              name=mysql
Annotations:  k8s.v1.cni.cncf.io/network-status:
                [{
                    "name": "",
                    "interface": "eth0",
                    "ips": [
                        "10.129.2.201"
                    ],
                    "default": true,
                    "dns": {}
                }]
              k8s.v1.cni.cncf.io/networks-status:
                [{
                    "name": "",
                    "interface": "eth0",
                    "ips": [
                        "10.129.2.201"
                    ],
                    "default": true,
                    "dns": {}
                }]
              kubernetes.io/limit-ranger: LimitRanger plugin set: cpu request for container mysql; cpu limit for container mysql
              openshift.io/deployment-config.latest-version: 1
              openshift.io/deployment-config.name: mysql
              openshift.io/deployment.name: mysql-1
              openshift.io/generated-by: OpenShiftNewApp
              openshift.io/scc: restricted
Status:       Running
IP:           10.129.2.201
IPs:
  IP:           10.129.2.201
Controlled By:  ReplicationController/mysql-1
Containers:
  mysql:
    Container ID:   cri-o://e597cf472ca9ee88b18dcc255f65dcb8afd88c46ec446f07ab561af0bf4c3894
    Image:          image-registry.openshift-image-registry.svc:5000/openshift/mysql@sha256:144c42e7437f4024eee4ce556d6ead03b4ec7d0ba636a0f1ce0ace9ace49c545
    Image ID:       image-registry.openshift-image-registry.svc:5000/openshift/mysql@sha256:144c42e7437f4024eee4ce556d6ead03b4ec7d0ba636a0f1ce0ace9ace49c545
    Port:           3306/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 09 Mar 2022 07:27:02 -0500
    Ready:          True
    Restart Count:  0
    Limits:
      cpu:     1500m
      memory:  512Mi
    Requests:
      cpu:      5m
      memory:   512Mi
    Liveness:   exec [/bin/sh -i -c MYSQL_PWD="$MYSQL_PASSWORD" mysqladmin -u $MYSQL_USER ping] delay=30s timeout=1s period=10s #success=1 #failure=3
    Readiness:  exec [/bin/sh -i -c MYSQL_PWD="$MYSQL_PASSWORD" mysqladmin -u $MYSQL_USER ping] delay=5s timeout=1s period=10s #success=1 #failure=3
    Environment:
      MYSQL_USER:           <set to the key 'database-user' in secret 'mysql'>           Optional: false
      MYSQL_PASSWORD:       <set to the key 'database-password' in secret 'mysql'>       Optional: false
      MYSQL_ROOT_PASSWORD:  <set to the key 'database-root-password' in secret 'mysql'>  Optional: false
      MYSQL_DATABASE:       <set to the key 'database-name' in secret 'mysql'>           Optional: false
    Mounts:
      /var/lib/mysql/data from mysql-data (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-bkmkf (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  mysql-data:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  mysql
    ReadOnly:   false
  default-token-bkmkf:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-bkmkf
    Optional:    false
QoS Class:       Burstable
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/memory-pressure:NoSchedule op=Exists
                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason                  Age   From                     Message
  ----     ------                  ----  ----                     -------
  Normal   Scheduled               18m   default-scheduler        Successfully assigned philbb-mysql-openshift/mysql-1-gkqr5 to eu46-bxxxq-worker-0-97qb7
  Normal   SuccessfulAttachVolume  18m   attachdetach-controller  AttachVolume.Attach succeeded for volume "pvc-d115929a-356c-4eae-8dbf-8727673545d8"
  Normal   AddedInterface          18m   multus                   Add eth0 [10.129.2.201/23]
  Normal   Pulled                  18m   kubelet                  Container image "image-registry.openshift-image-registry.svc:5000/openshift/mysql@sha256:144c42e7437f4024eee4ce556d6ead03b4ec7d0ba636a0f1ce0ace9ace49c545" already present on machine
  Normal   Created                 18m   kubelet                  Created container mysql
  Normal   Started                 18m   kubelet                  Started container mysql
  Warning  Unhealthy               17m   kubelet                  Readiness probe failed: sh: cannot set terminal process group (-1): Inappropriate ioctl for device
sh: no job control in this shell
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)'
Check that mysqld is running and that the socket: '/var/lib/mysql/mysql.sock' exists!
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ ^C
[student@workstation ~]$ ^C
bash: : command not found...
[student@workstation ~]$ 
[student@workstation ~]$ ^C
[student@workstation ~]$ 
[student@workstation ~]$ ^C
[student@workstation ~]$ oc get svc
NAME    TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
mysql   ClusterIP   172.30.212.155   <none>        3306/TCP   19m
[student@workstation ~]$ oc describe service mysql
Name:              mysql
Namespace:         philbb-mysql-openshift
Labels:            app=mysql-persistent
                   app.kubernetes.io/component=mysql-persistent
                   app.kubernetes.io/instance=mysql-persistent
                   template=mysql-persistent-template
Annotations:       openshift.io/generated-by: OpenShiftNewApp
                   template.openshift.io/expose-uri: mysql://{.spec.clusterIP}:{.spec.ports[?(.name=="mysql")].port}
Selector:          name=mysql
Type:              ClusterIP
IP:                172.30.212.155
Port:              mysql  3306/TCP
TargetPort:        3306/TCP
Endpoints:         10.129.2.201:3306
Session Affinity:  None
Events:            <none>
[student@workstation ~]$ oc get pvc
NAME    STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
mysql   Bound    pvc-d115929a-356c-4eae-8dbf-8727673545d8   10Gi       RWO            standard       20m
[student@workstation ~]$ oc describe pvc/mysql
Name:          mysql
Namespace:     philbb-mysql-openshift
StorageClass:  standard
Status:        Bound
Volume:        pvc-d115929a-356c-4eae-8dbf-8727673545d8
Labels:        app=mysql-persistent
               app.kubernetes.io/component=mysql-persistent
               app.kubernetes.io/instance=mysql-persistent
               template=mysql-persistent-template
Annotations:   openshift.io/generated-by: OpenShiftNewApp
               pv.kubernetes.io/bind-completed: yes
               pv.kubernetes.io/bound-by-controller: yes
               volume.beta.kubernetes.io/storage-provisioner: kubernetes.io/cinder
               volume.kubernetes.io/selected-node: eu46-bxxxq-worker-0-97qb7
Finalizers:    [kubernetes.io/pvc-protection]
Capacity:      10Gi
Access Modes:  RWO
VolumeMode:    Filesystem
Mounted By:    mysql-1-gkqr5
Events:
  Type    Reason                 Age   From                         Message
  ----    ------                 ----  ----                         -------
  Normal  WaitForFirstConsumer   20m   persistentvolume-controller  waiting for first consumer to be created before binding
  Normal  ProvisioningSucceeded  20m   persistentvolume-controller  Successfully provisioned volume pvc-d115929a-356c-4eae-8dbf-8727673545d8 using kubernetes.io/cinder
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc port-forward mysql-1-
mysql-1-deploy  mysql-1-gkqr5   
[student@workstation ~]$ oc port-forward mysql-1-
mysql-1-deploy  mysql-1-gkqr5   
[student@workstation ~]$ mysql -uuser1 -pmypa55 --protocol tcp -h localhost
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 270
Server version: 8.0.26 Source distribution

Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| testdb             |
+--------------------+
2 rows in set (0.02 sec)

mysql> exit
Bye
[student@workstation ~]$ oc delete project ${RHT_OCP4_DEV_USER}-mysql-openshift
project.project.openshift.io "philbb-mysql-openshift" deleted
[student@workstation ~]$ lab openshift-resources finish 

Completing the Guided Exercise: Deploying a Database Server on OpenShift

 · Deleting the 'philbb-mysql-openshift' project...............  SUCCESS
[student@workstation ~]$ lab openshift-routes start 

Setting up workstation for the Guided Exercise: Exposing a Service as a Route

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'philbb-route' project does not exist..........  SUCCESS
[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-route
Now using project "philbb-route" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ oc new-app --docker-iamge=quay.io/redhattraining/php-hello-dockerfile --name php-helloworld
Error: unknown flag: --docker-iamge
See 'oc new-app --help' for usage.
[student@workstation ~]$ oc new-app --docker-image=quay.io/redhattraining/php-hello-dockerfile --name php-helloworld
--> Found container image 4b696cc (2 years old) from quay.io for "quay.io/redhattraining/php-hello-dockerfile"

    Red Hat Universal Base Image 8 
    ------------------------------ 
    The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.

    Tags: base rhel8

    * An image stream tag will be created as "php-helloworld:latest" that will track this image

--> Creating resources ...
    imagestream.image.openshift.io "php-helloworld" created
    deployment.apps "php-helloworld" created
    service "php-helloworld" created
--> Success
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/php-helloworld' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc status 
In project philbb-route on server https://api.eu46.prod.nextcle.com:6443

svc/php-helloworld - 172.30.138.217:8080
  deployment/php-helloworld deploys istag/php-helloworld:latest 
    deployment #2 running for 4 seconds - 1 pod
    deployment #1 deployed 5 seconds ago


1 info identified, use 'oc status --suggest' to see details.
[student@workstation ~]$ oc status 
In project philbb-route on server https://api.eu46.prod.nextcle.com:6443

svc/php-helloworld - 172.30.138.217:8080
  deployment/php-helloworld deploys istag/php-helloworld:latest 
    deployment #2 running for 9 seconds - 1 pod
    deployment #1 deployed 10 seconds ago


1 info identified, use 'oc status --suggest' to see details.
[student@workstation ~]$ oc get pods -w
NAME                              READY   STATUS    RESTARTS   AGE
php-helloworld-74bb86f6cb-zn8bc   1/1     Running   0          24s
^C[student@workstation ~]$ oc logs -f php-helloworld-74bb86f6cb-zn8bc 
[09-Mar-2022 12:53:51] NOTICE: [pool www] 'user' directive is ignored when FPM is not running as root
[09-Mar-2022 12:53:51] NOTICE: [pool www] 'group' directive is ignored when FPM is not running as root
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 10.129.2.252. Set the 'ServerName' directive globally to suppress this message
^C
[student@workstation ~]$ oc describe svc/php-helloworld
Name:              php-helloworld
Namespace:         philbb-route
Labels:            app=php-helloworld
                   app.kubernetes.io/component=php-helloworld
                   app.kubernetes.io/instance=php-helloworld
Annotations:       openshift.io/generated-by: OpenShiftNewApp
Selector:          deployment=php-helloworld
Type:              ClusterIP
IP:                172.30.138.217
Port:              8080-tcp  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.129.2.252:8080
Session Affinity:  None
Events:            <none>
[student@workstation ~]$ oc expose svc/php-helloworld
route.route.openshift.io/php-helloworld exposed
[student@workstation ~]$ oc describe route
Name:			php-helloworld
Namespace:		philbb-route
Created:		6 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		php-helloworld-philbb-route.apps.eu46.prod.nextcle.com
			   exposed on router default (host apps.eu46.prod.nextcle.com) 6 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.129.2.252:8080
[student@workstation ~]$ oc describe route
Name:			php-helloworld
Namespace:		philbb-route
Created:		50 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		php-helloworld-philbb-route.apps.eu46.prod.nextcle.com
			   exposed on router default (host apps.eu46.prod.nextcle.com) 50 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.129.2.252:8080
[student@workstation ~]$ curl php-helloworld-${RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! PHP version is 7.2.11
[student@workstation ~]$ dig php-helloworld-philbb-route.apps.eu46.prod.nextcle.com

; <<>> DiG 9.11.13-RedHat-9.11.13-5.el8_2 <<>> php-helloworld-philbb-route.apps.eu46.prod.nextcle.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 38094
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 4, ADDITIONAL: 9

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 4096
; COOKIE: 52d799701ed9b14bc1b735a96228a4ad1f8074cbe64e6638 (good)
;; QUESTION SECTION:
;php-helloworld-philbb-route.apps.eu46.prod.nextcle.com.	IN A

;; ANSWER SECTION:
php-helloworld-philbb-route.apps.eu46.prod.nextcle.com.	5 IN A 161.156.176.179

;; AUTHORITY SECTION:
prod.nextcle.com.	62668	IN	NS	ns-813.awsdns-37.net.
prod.nextcle.com.	62668	IN	NS	ns-1125.awsdns-12.org.
prod.nextcle.com.	62668	IN	NS	ns-1691.awsdns-19.co.uk.
prod.nextcle.com.	62668	IN	NS	ns-308.awsdns-38.com.

;; ADDITIONAL SECTION:
ns-1125.awsdns-12.org.	62797	IN	A	205.251.196.101
ns-1691.awsdns-19.co.uk. 62798	IN	A	205.251.198.155
ns-308.awsdns-38.com.	62797	IN	A	205.251.193.52
ns-813.awsdns-37.net.	62797	IN	A	205.251.195.45
ns-1125.awsdns-12.org.	62797	IN	AAAA	2600:9000:5304:6500::1
ns-1691.awsdns-19.co.uk. 62798	IN	AAAA	2600:9000:5306:9b00::1
ns-308.awsdns-38.com.	62797	IN	AAAA	2600:9000:5301:3400::1
ns-813.awsdns-37.net.	62797	IN	AAAA	2600:9000:5303:2d00::1

;; Query time: 12 msec
;; SERVER: 172.25.250.254#53(172.25.250.254)
;; WHEN: Wed Mar 09 07:59:25 EST 2022
;; MSG SIZE  rcvd: 440

[student@workstation ~]$ curl php-helloworld-${RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! PHP version is 7.2.11
[student@workstation ~]$ cat ${RHT_OCP4_WILDCARD_DOMAIN}
cat: apps.eu46.prod.nextcle.com: No such file or directory
[student@workstation ~]$ oc delete route/php-helloworld
route.route.openshift.io "php-helloworld" deleted
[student@workstation ~]$ oc expose svc/php-helloworlds --name=${RHT_OCP4_DEV_USER}-xyz
Error from server (NotFound): services "php-helloworlds" not found
[student@workstation ~]$ oc status
In project philbb-route on server https://api.eu46.prod.nextcle.com:6443

svc/php-helloworld - 172.30.138.217:8080
  deployment/php-helloworld deploys istag/php-helloworld:latest 
    deployment #2 running for 13 minutes - 1 pod
    deployment #1 deployed 13 minutes ago


1 info identified, use 'oc status --suggest' to see details.
[student@workstation ~]$ oc get route
No resources found in philbb-route namespace.
[student@workstation ~]$ oc expose svc/php-helloworld --name=${RHT_OCP4_DEV_USER}-xyz
route.route.openshift.io/philbb-xyz exposed
[student@workstation ~]$ oc describe route
Name:			philbb-xyz
Namespace:		philbb-route
Created:		27 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		philbb-xyz-philbb-route.apps.eu46.prod.nextcle.com
			   exposed on router default (host apps.eu46.prod.nextcle.com) 27 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.129.2.252:8080
[student@workstation ~]$ curl ${RHT_OCP4_DEV_USER}-xyz-${RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! PHP version is 7.2.11
[student@workstation ~]$ lab openshift-routes finish

Completing the Guided Exercise: Exposing a Service as a Route

 · Removing OpenShift project 'philbb-route'...................  SUCCESS
[student@workstation ~]$ oc get is -n openshift
NAME                                            IMAGE REPOSITORY                                                                                                            TAGS                                                     UPDATED
apicast-gateway                                 default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/apicast-gateway                                 2.1.0.GA,2.2.0.GA,2.3.0.GA,2.4.0.GA + 6 more...          3 weeks ago
apicurito-ui                                    default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/apicurito-ui                                    1.2,1.3,1.4,1.5,1.6,1.7                                  3 weeks ago
cli                                             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/cli                                             latest                                                   3 weeks ago
cli-artifacts                                   default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/cli-artifacts                                   latest                                                   3 weeks ago
dotnet                                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/dotnet                                          2.1,2.1-el7,2.1-ubi8,3.1,3.1-el7 + 2 more...             3 weeks ago
dotnet-runtime                                  default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/dotnet-runtime                                  2.1,2.1-el7,2.1-ubi8,3.1,3.1-el7 + 2 more...             3 weeks ago
eap-cd-openshift                                default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/eap-cd-openshift                                12,12.0,13,13.0,14,14.0,15,15.0,16,16.0 + 9 more...      3 weeks ago
eap-cd-runtime-openshift                        default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/eap-cd-runtime-openshift                        18,18.0,19,19.0,20,20.0,latest                           3 weeks ago
fis-java-openshift                              default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fis-java-openshift                              1.0,2.0                                                  3 weeks ago
fis-karaf-openshift                             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fis-karaf-openshift                             1.0,2.0                                                  3 weeks ago
fuse-apicurito-generator                        default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fuse-apicurito-generator                        1.2,1.3,1.4,1.5,1.6,1.7                                  3 weeks ago
fuse7-console                                   default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fuse7-console                                   1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7                          3 weeks ago
fuse7-eap-openshift                             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fuse7-eap-openshift                             1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7                          3 weeks ago
fuse7-java-openshift                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fuse7-java-openshift                            1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7                          3 weeks ago
fuse7-karaf-openshift                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/fuse7-karaf-openshift                           1.0,1.1,1.2,1.3,1.4,1.5,1.7                              3 weeks ago
golang                                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/golang                                          1.13.4-ubi7,1.13.4-ubi8,latest                           3 weeks ago
httpd                                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/httpd                                           2.4,2.4-el7,2.4-el8,latest                               3 weeks ago
installer                                       default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/installer                                       latest                                                   3 weeks ago
installer-artifacts                             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/installer-artifacts                             latest                                                   3 weeks ago
java                                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/java                                            11,8,latest,openjdk-11-el7,openjdk-11-ubi8 + 2 more...   3 weeks ago
jboss-amq-62                                    default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-amq-62                                    1.1,1.2,1.3,1.4,1.5,1.6,1.7                              3 weeks ago
jboss-amq-63                                    default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-amq-63                                    1.0,1.1,1.2,1.3,1.4                                      3 weeks ago
jboss-datagrid65-client-openshift               default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datagrid65-client-openshift               1.0,1.1                                                  3 weeks ago
jboss-datagrid65-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datagrid65-openshift                      1.2,1.3,1.4,1.5,1.6                                      3 weeks ago
jboss-datagrid71-client-openshift               default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datagrid71-client-openshift               1.0                                                      3 weeks ago
jboss-datagrid71-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datagrid71-openshift                      1.0,1.1,1.2,1.3                                          3 weeks ago
jboss-datagrid72-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datagrid72-openshift                      1.0,1.1,1.2                                              3 weeks ago
jboss-datagrid73-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datagrid73-openshift                      1.0,1.1,1.2,1.3,1.4                                      3 weeks ago
jboss-datavirt64-driver-openshift               default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datavirt64-driver-openshift               1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7                          3 weeks ago
jboss-datavirt64-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-datavirt64-openshift                      1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7                          3 weeks ago
jboss-decisionserver64-openshift                default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-decisionserver64-openshift                1.0,1.1,1.2,1.3,1.4,1.5,1.6                              3 weeks ago
jboss-eap64-openshift                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap64-openshift                           1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9 + 1 more...          3 weeks ago
jboss-eap70-openshift                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap70-openshift                           1.3,1.4,1.5,1.6,1.7                                      3 weeks ago
jboss-eap71-openshift                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap71-openshift                           1.1,1.2,1.3,1.4,latest                                   3 weeks ago
jboss-eap72-openjdk11-openshift-rhel8           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap72-openjdk11-openshift-rhel8           1.0,1.1,latest                                           3 weeks ago
jboss-eap72-openshift                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap72-openshift                           1.0,1.1,1.2,latest                                       3 weeks ago
jboss-eap73-openjdk11-openshift                 default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap73-openjdk11-openshift                 7.3,7.3.0,latest                                         3 weeks ago
jboss-eap73-openjdk11-runtime-openshift         default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap73-openjdk11-runtime-openshift         7.3,7.3.0,latest                                         3 weeks ago
jboss-eap73-openshift                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap73-openshift                           7.3,7.3.0,latest                                         3 weeks ago
jboss-eap73-runtime-openshift                   default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-eap73-runtime-openshift                   7.3,7.3.0,latest                                         3 weeks ago
jboss-fuse70-console                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-fuse70-console                            1.0                                                      3 weeks ago
jboss-fuse70-eap-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-fuse70-eap-openshift                      1.0                                                      3 weeks ago
jboss-fuse70-java-openshift                     default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-fuse70-java-openshift                     1.0                                                      3 weeks ago
jboss-fuse70-karaf-openshift                    default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-fuse70-karaf-openshift                    1.0                                                      3 weeks ago
jboss-processserver64-openshift                 default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-processserver64-openshift                 1.0,1.1,1.2,1.3,1.4,1.5,1.6                              3 weeks ago
jboss-webserver31-tomcat7-openshift             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-webserver31-tomcat7-openshift             1.0,1.1,1.2,1.3,1.4                                      3 weeks ago
jboss-webserver31-tomcat8-openshift             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-webserver31-tomcat8-openshift             1.0,1.1,1.2,1.3,1.4                                      3 weeks ago
jboss-webserver53-openjdk11-tomcat9-openshift   default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-webserver53-openjdk11-tomcat9-openshift   1.0,latest                                               3 weeks ago
jboss-webserver53-openjdk8-tomcat9-openshift    default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jboss-webserver53-openjdk8-tomcat9-openshift    1.0,latest                                               3 weeks ago
jenkins                                         default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jenkins                                         2,latest                                                 13 days ago
jenkins-agent-base                              default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jenkins-agent-base                              latest                                                   3 weeks ago
jenkins-agent-maven                             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jenkins-agent-maven                             latest,v4.0                                              3 weeks ago
jenkins-agent-nodejs                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/jenkins-agent-nodejs                            latest,v4.0                                              3 weeks ago
mariadb                                         default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/mariadb                                         10.3,10.3-el7,10.3-el8,latest                            3 weeks ago
mongodb                                         default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/mongodb                                         3.6,latest                                               3 weeks ago
must-gather                                     default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/must-gather                                     latest                                                   3 weeks ago
mysql                                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/mysql                                           8.0,8.0-el7,8.0-el8,latest                               3 weeks ago
nginx                                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/nginx                                           1.14-el8,1.16,1.16-el7,1.16-el8,latest                   3 weeks ago
nodejs                                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/nodejs                                          10,10-ubi7,10-ubi8,12,12-ubi7,12-ubi8 + 1 more...        3 weeks ago
oauth-proxy                                     default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/oauth-proxy                                     v4.4                                                     3 weeks ago
openjdk-11-rhel7                                default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/openjdk-11-rhel7                                1.0,1.1                                                  3 weeks ago
openjdk-11-rhel8                                default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/openjdk-11-rhel8                                1.0                                                      3 weeks ago
perl                                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/perl                                            5.26,5.26-el7,5.26-ubi8,5.30,5.30-el7 + 1 more...        3 weeks ago
php                                             default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/php                                             7.2-ubi8,7.3,7.3-ubi7,7.3-ubi8,latest                    3 weeks ago
postgresql                                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/postgresql                                      10,10-el7,10-el8,12,12-el7,12-el8 + 2 more...            3 weeks ago
python                                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/python                                          2.7,2.7-ubi7,2.7-ubi8,3.6-ubi8,3.8 + 3 more...           3 weeks ago
redhat-openjdk18-openshift                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/redhat-openjdk18-openshift                      1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8                      3 weeks ago
redhat-sso70-openshift                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/redhat-sso70-openshift                          1.3,1.4                                                  3 weeks ago
redhat-sso71-openshift                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/redhat-sso71-openshift                          1.0,1.1,1.2,1.3                                          3 weeks ago
redhat-sso72-openshift                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/redhat-sso72-openshift                          1.0,1.1,1.2,1.3,1.4                                      3 weeks ago
redhat-sso73-openshift                          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/redhat-sso73-openshift                          1.0,latest                                               3 weeks ago
redis                                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/redis                                           5,5-el7,5-el8,latest                                     3 weeks ago
rhdm-decisioncentral-rhel8                      default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/rhdm-decisioncentral-rhel8                      7.8.0                                                    3 weeks ago
rhdm-kieserver-rhel8                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/rhdm-kieserver-rhel8                            7.8.0                                                    3 weeks ago
rhpam-businesscentral-monitoring-rhel8          default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/rhpam-businesscentral-monitoring-rhel8          7.8.0                                                    3 weeks ago
rhpam-businesscentral-rhel8                     default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/rhpam-businesscentral-rhel8                     7.8.0                                                    3 weeks ago
rhpam-kieserver-rhel8                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/rhpam-kieserver-rhel8                           7.8.0                                                    3 weeks ago
rhpam-smartrouter-rhel8                         default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/rhpam-smartrouter-rhel8                         7.8.0                                                    3 weeks ago
ruby                                            default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/ruby                                            2.5,2.5-ubi7,2.5-ubi8,2.6,2.6-ubi7 + 4 more...           3 weeks ago
sso74-openshift-rhel8                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/sso74-openshift-rhel8                           7.4,latest                                               3 weeks ago
tests                                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/tests                                           latest                                                   3 weeks ago
tools                                           default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/tools                                           latest                                                   3 weeks ago
ubi8-openjdk-11                                 default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/ubi8-openjdk-11                                 1.3                                                      3 weeks ago
ubi8-openjdk-8                                  default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/openshift/ubi8-openjdk-8                                  1.3                                                      3 weeks ago
[student@workstation ~]$ oc get builds
Error from server (Forbidden): builds.build.openshift.io is forbidden: User "philbb" cannot list resource "builds" in API group "build.openshift.io" in the namespace "philbb-route"
[student@workstation ~]$ lab openshift-s2i start 

Setting up workstation for the Guided Excercise: Creating a Containerized Application with Source-to-Image

 · Installing the tree command.................................  SUCCESS
 Checking local clone of the applications repository:
 · Folder '/home/student/DO180-apps' is a git repo.............  SUCCESS
 · Git repo '/home/student/DO180-apps' has no pending changes..  SUCCESS
 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'philbb-s2i' project does not exist............  SUCCESS
[student@workstation ~]$ cd ~/DO180-apps/
[student@workstation DO180-apps]$ git checkout master 
Switched to branch 'master'
Your branch is up to date with 'origin/master'.
[student@workstation DO180-apps]$ git checkout -b s2i
Switched to a new branch 's2i'
[student@workstation DO180-apps]$ git push -u origin s2i
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.
fatal: Authentication failed for 'https://github.com/lmatouse/DO180-apps/'
[student@workstation DO180-apps]$ git push -u origin s2i
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Branch 's2i' set up to track remote branch 's2i' from 'origin'.
Everything up-to-date
[student@workstation DO180-apps]$ cat php-helloworld/index.php 
<?php
print "Hello, World! php version is " . PHP_VERSION . "\n";
?>
[student@workstation DO180-apps]$ source /usr/local/etc/ocp4.config 
[student@workstation DO180-apps]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation DO180-apps]$ oc new-project ${RHT_OCP4_DEV_USER}-s2i
Now using project "philbb-s2i" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation DO180-apps]$ oc new-app php:7.3 --name=php-helloworld https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-aaps#s2i --context-dir php-helloworld
error: git ls-remote failed with: remote: Repository not found.
fatal: repository 'https://github.com/lmatouse/DO180-aaps/' not found;  local file access failed with: stat https://github.com/lmatouse/DO180-aaps#s2i: no such file or directory
error: unable to locate any images in image streams, templates loaded in accessible projects, template files, local docker images with name "https://github.com/lmatouse/DO180-aaps#s2i"

Argument 'https://github.com/lmatouse/DO180-aaps#s2i' was classified as an image, image~source, or loaded template reference.

The 'oc new-app' command will match arguments to the following types:

  1. Images tagged into image streams in the current project or the 'openshift' project
     - if you don't specify a tag, we'll add ':latest'
  2. Images in the Docker Hub, on remote registries, or on the local Docker engine
  3. Templates in the current project or the 'openshift' project
  4. Git repository URLs or local paths that point to Git repositories

--allow-missing-images can be used to point to an image that does not exist yet.

See 'oc new-app -h' for examples.
[student@workstation DO180-apps]$ oc new-app php:7.3 --name=php-helloworld https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#s2i --context-dir php-helloworld
--> Found image 3c854e5 (5 weeks old) in image stream "openshift/php" under tag "7.3" for "php:7.3"

    Apache 2.4 with PHP 7.3 
    ----------------------- 
    PHP 7.3 available as container is a base platform for building and running various PHP 7.3 applications and frameworks. PHP is an HTML-embedded scripting language. PHP attempts to make it easy for developers to write dynamically generated web pages. PHP also offers built-in database integration for several commercial and non-commercial database management systems, so writing a database-enabled webpage with PHP is fairly simple. The most common use of PHP coding is probably as a replacement for CGI scripts.

    Tags: builder, php, php73, rh-php73

    * The source repository appears to match: php
    * A source build using source code from https://github.com/lmatouse/DO180-apps#s2i will be created
      * The resulting image will be pushed to image stream tag "php-helloworld:latest"
      * Use 'oc start-build' to trigger a new build

--> Creating resources ...
    imagestream.image.openshift.io "php-helloworld" created
    buildconfig.build.openshift.io "php-helloworld" created
    deployment.apps "php-helloworld" created
    service "php-helloworld" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/php-helloworld' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/php-helloworld' 
    Run 'oc status' to view your app.
[student@workstation DO180-apps]$ oc get pods
NAME                     READY   STATUS    RESTARTS   AGE
php-helloworld-1-build   1/1     Running   0          8s
[student@workstation DO180-apps]$ oc logs --all-containers -f php-helloworld-1-build
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:97cf4b68a17398cbe0911461e2866204fcd66c3774785f80af2b4d0eaa5b88cd
Copying blob sha256:f15ada16b67177f40249f31517db7fe4488a3f05e602a7b6f7402de6d853b9a3
Copying blob sha256:771ccdfd650727b418599ec759353ae8bb2a36d80cf5b72bd021aa9ae1dc1eea
Copying blob sha256:1cd88f0a187e2d8a2bf14bf492d94652e702e4f3db8c9e54fd3c35db8737f82c
Copying blob sha256:3a4f63a9dc197ae48cddc08a53e02748a45d7847767f837b8cc7b1c0b93f9411
Warning: Pull failed, retrying in 5s ...
Getting image source signatures
Copying blob sha256:1cd88f0a187e2d8a2bf14bf492d94652e702e4f3db8c9e54fd3c35db8737f82c
Copying blob sha256:97cf4b68a17398cbe0911461e2866204fcd66c3774785f80af2b4d0eaa5b88cd
Copying blob sha256:f15ada16b67177f40249f31517db7fe4488a3f05e602a7b6f7402de6d853b9a3
Copying blob sha256:3a4f63a9dc197ae48cddc08a53e02748a45d7847767f837b8cc7b1c0b93f9411
Copying blob sha256:771ccdfd650727b418599ec759353ae8bb2a36d80cf5b72bd021aa9ae1dc1eea
Copying config sha256:3c854e5c9c7a99052394719a20061fdc87b87227732f6453e08e649f183d0a3e
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:ab2cbed79ec58eef9ee5f7ca644cffc28ac0555fe468adb80bd6e6c975ad86da
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:ab2cbed79ec58eef9ee5f7ca644cffc28ac0555fe468adb80bd6e6c975ad86da
STEP 2: LABEL "io.openshift.build.source-context-dir"="php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:ab2cbed79ec58eef9ee5f7ca644cffc28ac0555fe468adb80bd6e6c975ad86da"       "io.openshift.build.commit.author"="Jordi Sola <someth2say@gmail.com>"       "io.openshift.build.commit.date"="Fri Oct 4 13:04:03 2019 +0200"       "io.openshift.build.commit.id"="f7cd8963ef353d9173c3a21dcccf402f3616840b"       "io.openshift.build.commit.ref"="s2i"       "io.openshift.build.commit.message"="Initial commit, including all apps previously in course"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"
STEP 3: ENV OPENSHIFT_BUILD_NAME="php-helloworld-1"     OPENSHIFT_BUILD_NAMESPACE="philbb-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="s2i"     OPENSHIFT_BUILD_COMMIT="f7cd8963ef353d9173c3a21dcccf402f3616840b"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-09T13:39:04Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-09T13:39:04Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-09T13:39:05Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-09T13:39:05Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all apps previously in course)
	Author:	Jordi Sola <someth2say@gmail.com>
	Date:	Fri Oct 4 13:04:03 2019 +0200
---> 13:39:05     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/philbb-s2i/php-helloworld-1:e790b339
Getting image source signatures
Copying blob sha256:d9862ecc000249411677fa7578720eb7ffb04ccbc196f955c534ae774d7d5f8f
Copying blob sha256:66af4174421c064eab02a61d86aef5b7703f0481fc2e33e7ac5ebddab8d2ed32
Copying blob sha256:436964b8b0703231a2ca156e94f904c62e461f6ff491d960e6044a2744390605
Copying blob sha256:1361d8ae82ac22192bcc8956f5176ae8e983578c8e6f0736e5df7687c3aaf83f
Copying blob sha256:6b4574effff4987195f6bc37ba619105a20a5514c68957dd2befdd92dde066a3
Copying blob sha256:8106a4a1005b9421bd9112a00d8a2c31941a378d519c55208d5911aa8551694f
Copying config sha256:18661dffbde93206564b778e64f1c9d3d6a2d853f39559edae42565923244c58
Writing manifest to image destination
Storing signatures
--> 18661dffbde
18661dffbde93206564b778e64f1c9d3d6a2d853f39559edae42565923244c58

Pushing image image-registry.openshift-image-registry.svc:5000/philbb-s2i/php-helloworld:latest ...
Getting image source signatures
Copying blob sha256:8106a4a1005b9421bd9112a00d8a2c31941a378d519c55208d5911aa8551694f
Copying blob sha256:f15ada16b67177f40249f31517db7fe4488a3f05e602a7b6f7402de6d853b9a3
Copying blob sha256:1cd88f0a187e2d8a2bf14bf492d94652e702e4f3db8c9e54fd3c35db8737f82c
Copying blob sha256:3a4f63a9dc197ae48cddc08a53e02748a45d7847767f837b8cc7b1c0b93f9411
Copying blob sha256:97cf4b68a17398cbe0911461e2866204fcd66c3774785f80af2b4d0eaa5b88cd
Copying blob sha256:771ccdfd650727b418599ec759353ae8bb2a36d80cf5b72bd021aa9ae1dc1eea
Copying config sha256:18661dffbde93206564b778e64f1c9d3d6a2d853f39559edae42565923244c58
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/philbb-s2i/php-helloworld@sha256:0efe5c580790154c99ec3607e02588e2c72688c64fcbf42d81c5584daf733c5a
Push successful
[student@workstation DO180-apps]$ 
[student@workstation DO180-apps]$ oc describe deployment/php-helloworld
Name:                   php-helloworld
Namespace:              philbb-s2i
CreationTimestamp:      Wed, 09 Mar 2022 08:38:22 -0500
Labels:                 app=php-helloworld
                        app.kubernetes.io/component=php-helloworld
                        app.kubernetes.io/instance=php-helloworld
Annotations:            deployment.kubernetes.io/revision: 2
                        image.openshift.io/triggers:
                          [{"from":{"kind":"ImageStreamTag","name":"php-helloworld:latest"},"fieldPath":"spec.template.spec.containers[?(@.name==\"php-helloworld\")...
                        openshift.io/generated-by: OpenShiftNewApp
Selector:               deployment=php-helloworld
Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:       deployment=php-helloworld
  Annotations:  openshift.io/generated-by: OpenShiftNewApp
  Containers:
   php-helloworld:
    Image:        image-registry.openshift-image-registry.svc:5000/philbb-s2i/php-helloworld@sha256:0efe5c580790154c99ec3607e02588e2c72688c64fcbf42d81c5584daf733c5a
    Ports:        8080/TCP, 8443/TCP
    Host Ports:   0/TCP, 0/TCP
    Environment:  <none>
    Mounts:       <none>
  Volumes:        <none>
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  <none>
NewReplicaSet:   php-helloworld-7cc88744f8 (1/1 replicas created)
Events:
  Type    Reason             Age    From                   Message
  ----    ------             ----   ----                   -------
  Normal  ScalingReplicaSet  2m24s  deployment-controller  Scaled up replica set php-helloworld-7595dffb9d to 1
  Normal  ScalingReplicaSet  99s    deployment-controller  Scaled up replica set php-helloworld-7cc88744f8 to 1
  Normal  ScalingReplicaSet  96s    deployment-controller  Scaled down replica set php-helloworld-7595dffb9d to 0
[student@workstation DO180-apps]$ oc expose service php-helloworld --name ${RHT_OCP4_DEV_USER}-helloworld
route.route.openshift.io/philbb-helloworld exposed
[student@workstation DO180-apps]$ oc get route -o jsonpath=='{..spec.host}{"\n"}'
=philbb-helloworld-philbb-s2i.apps.eu46.prod.nextcle.com
[student@workstation DO180-apps]$ curls -s ${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.${RHT_OCP4_WILDCARD_DOMAIN}
bash: curls: command not found...
Similar command is: 'curl'
[student@workstation DO180-apps]$ curl -s ${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! php version is 7.3.29
[student@workstation DO180-apps]$ cd ~/DO180-apps/php-helloworld/
[student@workstation php-helloworld]$ vim index.php 
[student@workstation php-helloworld]$ git add .
[student@workstation php-helloworld]$ git status
On branch s2i
Your branch is up to date with 'origin/s2i'.

Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   index.php

[student@workstation php-helloworld]$ git commit -m 'Changed index page contents.'
[s2i edc12a3] Changed index page contents.
 1 file changed, 1 insertion(+)
[student@workstation php-helloworld]$ git push origin s2i
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 417 bytes | 417.00 KiB/s, done.
Total 4 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/lmatouse/DO180-apps
   f7cd896..edc12a3  s2i -> s2i
[student@workstation php-helloworld]$ oc start-build php-helloworld 
build.build.openshift.io/php-helloworld-2 started
[student@workstation php-helloworld]$ oc logs php-helloworld-2-build -f
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:f15ada16b67177f40249f31517db7fe4488a3f05e602a7b6f7402de6d853b9a3
Copying blob sha256:1cd88f0a187e2d8a2bf14bf492d94652e702e4f3db8c9e54fd3c35db8737f82c
Copying blob sha256:97cf4b68a17398cbe0911461e2866204fcd66c3774785f80af2b4d0eaa5b88cd
Copying blob sha256:3a4f63a9dc197ae48cddc08a53e02748a45d7847767f837b8cc7b1c0b93f9411
Copying blob sha256:771ccdfd650727b418599ec759353ae8bb2a36d80cf5b72bd021aa9ae1dc1eea
Copying config sha256:3c854e5c9c7a99052394719a20061fdc87b87227732f6453e08e649f183d0a3e
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:ab2cbed79ec58eef9ee5f7ca644cffc28ac0555fe468adb80bd6e6c975ad86da
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:ab2cbed79ec58eef9ee5f7ca644cffc28ac0555fe468adb80bd6e6c975ad86da
STEP 2: LABEL "io.openshift.build.commit.message"="Changed index page contents."       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"       "io.openshift.build.source-context-dir"="php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:ab2cbed79ec58eef9ee5f7ca644cffc28ac0555fe468adb80bd6e6c975ad86da"       "io.openshift.build.commit.author"="Student User <student@workstation.lab.example.com>"       "io.openshift.build.commit.date"="Wed Mar 9 10:12:26 2022 -0500"       "io.openshift.build.commit.id"="edc12a358531b01cb73ce2c523b3458b9affda1f"       "io.openshift.build.commit.ref"="s2i"
STEP 3: ENV OPENSHIFT_BUILD_NAME="php-helloworld-2"     OPENSHIFT_BUILD_NAMESPACE="philbb-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="s2i"     OPENSHIFT_BUILD_COMMIT="edc12a358531b01cb73ce2c523b3458b9affda1f"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-09T15:13:43Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-09T15:13:43Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-09T15:13:44Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-09T15:13:44Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 15:13:44     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/philbb-s2i/php-helloworld-2:35b192c1
Getting image source signatures
Copying blob sha256:d9862ecc000249411677fa7578720eb7ffb04ccbc196f955c534ae774d7d5f8f
Copying blob sha256:66af4174421c064eab02a61d86aef5b7703f0481fc2e33e7ac5ebddab8d2ed32
Copying blob sha256:436964b8b0703231a2ca156e94f904c62e461f6ff491d960e6044a2744390605
Copying blob sha256:1361d8ae82ac22192bcc8956f5176ae8e983578c8e6f0736e5df7687c3aaf83f
Copying blob sha256:6b4574effff4987195f6bc37ba619105a20a5514c68957dd2befdd92dde066a3
Copying blob sha256:9337a7387c28f0dbf7fe390c02a3911b5e6d800699c33c10951aa69d7d1d3b11
Copying config sha256:81a426d173fc3fae179dd844c8e625515b844adab41b23fc1ad71ee0835a7db1
Writing manifest to image destination
Storing signatures
--> 81a426d173f
81a426d173fc3fae179dd844c8e625515b844adab41b23fc1ad71ee0835a7db1

Pushing image image-registry.openshift-image-registry.svc:5000/philbb-s2i/php-helloworld:latest ...
Getting image source signatures
Copying blob sha256:97cf4b68a17398cbe0911461e2866204fcd66c3774785f80af2b4d0eaa5b88cd
Copying blob sha256:f15ada16b67177f40249f31517db7fe4488a3f05e602a7b6f7402de6d853b9a3
Copying blob sha256:1cd88f0a187e2d8a2bf14bf492d94652e702e4f3db8c9e54fd3c35db8737f82c
Copying blob sha256:771ccdfd650727b418599ec759353ae8bb2a36d80cf5b72bd021aa9ae1dc1eea
Copying blob sha256:3a4f63a9dc197ae48cddc08a53e02748a45d7847767f837b8cc7b1c0b93f9411
Copying blob sha256:9337a7387c28f0dbf7fe390c02a3911b5e6d800699c33c10951aa69d7d1d3b11
Copying config sha256:81a426d173fc3fae179dd844c8e625515b844adab41b23fc1ad71ee0835a7db1
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/philbb-s2i/php-helloworld@sha256:699a31c5c0e3a42b4113c736e6f093d62208ed863c6d17ea8460e38a2820ec5b
Push successful
[student@workstation php-helloworld]$ oc get pods
NAME                              READY   STATUS      RESTARTS   AGE
php-helloworld-1-build            0/1     Completed   0          98m
php-helloworld-2-build            0/1     Completed   0          3m39s
php-helloworld-75fb68b4d5-wmx89   1/1     Running     0          3m3s
[student@workstation php-helloworld]$ curl -s ${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! php version is 7.3.29
A change is coming!
[student@workstation php-helloworld]$ lab openshift-s2i finish 

Completing the Guided Excercise: Creating a Containerized Application with Source-to-Image

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the 'philbb-s2i' project...........................  SUCCESS
[student@workstation php-helloworld]$ lab openshift-webconsole start 

Setting up workstation for the Guided Exercise: Creating an Application with the Web Console

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'philbb-console' project does not exist........  SUCCESS

[student@workstation php-helloworld]$ cd ~/DO180-apps/
[student@workstation DO180-apps]$ git 
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone      Clone a repository into a new directory
   init       Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add        Add file contents to the index
   mv         Move or rename a file, a directory, or a symlink
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect     Use binary search to find the commit that introduced a bug
   grep       Print lines matching a pattern
   log        Show commit logs
   show       Show various types of objects
   status     Show the working tree status

grow, mark and tweak your common history
   branch     List, create, or delete branches
   checkout   Switch branches or restore working tree files
   commit     Record changes to the repository
   diff       Show changes between commits, commit and working tree, etc
   merge      Join two or more development histories together
   rebase     Reapply commits on top of another base tip
   tag        Create, list, delete or verify a tag object signed with GPG

collaborate (see also: git help workflows)
   fetch      Download objects and refs from another repository
   pull       Fetch from and integrate with another repository or a local branch
   push       Update remote refs along with associated objects

'git help -a' and 'git help -g' list available subcommands and some
concept guides. See 'git help <command>' or 'git help <concept>'
to read about a specific subcommand or concept.
[student@workstation DO180-apps]$ git branch
  master
* s2i
  testbranch
[student@workstation DO180-apps]$ git checkout master 
Switched to branch 'master'
Your branch is up to date with 'origin/master'.
[student@workstation DO180-apps]$ git checkout -b console
Switched to a new branch 'console'
[student@workstation DO180-apps]$ git push -u origin console
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Total 0 (delta 0), reused 0 (delta 0)
remote: 
remote: Create a pull request for 'console' on GitHub by visiting:
remote:      https://github.com/lmatouse/DO180-apps/pull/new/console
remote: 
To https://github.com/lmatouse/DO180-apps
 * [new branch]      console -> console
Branch 'console' set up to track remote branch 'console' from 'origin'.
[student@workstation DO180-apps]$ vim php-helloworld/index.php 
[student@workstation DO180-apps]$ cd
[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ echo $RHT_OCP4_WILDCARD_DOMAIN
apps.eu46.prod.nextcle.com
[student@workstation ~]$ cat /usr/local/etc/ocp4.config
RHT_OCP4_MASTER_API=https://api.eu46.prod.nextcle.com:6443
RHT_OCP4_WILDCARD_DOMAIN=apps.eu46.prod.nextcle.com
RHT_OCP4_NEXUS_SERVER=nexus-common.apps.eu46.prod.nextcle.com
RHT_OCP4_DEV_USER=philbb
RHT_OCP4_DEV_PASSWORD=cb3b1ad14a804986949e
RHT_OCP4_GITHUB_USER=lmatouse
RHT_OCP4_QUAY_USER=lmatouse
[student@workstation ~]$ cd -
/home/student/DO180-apps
[student@workstation DO180-apps]$ vim php-helloworld/index.php 
[student@workstation DO180-apps]$ git tsat
git: 'tsat' is not a git command. See 'git --help'.

The most similar command is
	status
[student@workstation DO180-apps]$ git status 
On branch console
Your branch is up to date with 'origin/console'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   php-helloworld/index.php

no changes added to commit (use "git add" and/or "git commit -a")
[student@workstation DO180-apps]$ git add php-helloworld/index.php 
[student@workstation DO180-apps]$ git commit -m "updated app"
[console d205f12] updated app
 1 file changed, 1 insertion(+)
[student@workstation DO180-apps]$ git push origin console 
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 409 bytes | 409.00 KiB/s, done.
Total 4 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/lmatouse/DO180-apps
   f7cd896..d205f12  console -> console
[student@workstation DO180-apps]$ git checkout master 
Switched to branch 'master'
Your branch is up to date with 'origin/master'.
[student@workstation DO180-apps]$ cd
[student@workstation ~]$ lab openshift-webconsole finish 

Completing the Guided Exercise: Creating an Application with the Web Console

 · Ensure the 'philbb-console' project is deleted .............  SUCCESS

[student@workstation ~]$ lab openshift-review start 

Setting up workstation for the Lab: Deploying Containerized Applications on OpenShift

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'philbb-ocp' project does not exist............  SUCCESS

[student@workstation ~]$ cd -
/home/student/DO180-apps
[student@workstation DO180-apps]$ cd temps/
[student@workstation temps]$ git checkout temps
error: pathspec 'temps' did not match any file(s) known to git.
[student@workstation temps]$ git checkout -b temps
Switched to a new branch 'temps'
[student@workstation temps]$ git push origin temps 
Total 0 (delta 0), reused 0 (delta 0)
remote: 
remote: Create a pull request for 'temps' on GitHub by visiting:
remote:      https://github.com/lmatouse/DO180-apps/pull/new/temps
remote: 
To https://github.com/lmatouse/DO180-apps
 * [new branch]      temps -> temps
[student@workstation temps]$ 
[student@workstation temps]$ ls
index.php
[student@workstation temps]$ cd
[student@workstation ~]$ lab openshift-review grade

Grading the student's work for the Lab: Deploying Containerized Applications on OpenShift

 · Log in on OpenShift.........................................  SUCCESS
Accessing the web application..................................  PASS
[student@workstation ~]$ lab openshift-review finish

Completing the Lab: Deploying Containerized Applications on OpenShift

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the philbb-ocp project.............................  SUCCESS
[student@workstation ~]$ lab multicontainer-design start 

Setting up workstation for the Guided Exercise: Connecting Web Application and MySQL Container

 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ podmna login registry.redhat.io
bash: podmna: command not found...
Similar command is: 'podman'
[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials...
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ vim DO180/labs/multicontainer-design/deploy/nodejs/Containerfile 
[student@workstation ~]$ ip -br add list | grep eth0
eth0             UP             172.25.250.9/24 fe80::ce7e:d28c:275:24d3/64 
[student@workstation ~]$ print env
bash: print: command not found...
[student@workstation ~]$ printenv
LS_COLORS=rs=0:di=38;5;33:ln=38;5;51:mh=00:pi=40;38;5;11:so=38;5;13:do=38;5;5:bd=48;5;232;38;5;11:cd=48;5;232;38;5;3:or=48;5;232;38;5;9:mi=01;05;37;41:su=48;5;196;38;5;15:sg=48;5;11;38;5;16:ca=48;5;196;38;5;226:tw=48;5;10;38;5;16:ow=48;5;10;38;5;21:st=48;5;21;38;5;15:ex=38;5;40:*.tar=38;5;9:*.tgz=38;5;9:*.arc=38;5;9:*.arj=38;5;9:*.taz=38;5;9:*.lha=38;5;9:*.lz4=38;5;9:*.lzh=38;5;9:*.lzma=38;5;9:*.tlz=38;5;9:*.txz=38;5;9:*.tzo=38;5;9:*.t7z=38;5;9:*.zip=38;5;9:*.z=38;5;9:*.dz=38;5;9:*.gz=38;5;9:*.lrz=38;5;9:*.lz=38;5;9:*.lzo=38;5;9:*.xz=38;5;9:*.zst=38;5;9:*.tzst=38;5;9:*.bz2=38;5;9:*.bz=38;5;9:*.tbz=38;5;9:*.tbz2=38;5;9:*.tz=38;5;9:*.deb=38;5;9:*.rpm=38;5;9:*.jar=38;5;9:*.war=38;5;9:*.ear=38;5;9:*.sar=38;5;9:*.rar=38;5;9:*.alz=38;5;9:*.ace=38;5;9:*.zoo=38;5;9:*.cpio=38;5;9:*.7z=38;5;9:*.rz=38;5;9:*.cab=38;5;9:*.wim=38;5;9:*.swm=38;5;9:*.dwm=38;5;9:*.esd=38;5;9:*.jpg=38;5;13:*.jpeg=38;5;13:*.mjpg=38;5;13:*.mjpeg=38;5;13:*.gif=38;5;13:*.bmp=38;5;13:*.pbm=38;5;13:*.pgm=38;5;13:*.ppm=38;5;13:*.tga=38;5;13:*.xbm=38;5;13:*.xpm=38;5;13:*.tif=38;5;13:*.tiff=38;5;13:*.png=38;5;13:*.svg=38;5;13:*.svgz=38;5;13:*.mng=38;5;13:*.pcx=38;5;13:*.mov=38;5;13:*.mpg=38;5;13:*.mpeg=38;5;13:*.m2v=38;5;13:*.mkv=38;5;13:*.webm=38;5;13:*.ogm=38;5;13:*.mp4=38;5;13:*.m4v=38;5;13:*.mp4v=38;5;13:*.vob=38;5;13:*.qt=38;5;13:*.nuv=38;5;13:*.wmv=38;5;13:*.asf=38;5;13:*.rm=38;5;13:*.rmvb=38;5;13:*.flc=38;5;13:*.avi=38;5;13:*.fli=38;5;13:*.flv=38;5;13:*.gl=38;5;13:*.dl=38;5;13:*.xcf=38;5;13:*.xwd=38;5;13:*.yuv=38;5;13:*.cgm=38;5;13:*.emf=38;5;13:*.ogv=38;5;13:*.ogx=38;5;13:*.aac=38;5;45:*.au=38;5;45:*.flac=38;5;45:*.m4a=38;5;45:*.mid=38;5;45:*.midi=38;5;45:*.mka=38;5;45:*.mp3=38;5;45:*.mpc=38;5;45:*.ogg=38;5;45:*.ra=38;5;45:*.wav=38;5;45:*.oga=38;5;45:*.opus=38;5;45:*.spx=38;5;45:*.xspf=38;5;45:
XDG_MENU_PREFIX=gnome-
LANG=en_US.UTF-8
GDM_LANG=en_US.UTF-8
HISTCONTROL=ignoredups
DISPLAY=:1
HOSTNAME=workstation.lab.example.com
OLDPWD=/home/student/DO180-apps/temps
COLORTERM=truecolor
USERNAME=student
XDG_VTNR=2
XDG_SESSION_ID=2
USER=student
DESKTOP_SESSION=gnome
GNOME_TERMINAL_SCREEN=/org/gnome/Terminal/screen/23daacf2_1b70_4fda_a5ff_23610a75d063
PWD=/home/student
HOME=/home/student
XDG_SESSION_TYPE=x11
XDG_DATA_DIRS=/home/student/.local/share/flatpak/exports/share/:/var/lib/flatpak/exports/share/:/usr/local/share/:/usr/share/
XDG_SESSION_DESKTOP=gnome
GJS_DEBUG_OUTPUT=stderr
MAIL=/var/spool/mail/student
WINDOWPATH=2
VTE_VERSION=5202
SHELL=/bin/bash
TERM=xterm-256color
QT_IM_MODULE=ibus
XMODIFIERS=@im=ibus
XDG_CURRENT_DESKTOP=GNOME
GNOME_TERMINAL_SERVICE=:1.78
XDG_SEAT=seat0
SHLVL=2
GDK_BACKEND=x11
GDMSESSION=gnome
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
LOGNAME=student
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
XDG_RUNTIME_DIR=/run/user/1000
XAUTHORITY=/run/user/1000/gdm/Xauthority
PATH=/home/student/.local/bin:/home/student/bin:/home/student/.local/bin:/home/student/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin
HISTSIZE=1000
GJS_DEBUG_TOPICS=JS ERROR;JS LOG
SESSION_MANAGER=local/unix:@/tmp/.ICE-unix/2474,unix/unix:/tmp/.ICE-unix/2474
LESSOPEN=||/usr/bin/lesspipe.sh %s
_=/usr/bin/printenv
[student@workstation ~]$ vim DO180/labs/multicontainer-design/deploy/nodejs/nodejs-source/models/db.js 
[student@workstation ~]$ cd DO180/labs/multicontainer-design/deploy/nodejs/
[student@workstation nodejs]$ ./build.sh 
Preparing build folder
STEP 1: FROM registry.redhat.io/rhel8/nodejs-12:1
Getting image source signatures
Copying blob 0d875a68bf99 done
Copying blob 5f29c45159ac done
Copying blob 276bf8f1ed0e done
Copying blob 8dfe9326f733 done
Copying blob 950c796b5dbc done
Copying config d7de9623c0 done
Writing manifest to image destination
Storing signatures
STEP 2: ARG NEXUS_BASE_URL
STEP 3: MAINTAINER username <username@example.com>
STEP 4: COPY run.sh build ${HOME}/
STEP 5: RUN npm install --registry=http://$NEXUS_BASE_URL/repository/nodejs/
npm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau
npm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
npm WARN deprecated sequelize@5.21.1: Please update to v6 or higher! A migration guide can be found here: https://sequelize.org/v6/manual/upgrade-to-v6.html

> dtrace-provider@0.8.8 install /opt/app-root/src/node_modules/dtrace-provider
> node-gyp rebuild || node suppress-error.js

make: Entering directory '/opt/app-root/src/node_modules/dtrace-provider/build'
  TOUCH Release/obj.target/DTraceProviderStub.stamp
make: Leaving directory '/opt/app-root/src/node_modules/dtrace-provider/build'
npm notice created a lockfile as package-lock.json. You should commit this file.
added 144 packages from 259 contributors in 12.992s

8 packages are looking for funding
  run `npm fund` for details

STEP 6: EXPOSE	30080
STEP 7: CMD	["./run.sh"]
STEP 8: COMMIT do180/todonodejs
Getting image source signatures
Copying blob 7699752e6ed6 skipped: already exists
Copying blob c8013a2772b6 skipped: already exists
Copying blob 346bf184426f skipped: already exists
Copying blob 7a779d8c9ee3 skipped: already exists
Copying blob 030bb98c47cc skipped: already exists
Copying blob a65c196f84a0 done
Copying config 10ff8393d1 done
Writing manifest to image destination
Storing signatures
10ff8393d171e3dc9c45ecd003da7b816050ea90dc08b6567cbeb954d474aab4
[student@workstation nodejs]$ podman image --format "table {{.ID}} {{.Repository}} {{.Tag}}"
Error: unknown flag: --format
[student@workstation nodejs]$ podman images --format "table {{.ID}} {{.Repository}} {{.Tag}}"
IMAGE ID       REPOSITORY                           TAG
10ff8393d171   localhost/do180/todonodejs           latest
d7de9623c0a3   registry.redhat.io/rhel8/nodejs-12   1
[student@workstation nodejs]$ pwd
/home/student/DO180/labs/multicontainer-design/deploy/nodejs
[student@workstation nodejs]$ vim networked/run.sh 
[student@workstation nodejs]$ diff networked/run.sh ~/DO180/solutions/multicontainer-design/deploy/nodejs/networked/run.sh 
13d12
< 
15,17c14,17
< podman run -d --name mysql -e MYSQL_DATABASE=items -e MYSQL_USER=user1 -e \
< 	MYSQL_PASSWORD=mypa55 -e MYSQL_ROOT_PASSWORD=r00tpa55 \
< 	-v $PWD/work/data:/var/lib/mysql/data -p 30306:3306 \
---
> podman run -d --name mysql -e MYSQL_DATABASE=items -e MYSQL_USER=user1 \
> 	-e MYSQL_PASSWORD=mypa55 -e MYSQL_ROOT_PASSWORD=r00tpa55 \
> 	-v $PWD/work/data:/var/lib/mysql/data \
> 	-p 30306:3306 \
18a19,20
> 
> 
23,24c25,27
< 	-e MYSQL_PASSWORD=mypa55 -p 30080:30080 do180/todonodejs
< sleep 9
---
> 	-e MYSQL_PASSWORD=mypa55 \
> 	-p 30080:30080 \
> 	do180/todonodejs
[student@workstation nodejs]$ cd \
> 
[student@workstation ~]$ cd -
/home/student/DO180/labs/multicontainer-design/deploy/nodejs
[student@workstation nodejs]$ cd networked/
[student@workstation networked]$ ./run.sh 
Create database volume...
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Copying blob 0d875a68bf99 skipped: already exists
Copying blob 8dfe9326f733 skipped: already exists
Copying blob 950c796b5dbc skipped: already exists
Copying blob 4974e12a6555 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
ebf8799fe738f29b9e32ca1ab2c992d481665a678fd4a3190e46bd835b49842a
af5823fdec6b016961cad54cdf60647b19c265af2e11d2cf5720a7ce13909a4c
[student@workstation networked]$ podman ps --format="table {{.ID}} {{.Names}} {{.Image}} {{.Status}}"
ID             Names     Image                                 Status
af5823fdec6b   todoapi   localhost/do180/todonodejs:latest     Up 56 seconds ago
ebf8799fe738   mysql     registry.redhat.io/rhel8/mysql-80:1   Up About a minute ago
[student@workstation networked]$ podman ps --format="table {{.ID}} {{.Names}} {{.Image}} {{.Status}}"
ID             Names     Image                                 Status
af5823fdec6b   todoapi   localhost/do180/todonodejs:latest     Up About a minute ago
ebf8799fe738   mysql     registry.redhat.io/rhel8/mysql-80:1   Up About a minute ago
[student@workstation networked]$ mysql -usuer1 -h 172.25.250.9 -p mypa55 -P30306 items < /home/student/DO180/labs/multicontainer-design/deploy/nodejs/networked/db.sql 
mysql  Ver 8.0.17 for Linux on x86_64 (Source distribution)
Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1, TLSv1.1,
                      TLSv1.2, TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}  Value (after reading options)
--------------------------------- ----------------------------------------
auto-rehash                       TRUE
auto-vertical-output              FALSE
bind-address                      (No default value)
binary-as-hex                     FALSE
character-sets-dir                (No default value)
column-type-info                  FALSE
comments                          FALSE
compress                          FALSE
database                          (No default value)
default-character-set             auto
delimiter                         ;
enable-cleartext-plugin           FALSE
vertical                          FALSE
force                             FALSE
histignore                        (No default value)
named-commands                    FALSE
ignore-spaces                     FALSE
init-command                      (No default value)
local-infile                      FALSE
no-beep                           FALSE
host                              172.25.250.9
html                              FALSE
xml                               FALSE
line-numbers                      TRUE
unbuffered                        FALSE
column-names                      TRUE
sigint-ignore                     FALSE
port                              30306
prompt                            mysql> 
quick                             FALSE
raw                               FALSE
reconnect                         FALSE
socket                            (No default value)
server-public-key-path            (No default value)
get-server-public-key             FALSE
ssl-ca                            (No default value)
ssl-capath                        (No default value)
ssl-cert                          (No default value)
ssl-cipher                        (No default value)
ssl-key                           (No default value)
ssl-crl                           (No default value)
ssl-crlpath                       (No default value)
tls-version                       (No default value)
tls-ciphersuites                  (No default value)
table                             FALSE
user                              suer1
safe-updates                      FALSE
i-am-a-dummy                      FALSE
connect-timeout                   0
max-allowed-packet                16777216
net-buffer-length                 16384
select-limit                      1000
max-join-size                     1000000
show-warnings                     FALSE
plugin-dir                        (No default value)
default-auth                      (No default value)
binary-mode                       FALSE
connect-expired-password          FALSE
network-namespace                 (No default value)
[student@workstation networked]$ 
[student@workstation networked]$ mysql -uuser1 -h 172.25.250.9 -pmypa55 -P30306 items < /home/student/DO180/labs/multicontainer-design/deploy/nodejs/networked/db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation networked]$ podman exec -it todoapi env
PATH=/opt/app-root/src/node_modules/.bin/:/opt/app-root/src/.npm-global/bin/:/opt/app-root/src/bin:/opt/app-root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
TERM=xterm
HOSTNAME=
container=oci
NPM_CONFIG_PREFIX=/opt/app-root/src/.npm-global
CNB_STACK_ID=com.redhat.stacks.ubi8-nodejs-12
CNB_USER_ID=1001
APP_ROOT=/opt/app-root
MYSQL_USER=user1
MYSQL_PASSWORD=mypa55
CNB_GROUP_ID=0
HOME=/opt/app-root/src
NODEJS_VER=14
NAME=nodejs
STI_SCRIPTS_URL=image:///usr/libexec/s2i
PLATFORM=el8
MYSQL_DATABASE=items
NODEJS_VERSION=12
NPM_RUN=start
SUMMARY=Platform for building and running Node.js 12 applications
DESCRIPTION=Node.js 12 available as container is a base platform for building and running various Node.js 12 applications and frameworks. Node.js is a platform built on Chrome's JavaScript runtime for easily building fast, scalable network applications. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient, perfect for data-intensive real-time applications that run across distributed devices.
STI_SCRIPTS_PATH=/usr/libexec/s2i
[student@workstation networked]$ curl -w "\n" http://127.0.0.1:30080/todo/api/items/1
{"id":1,"description":"Pick up newspaper","done":false}
[student@workstation networked]$ curl -w "\n" http://127.0.0.1:30080/todo/api/items/2
{"id":2,"description":"Buy groceries","done":true}
[student@workstation networked]$ cd 
[student@workstation ~]$ lab multicontainer-design finish 

Cleaning up the lab for Guided Exercise: Connecting Web Application and MySQL Container

 · Stopping mysql container....................................  SUCCESS
 · Removing mysql container....................................  SUCCESS
 · Stopping todoapi container..................................  SUCCESS
 · Removing todoapi container..................................  SUCCESS
 · Removing registry.redhat.io/rhel8/mysql-80:1 image..........  SUCCESS
 · Removing registry.redhat.io/rhel8/nodejs-12:1 image.........  SUCCESS
 · Removing do180/todonodejs image.............................  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ lab multicontainer-application start 

Setting up workstation for the Guided Exercise: Creating an Application on OpenShift

 · Checking podman configuration...............................  SUCCESS

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensure application project does not exist...................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-application
Now using project "philbb-application" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ vim DO180/labs/multicontainer-application/todo-app.yml 
[student@workstation ~]$ cd DO180/labs/multicontainer-application/
[student@workstation multicontainer-application]$ oc create -f todo-app.yml 
pod/mysql created
pod/todoapi created
service/todoapi created
service/mysql created
persistentvolumeclaim/dbclaim created
[student@workstation multicontainer-application]$ oc get pods -w
NAME      READY   STATUS    RESTARTS   AGE
mysql     1/1     Running   0          13s
todoapi   1/1     Running   0          13s
^C[student@workstation multicontainer-application]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P3006 items < db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)
[student@workstation multicontainer-application]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P3306 items < db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation multicontainer-application]$ oc exp
explain  expose   
[student@workstation multicontainer-application]$ oc expose service todoapi 
route.route.openshift.io/todoapi exposed
[student@workstation multicontainer-application]$ oc status | grep -o "http:.*com"
http://todoapi-philbb-application.apps.eu46.prod.nextcle.com
[student@workstation multicontainer-application]$ curl -w "\n" $(oc status | grep -o "http:.*com")/todo/api/items/1
{"id":1,"description":"Pick up newspaper","done":false}
[student@workstation multicontainer-application]$ curl -w "\n" $(oc status | grep -o "http:.*com")/todo/api/items/2
{"id":2,"description":"Buy groceries","done":true}
[student@workstation multicontainer-application]$ curl -w "\n" $(oc status | grep -o "http:.*com")/todo/api/items/3
{"code":"Internal","message":"Error: Nothing found for key 3"}
[student@workstation multicontainer-application]$ cd
[student@workstation ~]$ lab multicontainer-application finish 

Completing the Guided Exercise: Creating an Application on OpenShift

 · Log in on OpenShift.........................................  SUCCESS
 · Removing philbb-application project.........................  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ source /usr/local/etc/ocp4.config
[student@workstation ~]$  oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc get templates
Error from server (Forbidden): templates.template.openshift.io is forbidden: User "philbb" cannot list resource "templates" in API group "template.openshift.io" in the namespace "default"
[student@workstation ~]$ oc get templates -n openshift
NAME                                                DESCRIPTION                                                                        PARAMETERS        OBJECTS
3scale-gateway                                      3scale's APIcast is an NGINX based API gateway used to integrate your interna...   17 (8 blank)      3
amq63-basic                                         Application template for JBoss A-MQ brokers. These can be deployed as standal...   11 (4 blank)      6
amq63-persistent                                    An example JBoss A-MQ application. For more information about using this temp...   13 (4 blank)      8
amq63-persistent-ssl                                An example JBoss A-MQ application. For more information about using this temp...   18 (6 blank)      12
amq63-ssl                                           An example JBoss A-MQ application. For more information about using this temp...   16 (6 blank)      10
apicurito                                           Design beautiful, functional APIs with zero coding, using a visual designer f...   7 (1 blank)       7
cache-service                                       Red Hat Data Grid is an in-memory, distributed key/value store.                    8 (1 blank)       4
cakephp-mysql-example                               An example CakePHP application with a MySQL database. For more information ab...   20 (4 blank)      8
cakephp-mysql-persistent                            An example CakePHP application with a MySQL database. For more information ab...   21 (4 blank)      9
dancer-mysql-example                                An example Dancer application with a MySQL database. For more information abo...   18 (5 blank)      8
dancer-mysql-persistent                             An example Dancer application with a MySQL database. For more information abo...   19 (5 blank)      9
datagrid-service                                    Red Hat Data Grid is an in-memory, distributed key/value store.                    7 (1 blank)       4
datavirt64-basic-s2i                                Application template for JBoss Data Virtualization 6.4 services built using S2I.   20 (6 blank)      6
datavirt64-extensions-support-s2i                   An example JBoss Data Virtualization application. For more information about...    35 (9 blank)      10
datavirt64-ldap-s2i                                 Application template for JBoss Data Virtualization 6.4 services that configur...   21 (6 blank)      6
datavirt64-secure-s2i                               An example JBoss Data Virtualization application. For more information about...    51 (22 blank)     8
decisionserver64-amq-s2i                            An example BRMS decision server A-MQ application. For more information about...    30 (5 blank)      10
decisionserver64-basic-s2i                          Application template for Red Hat JBoss BRMS 6.4 decision server applications...    17 (5 blank)      5
django-psql-example                                 An example Django application with a PostgreSQL database. For more informatio...   19 (5 blank)      8
django-psql-persistent                              An example Django application with a PostgreSQL database. For more informatio...   20 (5 blank)      9
eap-cd-basic-s2i                                    An example JBoss Enterprise Application Platform continuous delivery applicat...   18 (5 blank)      8
eap-cd-starter-s2i                                  An example JBoss Enterprise Application Platform continuous delivery applicat...   14 (3 blank)      7
eap73-basic-s2i                                     An example JBoss Enterprise Application Platform application. For more inform...   20 (5 blank)      8
eap73-https-s2i                                     An example JBoss Enterprise Application Platform application configured with...    30 (11 blank)     10
eap73-sso-s2i                                       An example JBoss Enterprise Application Platform application Single Sign-On a...   49 (20 blank)     10
eap73-third-party-db-s2i                            An example JBoss Enterprise Application Platform application. For more inform...   34 (8 blank)      10
fuse77-console                                      The Red Hat Fuse Console eases the discovery and management of Fuse applicati...   8 (1 blank)       5
httpd-example                                       An example Apache HTTP Server (httpd) application that serves static content....   9 (3 blank)       5
jenkins-ephemeral                                   Jenkins service, without persistent storage....                                    8 (all set)       7
jenkins-ephemeral-monitored                         Jenkins service, without persistent storage. ...                                   9 (all set)       8
jenkins-persistent                                  Jenkins service, with persistent storage....                                       10 (all set)      8
jenkins-persistent-monitored                        Jenkins service, with persistent storage. ...                                      11 (all set)      9
jws31-tomcat7-basic-s2i                             Application template for JWS applications built using S2I.                         12 (3 blank)      5
jws31-tomcat7-https-s2i                             An example JBoss Web Server application configured for use with https. For mo...   17 (5 blank)      7
jws31-tomcat7-mysql-persistent-s2i                  An example JBoss Web Server application with a MySQL database. For more infor...   31 (13 blank)     10
jws31-tomcat7-mysql-s2i                             Application template for JWS MySQL applications built using S2I.                   30 (13 blank)     9
jws31-tomcat7-postgresql-persistent-s2i             An example JBoss Web Server application with a PostgreSQL database. For more...    28 (10 blank)     10
jws31-tomcat7-postgresql-s2i                        Application template for JWS PostgreSQL applications built using S2I.              27 (10 blank)     9
jws31-tomcat8-basic-s2i                             An example JBoss Web Server application. For more information about using thi...   12 (3 blank)      5
jws31-tomcat8-https-s2i                             An example JBoss Web Server application. For more information about using thi...   17 (5 blank)      7
jws31-tomcat8-mysql-persistent-s2i                  An example JBoss Web Server application with a MySQL database. For more infor...   31 (13 blank)     10
jws31-tomcat8-mysql-s2i                             Application template for JWS MySQL applications built using S2I.                   30 (13 blank)     9
jws31-tomcat8-postgresql-persistent-s2i             Application template for JWS PostgreSQL applications with persistent storage...    28 (10 blank)     10
jws53-openjdk11-tomcat9-basic-s2i                   An example JBoss Web Server application. For more information about using thi...   12 (3 blank)      5
jws53-openjdk11-tomcat9-https-s2i                   An example JBoss Web Server application. For more information about using thi...   17 (5 blank)      7
jws53-openjdk11-tomcat9-mysql-persistent-s2i        An example JBoss Web Server application with a MySQL database. For more infor...   31 (13 blank)     10
jws53-openjdk11-tomcat9-mysql-s2i                   Application template for JWS MySQL applications built using S2I.                   30 (13 blank)     9
jws53-openjdk11-tomcat9-postgresql-persistent-s2i   Application template for JWS PostgreSQL applications with persistent storage...    28 (10 blank)     10
jws53-openjdk8-tomcat9-basic-s2i                    An example JBoss Web Server application. For more information about using thi...   12 (3 blank)      5
jws53-openjdk8-tomcat9-https-s2i                    An example JBoss Web Server application. For more information about using thi...   17 (5 blank)      7
jws53-openjdk8-tomcat9-mysql-persistent-s2i         An example JBoss Web Server application with a MySQL database. For more infor...   31 (13 blank)     10
jws53-openjdk8-tomcat9-mysql-s2i                    Application template for JWS MySQL applications built using S2I.                   30 (13 blank)     9
jws53-openjdk8-tomcat9-postgresql-persistent-s2i    Application template for JWS PostgreSQL applications with persistent storage...    28 (10 blank)     10
mariadb-ephemeral                                   MariaDB database service, without persistent storage. For more information ab...   8 (3 generated)   3
mariadb-persistent                                  MariaDB database service, with persistent storage. For more information about...   9 (3 generated)   4
mysql-ephemeral                                     MySQL database service, without persistent storage. For more information abou...   8 (3 generated)   3
mysql-persistent                                    MySQL database service, with persistent storage. For more information about u...   9 (3 generated)   4
nginx-example                                       An example Nginx HTTP server and a reverse proxy (nginx) application that ser...   10 (3 blank)      5
nodejs-mongodb-example                              An example Node.js application with a MongoDB database. For more information...    18 (4 blank)      8
nodejs-postgresql-example                           An example Node.js application with a PostgreSQL database. For more informati...   18 (4 blank)      8
nodejs-postgresql-persistent                        An example Node.js application with a PostgreSQL database. For more informati...   19 (4 blank)      9
openjdk-web-basic-s2i                               An example Java application using OpenJDK. For more information about using t...   9 (1 blank)       5
postgresql-ephemeral                                PostgreSQL database service, without persistent storage. For more information...   7 (2 generated)   3
postgresql-persistent                               PostgreSQL database service, with persistent storage. For more information ab...   8 (2 generated)   4
processserver64-amq-mysql-persistent-s2i            An example BPM Suite application with A-MQ and a MySQL database. For more inf...   49 (13 blank)     14
processserver64-amq-mysql-s2i                       An example BPM Suite application with A-MQ and a MySQL database. For more inf...   47 (13 blank)     12
processserver64-amq-postgresql-persistent-s2i       An example BPM Suite application with A-MQ and a PostgreSQL database. For mor...   46 (10 blank)     14
processserver64-amq-postgresql-s2i                  An example BPM Suite application with A-MQ and a PostgreSQL database. For mor...   44 (10 blank)     12
processserver64-basic-s2i                           An example BPM Suite application. For more information about using this templ...   17 (5 blank)      5
processserver64-externaldb-s2i                      An example BPM Suite application with a external database. For more informati...   47 (22 blank)     7
processserver64-mysql-persistent-s2i                An example BPM Suite application with a MySQL database. For more information...    40 (14 blank)     10
processserver64-mysql-s2i                           An example BPM Suite application with a MySQL database. For more information...    39 (14 blank)     9
processserver64-postgresql-persistent-s2i           An example BPM Suite application with a PostgreSQL database. For more informa...   37 (11 blank)     10
rails-pgsql-persistent                              An example Rails application with a PostgreSQL database. For more information...   21 (4 blank)      9
rails-postgresql-example                            An example Rails application with a PostgreSQL database. For more information...   20 (4 blank)      8
redis-ephemeral                                     Redis in-memory data structure store, without persistent storage. For more in...   5 (1 generated)   3
redis-persistent                                    Redis in-memory data structure store, with persistent storage. For more infor...   6 (1 generated)   4
rhdm78-authoring                                    Application template for a non-HA persistent authoring environment, for Red H...   69 (45 blank)     11
rhdm78-authoring-ha                                 Application template for a HA persistent authoring environment, for Red Hat D...   87 (46 blank)     18
rhdm78-kieserver                                    Application template for a managed KIE Server, for Red Hat Decision Manager 7...   57 (41 blank)     7
rhdm78-prod-immutable-kieserver                     Application template for an immutable KIE server in a production environment,...   62 (44 blank)     9
rhdm78-prod-immutable-kieserver-amq                 Application template for an immutable KIE server in a production environment...    76 (53 blank)     21
rhdm78-trial-ephemeral                              Application template for an ephemeral authoring and testing environment, for...    62 (39 blank)     8
rhpam78-authoring                                   Application template for a non-HA persistent authoring environment, for Red H...   73 (45 blank)     12
rhpam78-authoring-ha                                Application template for a HA persistent authoring environment, for Red Hat P...   96 (46 blank)     21
rhpam78-kieserver-externaldb                        Application template for a managed KIE Server with an external database, for...    79 (58 blank)     9
rhpam78-kieserver-mysql                             Application template for a managed KIE Server with a MySQL database, for Red...    66 (41 blank)     10
rhpam78-kieserver-postgresql                        Application template for a managed KIE Server with a PostgreSQL database, for...   67 (41 blank)     10
rhpam78-managed                                     Application template for a managed HA production runtime environment, for Red...   80 (45 blank)     16
rhpam78-prod                                        Application template for a managed HA production runtime environment, for Red...   95 (54 blank)     31
rhpam78-prod-immutable-kieserver                    Application template for an immutable KIE server in a production environment,...   72 (44 blank)     12
rhpam78-prod-immutable-kieserver-amq                Application template for an immutable KIE server in a production environment...    93 (57 blank)     24
rhpam78-prod-immutable-monitor                      Application template for a router and monitoring console in a production envi...   62 (43 blank)     15
rhpam78-trial-ephemeral                             Application template for an ephemeral authoring and testing environment, for...    62 (39 blank)     8
s2i-fuse77-spring-boot-camel                        Spring Boot and Camel QuickStart. This example demonstrates how you can use A...   17 (3 blank)      3
s2i-fuse77-spring-boot-camel-rest-3scale            Spring Boot, Camel REST DSL and 3Scale QuickStart. This example demonstrates...    18 (3 blank)      5
s2i-fuse77-spring-boot-camel-xml                    Spring Boot and Camel Xml QuickStart. This example demonstrates how you can u...   17 (3 blank)      3
sso72-https                                         An example RH-SSO 7 application. For more information about using this templa...   26 (15 blank)     6
sso72-mysql                                         An example RH-SSO 7 application with a MySQL database. For more information a...   36 (20 blank)     8
sso72-mysql-persistent                              An example RH-SSO 7 application with a MySQL database. For more information a...   37 (20 blank)     9
sso72-postgresql                                    An example RH-SSO 7 application with a PostgreSQL database. For more informat...   33 (17 blank)     8
sso72-postgresql-persistent                         An example RH-SSO 7 application with a PostgreSQL database. For more informat...   34 (17 blank)     9
sso73-https                                         An example application based on RH-SSO 7.3 image. For more information about...    27 (16 blank)     6
sso73-mysql                                         An example application based on RH-SSO 7.3 image. For more information about...    37 (21 blank)     8
sso73-mysql-persistent                              An example application based on RH-SSO 7.3 image. For more information about...    38 (21 blank)     9
sso73-ocp4-x509-https                               An example application based on RH-SSO 7.3 image. For more information about...    13 (7 blank)      5
sso73-ocp4-x509-mysql-persistent                    An example application based on RH-SSO 7.3 image. For more information about...    24 (12 blank)     8
sso73-ocp4-x509-postgresql-persistent               An example application based on RH-SSO 7.3 image. For more information about...    21 (9 blank)      8
sso73-postgresql                                    An example application based on RH-SSO 7.3 image. For more information about...    34 (18 blank)     8
sso73-postgresql-persistent                         An example application based on RH-SSO 7.3 image. For more information about...    35 (18 blank)     9
sso74-https                                         An example application based on RH-SSO 7.4 on OpenJDK image. For more informa...   27 (16 blank)     6
sso74-ocp4-x509-https                               An example application based on RH-SSO 7.4 on OpenJDK image. For more informa...   13 (7 blank)      5
sso74-ocp4-x509-postgresql-persistent               An example application based on RH-SSO 7.4 on OpenJDK image. For more informa...   21 (9 blank)      8
sso74-postgresql                                    An example application based on RH-SSO 7.4 on OpenJDK image. For more informa...   34 (18 blank)     8
sso74-postgresql-persistent                         An example application based on RH-SSO 7.4 on OpenJDK image. For more informa...   35 (18 blank)     9
[student@workstation ~]$ oc get templates mysql-persistent -n openshift -o yaml
apiVersion: template.openshift.io/v1
kind: Template
labels:
  template: mysql-persistent-template
message: |-
  The following service(s) have been created in your project: ${DATABASE_SERVICE_NAME}.

         Username: ${MYSQL_USER}
         Password: ${MYSQL_PASSWORD}
    Database Name: ${MYSQL_DATABASE}
   Connection URL: mysql://${DATABASE_SERVICE_NAME}:3306/

  For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.
metadata:
  annotations:
    description: |-
      MySQL database service, with persistent storage. For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.

      NOTE: Scaling to more than one replica is not supported. You must have persistent volumes available in your cluster to use this template.
    iconClass: icon-mysql-database
    openshift.io/display-name: MySQL
    openshift.io/documentation-url: https://docs.okd.io/latest/using_images/db_images/mysql.html
    openshift.io/long-description: This template provides a standalone MySQL server with a database created.  The database is stored on persistent storage.  The database name, username, and password are chosen via parameters when provisioning this service.
    openshift.io/provider-display-name: Red Hat, Inc.
    openshift.io/support-url: https://access.redhat.com
    samples.operator.openshift.io/version: 4.6.52
    tags: database,mysql
  creationTimestamp: "2022-02-15T15:50:14Z"
  labels:
    samples.operator.openshift.io/managed: "true"
  managedFields:
  - apiVersion: template.openshift.io/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:labels:
        .: {}
        f:template: {}
      f:message: {}
      f:metadata:
        f:annotations:
          .: {}
          f:description: {}
          f:iconClass: {}
          f:openshift.io/display-name: {}
          f:openshift.io/documentation-url: {}
          f:openshift.io/long-description: {}
          f:openshift.io/provider-display-name: {}
          f:openshift.io/support-url: {}
          f:samples.operator.openshift.io/version: {}
          f:tags: {}
        f:labels:
          .: {}
          f:samples.operator.openshift.io/managed: {}
      f:objects: {}
      f:parameters: {}
    manager: cluster-samples-operator
    operation: Update
    time: "2022-02-15T15:50:14Z"
  name: mysql-persistent
  namespace: openshift
  resourceVersion: "15209"
  selfLink: /apis/template.openshift.io/v1/namespaces/openshift/templates/mysql-persistent
  uid: a56167a6-0942-4ca2-90a9-91647007a205
objects:
- apiVersion: v1
  kind: Secret
  metadata:
    annotations:
      template.openshift.io/expose-database_name: '{.data[''database-name'']}'
      template.openshift.io/expose-password: '{.data[''database-password'']}'
      template.openshift.io/expose-root_password: '{.data[''database-root-password'']}'
      template.openshift.io/expose-username: '{.data[''database-user'']}'
    name: ${DATABASE_SERVICE_NAME}
  stringData:
    database-name: ${MYSQL_DATABASE}
    database-password: ${MYSQL_PASSWORD}
    database-root-password: ${MYSQL_ROOT_PASSWORD}
    database-user: ${MYSQL_USER}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      template.openshift.io/expose-uri: mysql://{.spec.clusterIP}:{.spec.ports[?(.name=="mysql")].port}
    name: ${DATABASE_SERVICE_NAME}
  spec:
    ports:
    - name: mysql
      port: 3306
    selector:
      name: ${DATABASE_SERVICE_NAME}
- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: ${DATABASE_SERVICE_NAME}
  spec:
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: ${VOLUME_CAPACITY}
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    annotations:
      template.alpha.openshift.io/wait-for-ready: "true"
    name: ${DATABASE_SERVICE_NAME}
  spec:
    replicas: 1
    selector:
      name: ${DATABASE_SERVICE_NAME}
    strategy:
      type: Recreate
    template:
      metadata:
        labels:
          name: ${DATABASE_SERVICE_NAME}
      spec:
        containers:
        - env:
          - name: MYSQL_USER
            valueFrom:
              secretKeyRef:
                key: database-user
                name: ${DATABASE_SERVICE_NAME}
          - name: MYSQL_PASSWORD
            valueFrom:
              secretKeyRef:
                key: database-password
                name: ${DATABASE_SERVICE_NAME}
          - name: MYSQL_ROOT_PASSWORD
            valueFrom:
              secretKeyRef:
                key: database-root-password
                name: ${DATABASE_SERVICE_NAME}
          - name: MYSQL_DATABASE
            valueFrom:
              secretKeyRef:
                key: database-name
                name: ${DATABASE_SERVICE_NAME}
          image: ' '
          imagePullPolicy: IfNotPresent
          livenessProbe:
            exec:
              command:
              - /bin/sh
              - -i
              - -c
              - MYSQL_PWD="$MYSQL_PASSWORD" mysqladmin -u $MYSQL_USER ping
            initialDelaySeconds: 30
            timeoutSeconds: 1
          name: mysql
          ports:
          - containerPort: 3306
          readinessProbe:
            exec:
              command:
              - /bin/sh
              - -i
              - -c
              - MYSQL_PWD="$MYSQL_PASSWORD" mysqladmin -u $MYSQL_USER ping
            initialDelaySeconds: 5
            timeoutSeconds: 1
          resources:
            limits:
              memory: ${MEMORY_LIMIT}
          volumeMounts:
          - mountPath: /var/lib/mysql/data
            name: ${DATABASE_SERVICE_NAME}-data
        volumes:
        - name: ${DATABASE_SERVICE_NAME}-data
          persistentVolumeClaim:
            claimName: ${DATABASE_SERVICE_NAME}
    triggers:
    - imageChangeParams:
        automatic: true
        containerNames:
        - mysql
        from:
          kind: ImageStreamTag
          name: mysql:${MYSQL_VERSION}
          namespace: ${NAMESPACE}
      type: ImageChange
    - type: ConfigChange
parameters:
- description: Maximum amount of memory the container can use.
  displayName: Memory Limit
  name: MEMORY_LIMIT
  required: true
  value: 512Mi
- description: The OpenShift Namespace where the ImageStream resides.
  displayName: Namespace
  name: NAMESPACE
  value: openshift
- description: The name of the OpenShift Service exposed for the database.
  displayName: Database Service Name
  name: DATABASE_SERVICE_NAME
  required: true
  value: mysql
- description: Username for MySQL user that will be used for accessing the database.
  displayName: MySQL Connection Username
  from: user[A-Z0-9]{3}
  generate: expression
  name: MYSQL_USER
  required: true
- description: Password for the MySQL connection user.
  displayName: MySQL Connection Password
  from: '[a-zA-Z0-9]{16}'
  generate: expression
  name: MYSQL_PASSWORD
  required: true
- description: Password for the MySQL root user.
  displayName: MySQL root user Password
  from: '[a-zA-Z0-9]{16}'
  generate: expression
  name: MYSQL_ROOT_PASSWORD
  required: true
- description: Name of the MySQL database accessed.
  displayName: MySQL Database Name
  name: MYSQL_DATABASE
  required: true
  value: sampledb
- description: Volume space available for data, e.g. 512Mi, 2Gi.
  displayName: Volume Capacity
  name: VOLUME_CAPACITY
  required: true
  value: 1Gi
- description: Version of MySQL image to be used (8.0-el7, 8.0-el8, or latest).
  displayName: Version of MySQL Image
  name: MYSQL_VERSION
  required: true
  value: 8.0-el8
[student@workstation ~]$ oc describe template mysql-persistent -n openshift
Name:		mysql-persistent
Namespace:	openshift
Created:	3 weeks ago
Labels:		samples.operator.openshift.io/managed=true
Description:	MySQL database service, with persistent storage. For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.
		
		NOTE: Scaling to more than one replica is not supported. You must have persistent volumes available in your cluster to use this template.
Annotations:	iconClass=icon-mysql-database
		openshift.io/display-name=MySQL
		openshift.io/documentation-url=https://docs.okd.io/latest/using_images/db_images/mysql.html
		openshift.io/long-description=This template provides a standalone MySQL server with a database created.  The database is stored on persistent storage.  The database name, username, and password are chosen via parameters when provisioning this service.
		openshift.io/provider-display-name=Red Hat, Inc.
		openshift.io/support-url=https://access.redhat.com
		samples.operator.openshift.io/version=4.6.52
		tags=database,mysql

Parameters:		 
    Name:		MEMORY_LIMIT
    Display Name:	Memory Limit
    Description:	Maximum amount of memory the container can use.
    Required:		true
    Value:		512Mi

    Name:		NAMESPACE
    Display Name:	Namespace
    Description:	The OpenShift Namespace where the ImageStream resides.
    Required:		false
    Value:		openshift

    Name:		DATABASE_SERVICE_NAME
    Display Name:	Database Service Name
    Description:	The name of the OpenShift Service exposed for the database.
    Required:		true
    Value:		mysql

    Name:		MYSQL_USER
    Display Name:	MySQL Connection Username
    Description:	Username for MySQL user that will be used for accessing the database.
    Required:		true
    Generated:		expression
    From:		user[A-Z0-9]{3}

    Name:		MYSQL_PASSWORD
    Display Name:	MySQL Connection Password
    Description:	Password for the MySQL connection user.
    Required:		true
    Generated:		expression
    From:		[a-zA-Z0-9]{16}

    Name:		MYSQL_ROOT_PASSWORD
    Display Name:	MySQL root user Password
    Description:	Password for the MySQL root user.
    Required:		true
    Generated:		expression
    From:		[a-zA-Z0-9]{16}

    Name:		MYSQL_DATABASE
    Display Name:	MySQL Database Name
    Description:	Name of the MySQL database accessed.
    Required:		true
    Value:		sampledb

    Name:		VOLUME_CAPACITY
    Display Name:	Volume Capacity
    Description:	Volume space available for data, e.g. 512Mi, 2Gi.
    Required:		true
    Value:		1Gi

    Name:		MYSQL_VERSION
    Display Name:	Version of MySQL Image
    Description:	Version of MySQL image to be used (8.0-el7, 8.0-el8, or latest).
    Required:		true
    Value:		8.0-el8


Object Labels:	template=mysql-persistent-template

Message:	The following service(s) have been created in your project: ${DATABASE_SERVICE_NAME}.
		
		       Username: ${MYSQL_USER}
		       Password: ${MYSQL_PASSWORD}
		  Database Name: ${MYSQL_DATABASE}
		 Connection URL: mysql://${DATABASE_SERVICE_NAME}:3306/
		
		For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.

Objects:			 
    Secret			${DATABASE_SERVICE_NAME}
    Service			${DATABASE_SERVICE_NAME}
    PersistentVolumeClaim	${DATABASE_SERVICE_NAME}
    DeploymentConfig		${DATABASE_SERVICE_NAME}
[student@workstation ~]$ oc process --parameters  mysql-persistent -n openshift
NAME                    DESCRIPTION                                                             GENERATOR           VALUE
MEMORY_LIMIT            Maximum amount of memory the container can use.                                             512Mi
NAMESPACE               The OpenShift Namespace where the ImageStream resides.                                      openshift
DATABASE_SERVICE_NAME   The name of the OpenShift Service exposed for the database.                                 mysql
MYSQL_USER              Username for MySQL user that will be used for accessing the database.   expression          user[A-Z0-9]{3}
MYSQL_PASSWORD          Password for the MySQL connection user.                                 expression          [a-zA-Z0-9]{16}
MYSQL_ROOT_PASSWORD     Password for the MySQL root user.                                       expression          [a-zA-Z0-9]{16}
MYSQL_DATABASE          Name of the MySQL database accessed.                                                        sampledb
VOLUME_CAPACITY         Volume space available for data, e.g. 512Mi, 2Gi.                                           1Gi
MYSQL_VERSION           Version of MySQL image to be used (8.0-el7, 8.0-el8, or latest).                            8.0-el8
[student@workstation ~]$ lab multicontainer-openshift start 

Setting up workstation for the Guided Exercise: Creating an Application with a Template

 · Checking podman configuration...............................  SUCCESS

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensure template project does not exist......................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-template
Now using project "philbb-template" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ vim DO180/labs/multicontainer-openshift/todo-template.json 
[student@workstation ~]$ cd DO180/labs/multicontainer-openshift
[student@workstation multicontainer-openshift]$ oc process -f todo-template.json | oc create -f -
pod/mysql created
pod/todoapi created
service/todoapi created
service/mysql created
persistentvolumeclaim/dbclaim created
[student@workstation multicontainer-openshift]$ vim ~/DO180/labs/multicontainer-openshift/todo-template.json 
[student@workstation multicontainer-openshift]$ oc get pods -w
NAME      READY   STATUS    RESTARTS   AGE
mysql     1/1     Running   0          35s
todoapi   1/1     Running   0          35s
^[[A^C[student@workstation multicontainer-openshift]$ oc get pods 
NAME      READY   STATUS    RESTARTS   AGE
mysql     1/1     Running   0          40s
todoapi   1/1     Running   0          40s
[student@workstation multicontainer-openshift]$ oc get pods -w
NAME      READY   STATUS    RESTARTS   AGE
mysql     1/1     Running   0          43s
todoapi   1/1     Running   0          43s
^C[student@workstation multicontainer-openshift]$ 
[student@workstation multicontainer-openshift]$ oc get pods --help
Display one or many resources

 Prints a table of the most important information about the specified resources. You can filter the list using a label
selector and the --selector flag. If the desired resource type is namespaced you will only see results in your current
namespace unless you pass --all-namespaces.

 Uninitialized objects are not shown unless --include-uninitialized is passed.

 By specifying the output as 'template' and providing a Go template as the value of the --template flag, you can filter
the attributes of the fetched resources.

 Use "oc api-resources" for a complete list of supported resources.

Usage:
  oc get
[(-o|--output=)json|yaml|wide|custom-columns=...|custom-columns-file=...|go-template=...|go-template-file=...|jsonpath=...|jsonpath-file=...]
(TYPE[.VERSION][.GROUP] [NAME | -l label] | TYPE[.VERSION][.GROUP]/NAME ...) [flags]

Examples:
  # List all pods in ps output format.
  oc get pods
  
  # List all pods in ps output format with more information (such as node name).
  oc get pods -o wide
  
  # List a single replication controller with specified NAME in ps output format.
  oc get replicationcontroller web
  
  # List deployments in JSON output format, in the "v1" version of the "apps" API group:
  oc get deployments.v1.apps -o json
  
  # List a single pod in JSON output format.
  oc get -o json pod web-pod-13je7
  
  # List a pod identified by type and name specified in "pod.yaml" in JSON output format.
  oc get -f pod.yaml -o json
  
  # List resources from a directory with kustomization.yaml - e.g. dir/kustomization.yaml.
  oc get -k dir/
  
  # Return only the phase value of the specified pod.
  oc get -o template pod/web-pod-13je7 --template={{.status.phase}}
  
  # List resource information in custom columns.
  oc get pod test-pod -o custom-columns=CONTAINER:.spec.containers[0].name,IMAGE:.spec.containers[0].image
  
  # List all replication controllers and services together in ps output format.
  oc get rc,services
  
  # List one or more resources by their type and names.
  oc get rc/web service/frontend pods/web-pod-13je7

Options:
  -A, --all-namespaces=false: If present, list the requested object(s) across all namespaces. Namespace in current
context is ignored even if specified with --namespace.
      --allow-missing-template-keys=true: If true, ignore any errors in templates when a field or map key is missing in
the template. Only applies to golang and jsonpath output formats.
      --chunk-size=500: Return large lists in chunks rather than all at once. Pass 0 to disable. This flag is beta and
may change in the future.
      --field-selector='': Selector (field query) to filter on, supports '=', '==', and '!='.(e.g. --field-selector
key1=value1,key2=value2). The server only supports a limited number of field queries per type.
  -f, --filename=[]: Filename, directory, or URL to files identifying the resource to get from a server.
      --ignore-not-found=false: If the requested object does not exist the command will return exit code 0.
  -k, --kustomize='': Process the kustomization directory. This flag can't be used together with -f or -R.
  -L, --label-columns=[]: Accepts a comma separated list of labels that are going to be presented as columns. Names are
case-sensitive. You can also use multiple flag options like -L label1 -L label2...
      --no-headers=false: When using the default or custom-column output format, don't print headers (default print
headers).
  -o, --output='': Output format. One of:
json|yaml|wide|name|custom-columns=...|custom-columns-file=...|go-template=...|go-template-file=...|jsonpath=...|jsonpath-file=...
See custom columns [http://kubernetes.io/docs/user-guide/kubectl-overview/#custom-columns], golang template
[http://golang.org/pkg/text/template/#pkg-overview] and jsonpath template
[http://kubernetes.io/docs/user-guide/jsonpath].
      --output-watch-events=false: Output watch event objects when --watch or --watch-only is used. Existing objects are
output as initial ADDED events.
      --raw='': Raw URI to request from the server.  Uses the transport specified by the kubeconfig file.
  -R, --recursive=false: Process the directory used in -f, --filename recursively. Useful when you want to manage
related manifests organized within the same directory.
  -l, --selector='': Selector (label query) to filter on, supports '=', '==', and '!='.(e.g. -l key1=value1,key2=value2)
      --server-print=true: If true, have the server return the appropriate table output. Supports extension APIs and
CRDs.
      --show-kind=false: If present, list the resource type for the requested object(s).
      --show-labels=false: When printing, show all labels as the last column (default hide labels column)
      --sort-by='': If non-empty, sort list types using this field specification.  The field specification is expressed
as a JSONPath expression (e.g. '{.metadata.name}'). The field in the API resource specified by this JSONPath expression
must be an integer or a string.
      --template='': Template string or path to template file to use when -o=go-template, -o=go-template-file. The
template format is golang templates [http://golang.org/pkg/text/template/#pkg-overview].
  -w, --watch=false: After listing/getting the requested object, watch for changes. Uninitialized objects are excluded
if no object name is provided.
      --watch-only=false: Watch for changes to the requested object(s), without listing/getting first.

Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation multicontainer-openshift]$ oc get pods -w
NAME      READY   STATUS    RESTARTS   AGE
mysql     1/1     Running   0          58s
todoapi   1/1     Running   0          58s
^C[student@workstation multicontainer-openshift]$ cat db.sql 
DROP TABLE IF EXISTS `Item`;
CREATE TABLE `Item` (`id` BIGINT not null auto_increment primary key, `description` VARCHAR(100), `done` BIT);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (1,'Pick up newspaper', 0);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (2,'Buy groceries', 1);
[student@workstation multicontainer-openshift]$ mysql -uuser1 -pmypa55 -h 127.0.0.1 -P3306 items < db.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation multicontainer-openshift]$ oc expose service todoapi 
route.route.openshift.io/todoapi exposed
[student@workstation multicontainer-openshift]$ oc status 
In project philbb-template on server https://api.eu46.prod.nextcle.com:6443

svc/mysql - 172.30.62.13:3306
  pod/mysql runs registry.redhat.io/rhel8/mysql-80:1

http://todoapi-philbb-template.apps.eu46.prod.nextcle.com to pod port 30080 (svc/todoapi)
  pod/todoapi runs quay.io/redhattraining/do180-todonodejs-12

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation multicontainer-openshift]$ oc status  | grep -o "http:.*com"
http://todoapi-philbb-template.apps.eu46.prod.nextcle.com
[student@workstation multicontainer-openshift]$ man grep
[student@workstation multicontainer-openshift]$ curl -w "\n" http://todoapi-philbb-template.apps.eu46.prod.nextcle.com/todo/api/items/1
{"id":1,"description":"Pick up newspaper","done":false}
[student@workstation multicontainer-openshift]$ cd
[student@workstation ~]$ lab multicontainer-openshift finish 

Completing the Guided Exercise: Creating an Application with a Template

 · Log in on OpenShift.........................................  SUCCESS
 · Removing philbb-template project............................  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ lab multicontainer-review start 

Setting up workstation for the Lab: Deploying Multi-container Applications

 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
[student@workstation ~]$ cd DO180/labs/multicontainer-review
[student@workstation multicontainer-review]$ source /usr/local/etc/ocp4.config 
[student@workstation multicontainer-review]$  oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation multicontainer-review]$ oc new-project ${RHT_OCP4_DEV_USER}-deploy
Now using project "philbb-deploy" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation multicontainer-review]$ podman build --help
Build an image using instructions from Containerfiles

Description:
  Builds an OCI or Docker image using instructions from one or more Containerfiles and a specified build context directory.

Usage:
  podman build [flags] CONTEXT

Examples:
  podman build .
  podman build --creds=username:password -t imageName -f Containerfile.simple .
  podman build --layers --force-rm --tag imageName .

Flags:
      --add-host host:ip                           add a custom host-to-IP mapping (host:ip) (default [])
      --annotation stringArray                     Set metadata for an image (default [])
      --authfile string                            path of the authentication file.
      --build-arg argument=value                   argument=value to supply to the builder
      --cache-from string                          Images to utilise as potential cache sources. The build process does not currently support caching so this is a NOOP.
      --cap-add strings                            add the specified capability when running (default [])
      --cap-drop strings                           drop the specified capability when running (default [])
      --cert-dir string                            use certificates at the specified path to access the registry
      --cgroup-parent string                       optional parent cgroup for the container
      --cni-plugin-path path                       path of CNI network plugins (default "/usr/libexec/cni:/opt/cni/bin")
      --compress                                   This is legacy option, which has no effect on the image
      --cpu-period uint                            limit the CPU CFS (Completely Fair Scheduler) period
      --cpu-quota int                              limit the CPU CFS (Completely Fair Scheduler) quota
  -c, --cpu-shares uint                            CPU shares (relative weight)
      --cpuset-cpus string                         CPUs in which to allow execution (0-3, 0,1)
      --cpuset-mems string                         memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only effective on NUMA systems.
      --creds [username[:password]]                use [username[:password]] for accessing the registry
      --device stringArray                         Additional devices to be used within containers (default [])
  -D, --disable-compression                        don't compress layers by default (default true)
      --disable-content-trust                      This is a Docker specific option and is a NOOP
      --dns /etc/resolv.conf                       Set custom DNS servers or disable it completely by setting it to 'none', which prevents the automatic creation of /etc/resolv.conf.
      --dns-option strings                         Set custom DNS options
      --dns-search strings                         Set custom DNS search domains
  -f, --file pathname or URL                       pathname or URL of a Dockerfile
      --force-rm                                   Always remove intermediate containers after a build, even if the build is unsuccessful. (default true)
      --format format                              format of the built image's manifest and metadata. Use BUILDAH_FORMAT environment variable to override. (default "oci")
      --http-proxy                                 pass thru HTTP Proxy environment variables (default true)
      --iidfile file                               file to write the image ID to
      --ipc path                                   'container', path of IPC namespace to join, or 'host'
      --isolation type                             type of process isolation to use. Use BUILDAH_ISOLATION environment variable to override. (default "oci")
      --label stringArray                          Set metadata for an image (default [])
      --layers                                     cache intermediate layers during build. Use BUILDAH_LAYERS environment variable to override. (default true)
      --logfile file                               log to file instead of stdout/stderr
      --loglevel int                               adjust logging level (range from -2 to 3)
  -m, --memory string                              memory limit (format: <number>[<unit>], where unit = b, k, m or g)
      --memory-swap string                         swap limit equal to memory plus swap: '-1' to enable unlimited swap
      --network path                               'container', path of network namespace to join, or 'host'
      --no-cache                                   Do not use existing cached images for the container build. Build from the start with a new set of cached layers.
      --pid path                                   container, path of PID namespace to join, or 'host'
      --platform string                            CLI compatibility: no action or effect
      --pull                                       pull the image if not present (default true)
      --pull-always                                pull the image, even if a version is present
  -q, --quiet                                      refrain from announcing build instructions and image read/write progress
      --rm                                         Remove intermediate containers after a successful build (default true)
      --runtime-flag strings                       add global flags for the container runtime
      --security-opt stringArray                   security options (default [])
      --shm-size <number><unit>                    size of '/dev/shm'. The format is <number><unit>. (default "65536k")
      --squash                                     Squash newly built layers into a single new layer.
      --squash-all                                 Squash all layers into a single layer. (default true)
  -t, --tag name                                   tagged name to apply to the built image
      --target string                              set the target build stage to build
      --tls-verify                                 require HTTPS and verify certificates when accessing the registry (default true)
      --ulimit strings                             ulimit options (default [])
      --userns path                                'container', path of user namespace to join, or 'host'
      --userns-gid-map containerID:hostID:length   containerID:hostID:length GID mapping to use in user namespace
      --userns-gid-map-group name                  name of entries from /etc/subgid to use to set user namespace GID mapping
      --userns-uid-map containerID:hostID:length   containerID:hostID:length UID mapping to use in user namespace
      --userns-uid-map-user name                   name of entries from /etc/subuid to use to set user namespace UID mapping
      --uts path                                   container, :path of UTS namespace to join, or 'host'
  -v, --volume strings                             bind mount a volume into the container (default [])

[student@workstation multicontainer-review]$ ls images/
cleanup.sh  mysql  quote-php  README.md
[student@workstation multicontainer-review]$ ls images/mysql/
build.sh  Containerfile  delete.sh  README.md  root  test  test.sh
[student@workstation multicontainer-review]$ cd images/mysql/
[student@workstation mysql]$ podman build -t do180-mysql-80-rhel8 -f Containerfile
STEP 1: FROM registry.redhat.io/rhel8/mysql-80:1
Getting image source signatures
Copying blob 0d875a68bf99 done
Copying blob 4974e12a6555 done
Copying blob 950c796b5dbc done
Copying blob 8dfe9326f733 done
Copying config baf7c77844 done
Writing manifest to image destination
Storing signatures
STEP 2: MAINTAINER username <username@example.com>
c89fd30974a847e42341c87f4661e5b0181929e57fbfd5bf39a24a63a5abc3bd
STEP 3: RUN echo "default_authentication_plugin = mysql_native_password" >> /etc/my.cnf
be3c543a57405d950d408d1e3890588fa844a653eb919917140e44c4a30b8b3b
STEP 4: ADD root /
STEP 5: COMMIT do180-mysql-80-rhel8
89e24d6ad444a8d7d5bd71a59986b92e729aba816b8e060425814be704f73635
[student@workstation mysql]$ podman push --help
Push an image to a specified destination

Description:
  Pushes an image to a specified location.

  The Image "DESTINATION" uses a "transport":"details" format. See podman-push(1) section "DESTINATION" for the expected format.

Usage:
  podman push [flags] IMAGE REGISTRY

Examples:
  podman push imageID docker://registry.example.com/repository:tag
  podman push imageID oci-archive:/path/to/layout:image:tag
  podman push --authfile temp-auths/myauths.json alpine docker://docker.io/myrepo/alpine

Flags:
      --authfile string     Path of the authentication file. Use REGISTRY_AUTH_FILE environment variable to override (default "/run/user/1000/containers/auth.json")
      --cert-dir Pathname   Pathname of a directory containing TLS certificates and keys
      --compress            Compress tarball image layers when pushing to a directory using the 'dir' transport. (default is same compression type as source)
      --creds Credentials   Credentials (USERNAME:PASSWORD) to use for authenticating to a registry
      --digestfile string   After copying the image, write the digest of the resulting image to the file
  -f, --format string       Manifest type (oci, v2s1, or v2s2) to use when pushing an image using the 'dir:' transport (default is manifest type of source)
  -q, --quiet               Don't output progress information when pushing images
      --remove-signatures   Discard any pre-existing signatures in the image
      --sign-by string      Add a signature at the destination using the specified key
      --tls-verify          Require HTTPS and verify certificates when contacting registries (default true)

[student@workstation mysql]$ podman images
REPOSITORY                          TAG      IMAGE ID       CREATED         SIZE
localhost/do180-mysql-80-rhel8      latest   89e24d6ad444   2 minutes ago   626 MB
registry.redhat.io/rhel8/mysql-80   1        baf7c77844e7   13 days ago     626 MB
[student@workstation mysql]$ podman push do180-mysql-80-rhel8 quay.io/lmatouse/do180/
Error: invalid reference format
[student@workstation mysql]$ podman push localhost/do180-mysql-80-rhel8 quay.io/lmatouse/do18o
Getting image source signatures
Copying blob 5b143e22690a done
Copying blob c8013a2772b6 done
Copying blob b9e709962e65 done
Copying blob 7699752e6ed6 done
Copying blob 346bf184426f done
Copying blob 79d541e4fb85 done
Copying config 89e24d6ad4 done
Writing manifest to image destination
Storing signatures
[student@workstation mysql]$ podman login quay.io -u ${RHT_OCP4_QUAY_USER}
Password: 
Login Succeeded!
[student@workstation mysql]$ podman tag do180-mysql-80-rhel8 quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-80-rhel8
[student@workstation mysql]$ podman images
REPOSITORY                              TAG      IMAGE ID       CREATED          SIZE
localhost/do180-mysql-80-rhel8          latest   89e24d6ad444   11 minutes ago   626 MB
quay.io/lmatouse/do180-mysql-80-rhel8   latest   89e24d6ad444   11 minutes ago   626 MB
registry.redhat.io/rhel8/mysql-80       1        baf7c77844e7   13 days ago      626 MB
[student@workstation mysql]$ podman push quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-80-rhel8
Getting image source signatures
Copying blob 346bf184426f done
Copying blob 79d541e4fb85 done
Copying blob b9e709962e65 done
Copying blob 5b143e22690a done
Copying blob c8013a2772b6 done
Copying blob 7699752e6ed6 done
Copying config 89e24d6ad4 done
Writing manifest to image destination
Storing signatures
[student@workstation mysql]$ cd ..
[student@workstation images]$ cd quote-php/
[student@workstation quote-php]$ podman build -t do180-quote-php -f .
Error: error reading "/home/student/DO180/labs/multicontainer-review/images/quote-php/Dockerfile": open /home/student/DO180/labs/multicontainer-review/images/quote-php/Dockerfile: no such file or directory
[student@workstation quote-php]$ ls
build.sh  Containerfile  index.php  quote.sql
[student@workstation quote-php]$ podman build -t do180-quote-php -f Containerfile
STEP 1: FROM registry.access.redhat.com/ubi8/ubi
Getting image source signatures
Copying blob 0d875a68bf99 skipped: already exists
Copying blob 8dfe9326f733 skipped: already exists
Copying config 52de04277b done
Writing manifest to image destination
Storing signatures
STEP 2: RUN yum --disableplugin=subscription-manager -y module enable php:7.2   && yum --disableplugin=subscription-manager -y install httpd php php-mysqlnd   && yum --disableplugin=subscription-manager clean all
Red Hat Universal Base Image 8 (RPMs) - BaseOS  3.0 MB/s | 796 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - AppStre  17 MB/s | 2.7 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeRea 139 kB/s |  16 kB     00:00    
Dependencies resolved.
================================================================================
 Package           Architecture     Version             Repository         Size
================================================================================
Enabling module streams:
 httpd                              2.4                                        
 nginx                              1.14                                       
 php                                7.2                                        

Transaction Summary
================================================================================

Complete!
Last metadata expiration check: 0:00:01 ago on Fri Mar 11 07:36:14 2022.
Dependencies resolved.
==============================================================================================
 Package              Arch    Version                                   Repository        Size
==============================================================================================
Installing:
 httpd                x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  1.4 M
 php                  x86_64  7.2.24-1.module+el8.2.0+4601+7c76a223     ubi-8-appstream  1.5 M
 php-mysqlnd          x86_64  7.2.24-1.module+el8.2.0+4601+7c76a223     ubi-8-appstream  191 k
Installing dependencies:
 apr                  x86_64  1.6.3-12.el8                              ubi-8-appstream  130 k
 apr-util             x86_64  1.6.1-6.el8                               ubi-8-appstream  105 k
 httpd-filesystem     noarch  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream   40 k
 httpd-tools          x86_64  2.4.37-43.module+el8.5.0+13806+b30d9eec.1 ubi-8-appstream  107 k
 libedit              x86_64  3.1-23.20170329cvs.el8                    ubi-8-baseos     102 k
 mailcap              noarch  2.1.48-3.el8                              ubi-8-baseos      39 k
 mod_http2            x86_64  1.15.7-3.module+el8.4.0+8625+d397f3da     ubi-8-appstream  154 k
 nginx-filesystem     noarch  1:1.14.1-9.module+el8.0.0+4108+af250afe   ubi-8-appstream   24 k
 php-cli              x86_64  7.2.24-1.module+el8.2.0+4601+7c76a223     ubi-8-appstream  3.1 M
 php-common           x86_64  7.2.24-1.module+el8.2.0+4601+7c76a223     ubi-8-appstream  662 k
 php-pdo              x86_64  7.2.24-1.module+el8.2.0+4601+7c76a223     ubi-8-appstream  123 k
 redhat-logos-httpd   noarch  84.5-1.el8                                ubi-8-baseos      29 k
Installing weak dependencies:
 apr-util-bdb         x86_64  1.6.1-6.el8                               ubi-8-appstream   25 k
 apr-util-openssl     x86_64  1.6.1-6.el8                               ubi-8-appstream   27 k
 php-fpm              x86_64  7.2.24-1.module+el8.2.0+4601+7c76a223     ubi-8-appstream  1.6 M

Transaction Summary
==============================================================================================
Install  18 Packages

Total download size: 9.4 M
Installed size: 32 M
Downloading Packages:
(1/18): redhat-logos-httpd-84.5-1.el8.noarch.rp 264 kB/s |  29 kB     00:00    
(2/18): mailcap-2.1.48-3.el8.noarch.rpm         306 kB/s |  39 kB     00:00    
(3/18): libedit-3.1-23.20170329cvs.el8.x86_64.r 668 kB/s | 102 kB     00:00    
(4/18): mod_http2-1.15.7-3.module+el8.4.0+8625+  11 MB/s | 154 kB     00:00    
(5/18): php-common-7.2.24-1.module+el8.2.0+4601  12 MB/s | 662 kB     00:00    
(6/18): php-fpm-7.2.24-1.module+el8.2.0+4601+7c  10 MB/s | 1.6 MB     00:00    
(7/18): apr-util-1.6.1-6.el8.x86_64.rpm         1.4 MB/s | 105 kB     00:00    
(8/18): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 823 kB/s |  27 kB     00:00    
(9/18): php-pdo-7.2.24-1.module+el8.2.0+4601+7c 4.4 MB/s | 123 kB     00:00    
(10/18): nginx-filesystem-1.14.1-9.module+el8.0 743 kB/s |  24 kB     00:00    
(11/18): apr-util-bdb-1.6.1-6.el8.x86_64.rpm    986 kB/s |  25 kB     00:00    
(12/18): php-mysqlnd-7.2.24-1.module+el8.2.0+46 3.8 MB/s | 191 kB     00:00    
(13/18): httpd-tools-2.4.37-43.module+el8.5.0+1 3.6 MB/s | 107 kB     00:00    
(14/18): apr-1.6.3-12.el8.x86_64.rpm            5.3 MB/s | 130 kB     00:00    
(15/18): php-cli-7.2.24-1.module+el8.2.0+4601+7 7.4 MB/s | 3.1 MB     00:00    
(16/18): httpd-filesystem-2.4.37-43.module+el8. 326 kB/s |  40 kB     00:00    
(17/18): php-7.2.24-1.module+el8.2.0+4601+7c76a 6.0 MB/s | 1.5 MB     00:00    
(18/18): httpd-2.4.37-43.module+el8.5.0+13806+b  13 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            14 MB/s | 9.4 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : php-common-7.2.24-1.module+el8.2.0+4601+7c76a223.x    1/18 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    2/18 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3    2/18 
  Installing       : apr-1.6.3-12.el8.x86_64                               3/18 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               3/18 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   4/18 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       5/18 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           6/18 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           6/18 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee    7/18 
  Installing       : php-pdo-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_    8/18 
  Running scriptlet: nginx-filesystem-1:1.14.1-9.module+el8.0.0+4108+af    9/18 
  Installing       : nginx-filesystem-1:1.14.1-9.module+el8.0.0+4108+af    9/18 
  Installing       : php-fpm-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_   10/18 
  Running scriptlet: php-fpm-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_   10/18 
  Installing       : mailcap-2.1.48-3.el8.noarch                          11/18 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                 12/18 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   13/18 
  Installing       : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   14/18 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   14/18 
  Installing       : libedit-3.1-23.20170329cvs.el8.x86_64                15/18 
  Installing       : php-cli-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_   16/18 
  Installing       : php-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64     17/18 
  Installing       : php-mysqlnd-7.2.24-1.module+el8.2.0+4601+7c76a223.   18/18 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   18/18 
  Running scriptlet: php-mysqlnd-7.2.24-1.module+el8.2.0+4601+7c76a223.   18/18 
  Running scriptlet: php-fpm-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_   18/18 
  Verifying        : libedit-3.1-23.20170329cvs.el8.x86_64                 1/18 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  2/18 
  Verifying        : mailcap-2.1.48-3.el8.noarch                           3/18 
  Verifying        : php-fpm-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_    4/18 
  Verifying        : php-cli-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_    5/18 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    6/18 
  Verifying        : php-common-7.2.24-1.module+el8.2.0+4601+7c76a223.x    7/18 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           8/18 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   9/18 
  Verifying        : php-pdo-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_   10/18 
  Verifying        : nginx-filesystem-1:1.14.1-9.module+el8.0.0+4108+af   11/18 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                      12/18 
  Verifying        : php-mysqlnd-7.2.24-1.module+el8.2.0+4601+7c76a223.   13/18 
  Verifying        : php-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64     14/18 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9ee   15/18 
  Verifying        : apr-1.6.3-12.el8.x86_64                              16/18 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b3   17/18 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x8   18/18 
Installed products updated.

Installed:
  apr-1.6.3-12.el8.x86_64                                                       
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  httpd-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                        
  httpd-filesystem-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+13806+b30d9eec.1.x86_64                  
  libedit-3.1-23.20170329cvs.el8.x86_64                                         
  mailcap-2.1.48-3.el8.noarch                                                   
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  nginx-filesystem-1:1.14.1-9.module+el8.0.0+4108+af250afe.noarch               
  php-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64                              
  php-cli-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64                          
  php-common-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64                       
  php-fpm-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64                          
  php-mysqlnd-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64                      
  php-pdo-7.2.24-1.module+el8.2.0+4601+7c76a223.x86_64                          
  redhat-logos-httpd-84.5-1.el8.noarch                                          

Complete!
25 files removed
3fe82e4b71facd10667f7bd16bc78b6ba29ca2fbbbaabafa1b89e81fa0d1f0d4
STEP 3: ADD index.php /var/www/html
38f9b0e57942064b4829db1426347b0a59a8094d03945fbcf4eb86dcb5b5cd80
STEP 4: RUN sed -i 's/Listen 80/Listen 8080/' /etc/httpd/conf/httpd.conf   && sed -i 's/variables_order = "GPCS"/variables_order = "EGPCS"/' /etc/php.ini   && sed -i 's/;clear_env/clear_env/' /etc/php-fpm.d/www.conf    && mkdir /run/php-fpm   && chgrp -R 0 /var/log/httpd /var/run/httpd /run/php-fpm   && chmod -R g=u /var/log/httpd /var/run/httpd /run/php-fpm
dd17c47465396d25b2caca8f10f0c8bb77f36f342eb3fdcbdf21b3af3510e81e
STEP 5: EXPOSE 8080
75fcf5f411db7602be826dd89ac371e4fae1bc4b98db3c275c3d878b98930643
STEP 6: USER 1001
dee463d40a854b113e986284638176400399da0dbf12a901415eb46ea12f56da
STEP 7: CMD php-fpm & httpd -D FOREGROUND
STEP 8: COMMIT do180-quote-php
65e7cc11686dfa3ae5746b80ab8bfca63882c0016939c077673a5376bfb46fd9
[student@workstation quote-php]$ podman tag do180-quote-php quay.io/${RHT_OCP4_QUAY_USER}/do180-quote-php
[student@workstation quote-php]$ podman push quay.io/${RHT_OCP4_QUAY_USER}/do180-quote-php
Getting image source signatures
Copying blob 0dfbda456315 done
Copying blob 32463a13fc45 done
Copying blob 56324eade503 done
Copying blob c8013a2772b6 skipped: already exists
Copying blob 7699752e6ed6 skipped: already exists
Error: Error copying image to the remote destination: Error writing blob: Error initiating layer upload to /v2/lmatouse/do180-quote-php/blobs/uploads/ in quay.io: unauthorized: access to the requested resource is not authorized
[student@workstation quote-php]$ podman login quay.io -u ${RHT_OCP4_QUAY_USER}
Password: 
Login Succeeded!
[student@workstation quote-php]$ podman images
REPOSITORY                              TAG      IMAGE ID       CREATED              SIZE
localhost/do180-quote-php               latest   65e7cc11686d   About a minute ago   285 MB
quay.io/lmatouse/do180-quote-php        latest   65e7cc11686d   About a minute ago   285 MB
localhost/do180-mysql-80-rhel8          latest   89e24d6ad444   16 minutes ago       626 MB
quay.io/lmatouse/do180-mysql-80-rhel8   latest   89e24d6ad444   16 minutes ago       626 MB
registry.redhat.io/rhel8/mysql-80       1        baf7c77844e7   13 days ago          626 MB
registry.access.redhat.com/ubi8/ubi     latest   52de04277b39   13 days ago          235 MB
[student@workstation quote-php]$ podman push quay.io/${RHT_OCP4_QUAY_USER}/do180-quote-php
Getting image source signatures
Copying blob 0dfbda456315 done
Copying blob 32463a13fc45 done
Copying blob 56324eade503 done
Copying blob c8013a2772b6 skipped: already exists
Copying blob 7699752e6ed6 skipped: already exists
Copying config 65e7cc1168 done
Writing manifest to image destination
Storing signatures
[student@workstation quote-php]$ cd ..
[student@workstation images]$ cd ..
[student@workstation multicontainer-review]$ vim quote-php-template.json 
[student@workstation multicontainer-review]$ oc create -f quote-php-template.json 
template.template.openshift.io/quote-php-persistent created
[student@workstation multicontainer-review]$ oc describe template quote-php-persistent
Name:		quote-php-persistent
Namespace:	philbb-deploy
Created:	About a minute ago
Labels:		<none>
Annotations:	openshift.io/display-name=Quote PHP Application and MySQL 8

Parameters:		 
    Name:		RHT_OCP4_QUAY_USER
    Description:	Quay namespace the images are stored in
    Required:		true
    Value:		<none>


Object Labels:	app=quote-php,template=quote-php-mysql-persistent-template

Message:	<none>

Objects:			 
    Pod				mysql
    Pod				quote-php
    Service			quote-php
    Service			mysql
    PersistentVolumeClaim	dbinit
    PersistentVolumeClaim	dbclaim
[student@workstation multicontainer-review]$ oc get template quote-php-persistent -o yaml  > quote-php-persistent-template.yaml
[student@workstation multicontainer-review]$ oc process -f quote-php-persistent-template.yaml | oc create -f -
error: unable to process template
  Required value: template.parameters[0]: parameter RHT_OCP4_QUAY_USER is required and must be specified
error: no objects passed to create
[student@workstation multicontainer-review]$ oc process -p RHT_OCP4_QUAY_USER=lmatouse -f quote-php-persistent-template.yaml | oc create -f -
pod/mysql created
pod/quote-php created
service/quote-php created
service/mysql created
persistentvolumeclaim/dbinit created
persistentvolumeclaim/dbclaim created
[student@workstation multicontainer-review]$ oc get pods
NAME        READY   STATUS              RESTARTS   AGE
mysql       0/1     ContainerCreating   0          10s
quote-php   0/1     ContainerCreating   0          10s
[student@workstation multicontainer-review]$ oc get pods -w
NAME        READY   STATUS              RESTARTS   AGE
mysql       0/1     ContainerCreating   0          12s
quote-php   1/1     Running             0          12s
mysql       0/1     ContainerCreating   0          16s
mysql       1/1     Running             0          17s
^C[student@workstation multicontainer-review]$ oc get pods 
NAME        READY   STATUS    RESTARTS   AGE
mysql       1/1     Running   0          35s
quote-php   1/1     Running   0          35s
[student@workstation multicontainer-review]$ oc describe quote-php
error: the server doesn't have a resource type "quote-php"
[student@workstation multicontainer-review]$ oc describe svc/quote-php
Name:              quote-php
Namespace:         philbb-deploy
Labels:            app=quote-php
                   name=quote-php
                   template=quote-php-mysql-persistent-template
Annotations:       <none>
Selector:          name=quote-php
Type:              ClusterIP
IP:                172.30.98.125
Port:              <unset>  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.130.2.142:8080
Session Affinity:  None
Events:            <none>
[student@workstation multicontainer-review]$ oc expose svc/quote-php
route.route.openshift.io/quote-php exposed
[student@workstation multicontainer-review]$ oc status | grep -o "http:.*com"
http://quote-php-philbb-deploy.apps.eu46.prod.nextcle.com
[student@workstation multicontainer-review]$ curl -w "\n" http://quote-php-philbb-deploy.apps.eu46.prod.nextcle.com
Always remember that you are absolutely unique. Just like everyone else.

[student@workstation multicontainer-review]$ cd
[student@workstation ~]$ lab multicontainer-review grade

Grading the student's work for Lab: Deploying Multi-container Applications

• Accessing Quotes web application.............................  PASS

[student@workstation ~]$ oc status
In project philbb-deploy on server https://api.eu46.prod.nextcle.com:6443

svc/mysql - 172.30.123.53:3306
  pod/mysql runs quay.io/lmatouse/do180-mysql-80-rhel8

http://quote-php-philbb-deploy.apps.eu46.prod.nextcle.com to pod port 8080 (svc/quote-php)
  pod/quote-php runs quay.io/lmatouse/do180-quote-php

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation ~]$ oc get service
NAME        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
mysql       ClusterIP   172.30.123.53   <none>        3306/TCP   3m35s
quote-php   ClusterIP   172.30.98.125   <none>        8080/TCP   3m35s
[student@workstation ~]$ oc get route
NAME        HOST/PORT                                            PATH   SERVICES    PORT   TERMINATION   WILDCARD
quote-php   quote-php-philbb-deploy.apps.eu46.prod.nextcle.com          quote-php   8080                 None
[student@workstation ~]$ lab multicontainer-review finish

Completing the Lab: Deploying Multi-container Applications

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the philbb-deploy project..........................  SUCCESS
 · Remove local images
 · Removing localhost/do180-mysql-80-rhel8 image...............  SUCCESS
 · Removing localhost/do180-quote-php image....................  SUCCESS
 · Removing quay.io/lmatouse/do180-mysql-80-rhel8 image........  SUCCESS
 · Removing quay.io/lmatouse/do180-todonodejs image............  SUCCESS
 · Removing registry.access.redhat.com/ubi8/ubi image..........  SUCCESS
 · Removing registry.redhat.io/rhel8/mysql-80:1 image..........  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ podman build --help
Build an image using instructions from Containerfiles

Description:
  Builds an OCI or Docker image using instructions from one or more Containerfiles and a specified build context directory.

Usage:
  podman build [flags] CONTEXT

Examples:
  podman build .
  podman build --creds=username:password -t imageName -f Containerfile.simple .
  podman build --layers --force-rm --tag imageName .

Flags:
      --add-host host:ip                           add a custom host-to-IP mapping (host:ip) (default [])
      --annotation stringArray                     Set metadata for an image (default [])
      --authfile string                            path of the authentication file.
      --build-arg argument=value                   argument=value to supply to the builder
      --cache-from string                          Images to utilise as potential cache sources. The build process does not currently support caching so this is a NOOP.
      --cap-add strings                            add the specified capability when running (default [])
      --cap-drop strings                           drop the specified capability when running (default [])
      --cert-dir string                            use certificates at the specified path to access the registry
      --cgroup-parent string                       optional parent cgroup for the container
      --cni-plugin-path path                       path of CNI network plugins (default "/usr/libexec/cni:/opt/cni/bin")
      --compress                                   This is legacy option, which has no effect on the image
      --cpu-period uint                            limit the CPU CFS (Completely Fair Scheduler) period
      --cpu-quota int                              limit the CPU CFS (Completely Fair Scheduler) quota
  -c, --cpu-shares uint                            CPU shares (relative weight)
      --cpuset-cpus string                         CPUs in which to allow execution (0-3, 0,1)
      --cpuset-mems string                         memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only effective on NUMA systems.
      --creds [username[:password]]                use [username[:password]] for accessing the registry
      --device stringArray                         Additional devices to be used within containers (default [])
  -D, --disable-compression                        don't compress layers by default (default true)
      --disable-content-trust                      This is a Docker specific option and is a NOOP
      --dns /etc/resolv.conf                       Set custom DNS servers or disable it completely by setting it to 'none', which prevents the automatic creation of /etc/resolv.conf.
      --dns-option strings                         Set custom DNS options
      --dns-search strings                         Set custom DNS search domains
  -f, --file pathname or URL                       pathname or URL of a Dockerfile
      --force-rm                                   Always remove intermediate containers after a build, even if the build is unsuccessful. (default true)
      --format format                              format of the built image's manifest and metadata. Use BUILDAH_FORMAT environment variable to override. (default "oci")
      --http-proxy                                 pass thru HTTP Proxy environment variables (default true)
      --iidfile file                               file to write the image ID to
      --ipc path                                   'container', path of IPC namespace to join, or 'host'
      --isolation type                             type of process isolation to use. Use BUILDAH_ISOLATION environment variable to override. (default "oci")
      --label stringArray                          Set metadata for an image (default [])
      --layers                                     cache intermediate layers during build. Use BUILDAH_LAYERS environment variable to override. (default true)
      --logfile file                               log to file instead of stdout/stderr
      --loglevel int                               adjust logging level (range from -2 to 3)
  -m, --memory string                              memory limit (format: <number>[<unit>], where unit = b, k, m or g)
      --memory-swap string                         swap limit equal to memory plus swap: '-1' to enable unlimited swap
      --network path                               'container', path of network namespace to join, or 'host'
      --no-cache                                   Do not use existing cached images for the container build. Build from the start with a new set of cached layers.
      --pid path                                   container, path of PID namespace to join, or 'host'
      --platform string                            CLI compatibility: no action or effect
      --pull                                       pull the image if not present (default true)
      --pull-always                                pull the image, even if a version is present
  -q, --quiet                                      refrain from announcing build instructions and image read/write progress
      --rm                                         Remove intermediate containers after a successful build (default true)
      --runtime-flag strings                       add global flags for the container runtime
      --security-opt stringArray                   security options (default [])
      --shm-size <number><unit>                    size of '/dev/shm'. The format is <number><unit>. (default "65536k")
      --squash                                     Squash newly built layers into a single new layer.
      --squash-all                                 Squash all layers into a single layer. (default true)
  -t, --tag name                                   tagged name to apply to the built image
      --target string                              set the target build stage to build
      --tls-verify                                 require HTTPS and verify certificates when accessing the registry (default true)
      --ulimit strings                             ulimit options (default [])
      --userns path                                'container', path of user namespace to join, or 'host'
      --userns-gid-map containerID:hostID:length   containerID:hostID:length GID mapping to use in user namespace
      --userns-gid-map-group name                  name of entries from /etc/subgid to use to set user namespace GID mapping
      --userns-uid-map containerID:hostID:length   containerID:hostID:length UID mapping to use in user namespace
      --userns-uid-map-user name                   name of entries from /etc/subuid to use to set user namespace UID mapping
      --uts path                                   container, :path of UTS namespace to join, or 'host'
  -v, --volume strings                             bind mount a volume into the container (default [])

[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ lab troubleshoot-s2i start 

Checking prerequisites for Guided Exercise: Troubleshooting an OpenShift Build

 Checking local clone of the applications repository:
 · Folder '/home/student/DO180-apps' is a git repo.............  SUCCESS
 · Git repo '/home/student/DO180-apps' has no pending changes..  SUCCESS
 · Project 'nodejs-helloworld' exists in student's GitHub fork.  SUCCESS
 Checking for conflicts with existing OpenShift projects:
 · Project 'philbb-nodejs' is absent...........................  SUCCESS
 Checking for conflicts with existing local containers:
 · Container 'test' is absent..................................  SUCCESS
 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS

Setting up the classroom for Guided Exercise: Troubleshooting an OpenShift Build

 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


Overall start status...........................................  SUCCESS

[student@workstation ~]$ source /usr/local/etc/ocp4.config 
[student@workstation ~]$ cd DO180-apps/
[student@workstation DO180-apps]$ git checkout master 
Switched to branch 'master'
Your branch is up to date with 'origin/master'.
[student@workstation DO180-apps]$ git checkout -b troubleshoot-s2i
Switched to a new branch 'troubleshoot-s2i'
[student@workstation DO180-apps]$ git push -u origin troubleshoot-s2i 
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Total 0 (delta 0), reused 0 (delta 0)
remote: 
remote: Create a pull request for 'troubleshoot-s2i' on GitHub by visiting:
remote:      https://github.com/lmatouse/DO180-apps/pull/new/troubleshoot-s2i
remote: 
To https://github.com/lmatouse/DO180-apps
 * [new branch]      troubleshoot-s2i -> troubleshoot-s2i
Branch 'troubleshoot-s2i' set up to track remote branch 'troubleshoot-s2i' from 'origin'.
[student@workstation DO180-apps]$ oc login -u ${RHT_OCP4_DEV_USER} -p "${RHT_OCP4_DEV_PASSWORD}"
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation DO180-apps]$ oc new-project ${RHT_OCP4_DEV_USER}-nodejs
Now using project "philbb-nodejs" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation DO180-apps]$ oc new-app --context-dir=nodejs-helloworld https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#troubleshoot-s2i -i nodejs:12 --name nodejs-hello --build-env npm_config_registry=http://${RHT_OCP4_NEXUS_SERVER}/repository/npm-proxy
warning: Cannot check if git requires authentication.
--> Found image 1ad9bd1 (3 months old) in image stream "openshift/nodejs" under tag "12" for "nodejs:12"

    Node.js 12 
    ---------- 
    Node.js 12 available as container is a base platform for building and running various Node.js 12 applications and frameworks. Node.js is a platform built on Chrome's JavaScript runtime for easily building fast, scalable network applications. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient, perfect for data-intensive real-time applications that run across distributed devices.

    Tags: builder, nodejs, nodejs12

    * The source repository appears to match: nodejs
    * A source build using source code from https://github.com/lmatouse/DO180-apps#troubleshoot-s2i will be created
      * The resulting image will be pushed to image stream tag "nodejs-hello:latest"
      * Use 'oc start-build' to trigger a new build
      * WARNING: this source repository may require credentials.
                 Create a secret with your git credentials and use 'oc set build-secret' to assign it to the build config.

--> Creating resources ...
    imagestream.image.openshift.io "nodejs-hello" created
    buildconfig.build.openshift.io "nodejs-hello" created
    deployment.apps "nodejs-hello" created
    service "nodejs-hello" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/nodejs-hello' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/nodejs-hello' 
    Run 'oc status' to view your app.
[student@workstation DO180-apps]$ oc get pods
NAME                   READY   STATUS    RESTARTS   AGE
nodejs-hello-1-build   1/1     Running   0          28s
[student@workstation DO180-apps]$ oc get pods -w
NAME                   READY   STATUS    RESTARTS   AGE
nodejs-hello-1-build   1/1     Running   0          31s
^C[student@workstation DO180-apps]$ oc get pods -w
NAME                   READY   STATUS   RESTARTS   AGE
nodejs-hello-1-build   0/1     Error    0          44s
^C[student@workstation DO180-apps]$ oc logs bc/nodejs-hello
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all apps previously in course)
	Author:	Jordi Sola <someth2say@gmail.com>
	Date:	Fri Oct 4 13:04:03 2019 +0200
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 2: LABEL "io.openshift.build.source-context-dir"="nodejs-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0"       "io.openshift.build.commit.author"="Jordi Sola <someth2say@gmail.com>"       "io.openshift.build.commit.date"="Fri Oct 4 13:04:03 2019 +0200"       "io.openshift.build.commit.id"="f7cd8963ef353d9173c3a21dcccf402f3616840b"       "io.openshift.build.commit.ref"="troubleshoot-s2i"       "io.openshift.build.commit.message"="Initial commit, including all apps previously in course"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"
STEP 3: ENV OPENSHIFT_BUILD_NAME="nodejs-hello-1"     OPENSHIFT_BUILD_NAMESPACE="philbb-nodejs"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="troubleshoot-s2i"     OPENSHIFT_BUILD_COMMIT="f7cd8963ef353d9173c3a21dcccf402f3616840b"     npm_config_registry="http://nexus-common.apps.eu46.prod.nextcle.com/repository/npm-proxy"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-11T08:40:05Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T08:40:05Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-11T08:40:06Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T08:40:06Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source ...
---> Installing all dependencies
npm ERR! code ETARGET
npm ERR! notarget No matching version found for express@~4.14.2.
npm ERR! notarget In most cases you or one of your dependencies are requesting
npm ERR! notarget a package version that doesn't exist.
npm ERR! notarget 
npm ERR! notarget It was specified as a dependency of 'src'
npm ERR! notarget 

npm ERR! A complete log of this run can be found in:
npm ERR!     /opt/app-root/src/.npm/_logs/2022-03-11T08_40_07_569Z-debug.log
error: build error: error building at STEP "RUN /usr/libexec/s2i/assemble": error while running runtime: exit status 1
[student@workstation DO180-apps]$ vim 
example/           .git/              nodejs-app/        nodejs-helloworld/ php-helloworld/    README.md          temps/             todoapp/           
[student@workstation DO180-apps]$ vim nodejs-helloworld/package.json 
[student@workstation DO180-apps]$ git commit -am "Fixed Express release"
[troubleshoot-s2i ebe33ec] Fixed Express release
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 399 bytes | 399.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   f7cd896..ebe33ec  troubleshoot-s2i -> troubleshoot-s2i
[student@workstation DO180-apps]$ oc start-build bc/nodejs-hello
build.build.openshift.io/nodejs-hello-2 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-hello
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	ebe33ec1873c5e18cfc0b0e7037a403a0a4aa4f8 (Fixed Express release)
	Author:	Student User <student@workstation.lab.example.com>
	Date:	Fri Mar 11 03:43:13 2022 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 2: LABEL "io.openshift.build.commit.id"="ebe33ec1873c5e18cfc0b0e7037a403a0a4aa4f8"       "io.openshift.build.commit.ref"="troubleshoot-s2i"       "io.openshift.build.commit.message"="Fixed Express release"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"       "io.openshift.build.source-context-dir"="nodejs-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0"       "io.openshift.build.commit.author"="Student User <student@workstation.lab.example.com>"       "io.openshift.build.commit.date"="Fri Mar 11 03:43:13 2022 -0500"
STEP 3: ENV OPENSHIFT_BUILD_NAME="nodejs-hello-2"     OPENSHIFT_BUILD_NAMESPACE="philbb-nodejs"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="troubleshoot-s2i"     OPENSHIFT_BUILD_COMMIT="ebe33ec1873c5e18cfc0b0e7037a403a0a4aa4f8"     npm_config_registry="http://nexus-common.apps.eu46.prod.nextcle.com/repository/npm-proxy"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-11T08:44:11Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T08:44:11Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-11T08:44:12Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T08:44:12Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source ...
---> Installing all dependencies
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN nodejs-helloworld@1.0.0 No repository field.
npm WARN nodejs-helloworld@1.0.0 license should be a valid SPDX license expression

added 43 packages from 27 contributors in 1.752s
---> Building in production mode
---> Pruning the development dependencies
npm WARN nodejs-helloworld@1.0.0 No repository field.
npm WARN nodejs-helloworld@1.0.0 license should be a valid SPDX license expression

up to date in 0.291s
/opt/app-root/src/.npm is not a mountpoint
---> Cleaning the npm cache /opt/app-root/src/.npm
/tmp is not a mountpoint
---> Cleaning the /tmp/npm-*
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/philbb-nodejs/nodejs-hello-2:7eaa624e
Getting image source signatures
Copying blob sha256:cc423b2000aec40199a4f4e1012f2e9b573d4ce6bc1ca416a598f8e1d45f3d13
Copying blob sha256:41d099875e8768dcadb9f7e388d68c50eb25f6160c8a3858b966d12d89e4d288
Copying blob sha256:3cd3b63408eccc3f9a1ffb740cf311d927927f94247e952af1c9b67c1ad2db4f
Copying blob sha256:3dca2e66497972abbd6a7796a701296ada6bb53013b52d4432bc0d3f1cf0e7bd
Copying blob sha256:cbd14b4998e05d5a05f10fa887ca9e0bfb2f5731caf1726b31d57f8d6b2a8341
Copying blob sha256:4a7c1a8711e3a14c44d07485540f95f82e470958813e666eb6cf6af4c78245f3
Copying config sha256:ea70c2d81562ae7e865107388eed5ef5c04d80d144570f18206e07d5f52ed407
Writing manifest to image destination
Storing signatures
--> ea70c2d8156
ea70c2d81562ae7e865107388eed5ef5c04d80d144570f18206e07d5f52ed407

Pushing image image-registry.openshift-image-registry.svc:5000/philbb-nodejs/nodejs-hello:latest ...
Getting image source signatures
Copying blob sha256:4a7c1a8711e3a14c44d07485540f95f82e470958813e666eb6cf6af4c78245f3
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying config sha256:ea70c2d81562ae7e865107388eed5ef5c04d80d144570f18206e07d5f52ed407
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/philbb-nodejs/nodejs-hello@sha256:eabdb6567cb0655ab55f4667f703e447502461682c774a4dc54b0a03ae41d6a4
Push successful
[student@workstation DO180-apps]$ oc get pods
NAME                            READY   STATUS             RESTARTS   AGE
nodejs-hello-1-build            0/1     Error              0          5m59s
nodejs-hello-2-build            0/1     Completed          0          114s
nodejs-hello-5478d74658-tkgbg   0/1     CrashLoopBackOff   3          75s
[student@workstation DO180-apps]$ oc logs nodejs-hello-5478d74658-tkgbg
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm ERR! missing script: start
npm timing npm Completed in 92ms

npm ERR! A complete log of this run can be found in:
npm ERR!     /opt/app-root/src/.npm/_logs/2022-03-11T08_45_10_020Z-debug.log
[student@workstation DO180-apps]$ vim nodejs-helloworld/package.json 
[student@workstation DO180-apps]$ git commit -am "Added start up script"
[troubleshoot-s2i de589ed] Added start up script
 1 file changed, 1 insertion(+)
[student@workstation DO180-apps]$ git push 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 422 bytes | 422.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   ebe33ec..de589ed  troubleshoot-s2i -> troubleshoot-s2i
[student@workstation DO180-apps]$ oc start-build bc/nodejs-hello
build.build.openshift.io/nodejs-hello-3 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-hello
Cloning "https://github.com/lmatouse/DO180-apps" ...
^C
[student@workstation DO180-apps]$ oc get pods -w
NAME                            READY   STATUS      RESTARTS   AGE
nodejs-hello-1-build            0/1     Error       0          10m
nodejs-hello-2-build            0/1     Completed   0          6m48s
nodejs-hello-3-build            0/1     Init:0/2    0          19s
nodejs-hello-5478d74658-tkgbg   0/1     Error       6          6m9s
nodejs-hello-5478d74658-tkgbg   0/1     CrashLoopBackOff   6          6m13s
^C[student@workstation DO180-apps]$ oc logs -f bc/nodejs-hello
Cloning "https://github.com/lmatouse/DO180-apps" ...
^C
[student@workstation DO180-apps]$ oc get pods -w
NAME                            READY   STATUS             RESTARTS   AGE
nodejs-hello-1-build            0/1     Error              0          12m
nodejs-hello-2-build            0/1     Completed          0          8m10s
nodejs-hello-3-build            0/1     Init:0/2           0          101s
nodejs-hello-5478d74658-tkgbg   0/1     CrashLoopBackOff   6          7m31s
^C[student@workstation DO180-apps]$ oc logs -f bc/nodejs-hello
Cloning "https://github.com/lmatouse/DO180-apps" ...
error: fatal: unable to access 'https://github.com/lmatouse/DO180-apps/': OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443 
[student@workstation DO180-apps]$ oc start-build bc/nodejs-hello
build.build.openshift.io/nodejs-hello-4 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-hello
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	de589ed58d03e1b93bc1950443cef5b223f00749 (Added start up script)
	Author:	Student User <student@workstation.lab.example.com>
	Date:	Fri Mar 11 03:49:58 2022 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
^C
[student@workstation DO180-apps]$ oc get pods -w
NAME                            READY   STATUS             RESTARTS   AGE
nodejs-hello-1-build            0/1     Error              0          16m
nodejs-hello-2-build            0/1     Completed          0          12m
nodejs-hello-3-build            0/1     Init:Error         0          5m55s
nodejs-hello-4-build            1/1     Running            0          23s
nodejs-hello-5478d74658-tkgbg   0/1     CrashLoopBackOff   7          11m
nodejs-hello-54b474b79d-vtdxx   0/1     Pending            0          0s
nodejs-hello-54b474b79d-vtdxx   0/1     Pending            0          0s
nodejs-hello-54b474b79d-vtdxx   0/1     ContainerCreating   0          0s
nodejs-hello-4-build            0/1     Completed           0          37s
nodejs-hello-54b474b79d-vtdxx   0/1     ContainerCreating   0          2s
nodejs-hello-54b474b79d-vtdxx   1/1     Running             0          4s
nodejs-hello-5478d74658-tkgbg   0/1     Terminating         7          12m
nodejs-hello-5478d74658-tkgbg   0/1     Terminating         7          12m
nodejs-hello-5478d74658-tkgbg   0/1     Terminating         7          12m
^C[student@workstation DO180-apps]$ oc get pods 
NAME                            READY   STATUS       RESTARTS   AGE
nodejs-hello-1-build            0/1     Error        0          17m
nodejs-hello-2-build            0/1     Completed    0          13m
nodejs-hello-3-build            0/1     Init:Error   0          6m54s
nodejs-hello-4-build            0/1     Completed    0          82s
nodejs-hello-54b474b79d-vtdxx   1/1     Running      0          46s
[student@workstation DO180-apps]$ oc logs nodejs-hello-54b474b79d-vtdxx
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-helloworld@1.0.0~prestart: nodejs-helloworld@1.0.0
npm info lifecycle nodejs-helloworld@1.0.0~start: nodejs-helloworld@1.0.0

> nodejs-helloworld@1.0.0 start /opt/app-root/src
> node app.js

Example app listening on port 8080!
[student@workstation DO180-apps]$ oc expose svc/nodejs-hello
route.route.openshift.io/nodejs-hello exposed
[student@workstation DO180-apps]$ oc get route -o yaml
apiVersion: v1
items:
- apiVersion: route.openshift.io/v1
  kind: Route
  metadata:
    annotations:
      openshift.io/host.generated: "true"
    creationTimestamp: "2022-03-11T08:58:19Z"
    labels:
      app: nodejs-hello
      app.kubernetes.io/component: nodejs-hello
      app.kubernetes.io/instance: nodejs-hello
      app.kubernetes.io/name: nodejs
    managedFields:
    - apiVersion: route.openshift.io/v1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:labels:
            .: {}
            f:app: {}
            f:app.kubernetes.io/component: {}
            f:app.kubernetes.io/instance: {}
            f:app.kubernetes.io/name: {}
        f:spec:
          f:port:
            .: {}
            f:targetPort: {}
          f:to:
            f:kind: {}
            f:name: {}
            f:weight: {}
          f:wildcardPolicy: {}
      manager: kubectl-expose
      operation: Update
      time: "2022-03-11T08:58:19Z"
    - apiVersion: route.openshift.io/v1
      fieldsType: FieldsV1
      fieldsV1:
        f:status:
          f:ingress: {}
      manager: openshift-router
      operation: Update
      time: "2022-03-11T08:58:19Z"
    name: nodejs-hello
    namespace: philbb-nodejs
    resourceVersion: "26011096"
    selfLink: /apis/route.openshift.io/v1/namespaces/philbb-nodejs/routes/nodejs-hello
    uid: 60d52768-9de3-4ffc-b680-8ed46ddbe365
  spec:
    host: nodejs-hello-philbb-nodejs.apps.eu46.prod.nextcle.com
    port:
      targetPort: 8080-tcp
    to:
      kind: Service
      name: nodejs-hello
      weight: 100
    wildcardPolicy: None
  status:
    ingress:
    - conditions:
      - lastTransitionTime: "2022-03-11T08:58:19Z"
        status: "True"
        type: Admitted
      host: nodejs-hello-philbb-nodejs.apps.eu46.prod.nextcle.com
      routerCanonicalHostname: apps.eu46.prod.nextcle.com
      routerName: default
      wildcardPolicy: None
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""
[student@workstation DO180-apps]$ curl -w "\n" http://nodejs-hello-philbb-nodejs.apps.eu46.prod.nextcle.com
Hello World!
[student@workstation DO180-apps]$ lab troubleshoot-s2i finish 

Completing the Guided Exercise: Troubleshooting an OpenShift Build

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the 'philbb-nodejs' OpenShift project..............  SUCCESS
[student@workstation DO180-apps]$ lab troubleshoot-container start 

Setting up workstation for the Guided Excercise: Configuring Apache Container Logs for Debugging

 · Checking podman configuration...............................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation DO180-apps]$ cd ..
[student@workstation ~]$ vim DO180/labs/troubleshoot-container/conf/httpd.conf 
[student@workstation ~]$ cd DO180/labs/troubleshoot-container/
[student@workstation troubleshoot-container]$ ls
build.sh  conf  Dockerfile  src
[student@workstation troubleshoot-container]$ podman build -t troubleshoot-container .
STEP 1: FROM quay.io/redhattraining/httpd-parent
Getting image source signatures
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob a3ed95caeb02 done
Copying blob 6a5240d60dc4 done
Copying blob 08b8c9fdec44 done
Copying blob 787f47dbeaac done
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 skipped: already exists
Copying blob a3ed95caeb02 skipped: already exists
Copying blob 408208567b9a done
Writing manifest to image destination
Storing signatures
STEP 2: COPY src/ ${DOCROOT}/
855e43091ee3aaba4a8cb502879797f9224b2806b34f6438371bb09a6a9b74f4
STEP 3: MAINTAINER username <username@example.com>
e364d6dd30320f07707c1986c55353b8ad98861442db3f1664f90ace8ec93708
STEP 4: COPY ./conf/httpd.conf /etc/httpd/conf/httpd.conf
STEP 5: COMMIT troubleshoot-container
65a4092eeb79f478a0e0100b6839f835de0f2940e1ed4f50fb481ecb6d4712ed
[student@workstation troubleshoot-container]$ pdoman images
bash: pdoman: command not found...
Similar command is: 'podman'
[student@workstation troubleshoot-container]$ podman images
REPOSITORY                            TAG      IMAGE ID       CREATED         SIZE
localhost/troubleshoot-container      latest   65a4092eeb79   2 minutes ago   236 MB
quay.io/redhattraining/httpd-parent   latest   4346d3cace25   2 years ago     236 MB
[student@workstation troubleshoot-container]$ podman run --name troubleshoot-container -d -p 10080:80 troubleshoot-container
06559f1d774575655f99780bf2f51c555743eb3b71d82cd2dec945f88caf337b
[student@workstation troubleshoot-container]$ podman logs -f troubleshoot-container
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 10.0.2.100. Set the 'ServerName' directive globally to suppress this message
[Fri Mar 11 09:43:55.137751 2022] [suexec:notice] [pid 1:tid 139763775478016] AH01232: suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Fri Mar 11 09:43:55.139979 2022] [http2:debug] [pid 1:tid 139763775478016] mod_http2.c(112): AH03089: initializing post config dry run
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 10.0.2.100. Set the 'ServerName' directive globally to suppress this message
[Fri Mar 11 09:43:55.164233 2022] [slotmem_shm:debug] [pid 1:tid 139763775478016] mod_slotmem_shm.c(497): AH02301: attach looking for /run/httpd/slotmem-shm-mod_heartmonitor_0.shm
[Fri Mar 11 09:43:55.164299 2022] [lbmethod_heartbeat:notice] [pid 1:tid 139763775478016] AH02282: No slotmem from mod_heartmonitor
[Fri Mar 11 09:43:55.165114 2022] [http2:info] [pid 1:tid 139763775478016] AH03090: mod_http2 (v1.11.3-git, feats=CHPRIO+SHA256+INVHD+DWINS, nghttp2 1.33.0), initializing...
[Fri Mar 11 09:43:55.165164 2022] [http2:warn] [pid 1:tid 139763775478016] AH02951: mod_ssl does not seem to be enabled
[Fri Mar 11 09:43:55.165238 2022] [proxy_http2:info] [pid 1:tid 139763775478016] AH03349: mod_proxy_http2 (v1.11.3-git, nghttp2 1.33.0), initializing...
[Fri Mar 11 09:43:55.165274 2022] [proxy_hcheck:debug] [pid 1:tid 139763775478016] mod_proxy_hcheck.c(1050): AH03265: watchdog callback registered (_proxy_hcheck_ for 10.0.2.100)
[Fri Mar 11 09:43:55.165293 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(454): AH010033: Watchdog: Running with WatchdogInterval 1000ms
[Fri Mar 11 09:43:55.165297 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(462): AH02974: Watchdog: found parent providers.
[Fri Mar 11 09:43:55.165300 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(508): AH02977: Watchdog: found child providers.
[Fri Mar 11 09:43:55.165302 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(516): AH02978: Watchdog: Looking for child (_singleton_).
[Fri Mar 11 09:43:55.165305 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(516): AH02978: Watchdog: Looking for child (_default_).
[Fri Mar 11 09:43:55.165306 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(516): AH02978: Watchdog: Looking for child (_proxy_hcheck_).
[Fri Mar 11 09:43:55.165314 2022] [watchdog:debug] [pid 1:tid 139763775478016] mod_watchdog.c(542): AH02979: Watchdog: Created singleton mutex (_proxy_hcheck_).
[Fri Mar 11 09:43:55.168797 2022] [mpm_event:notice] [pid 1:tid 139763775478016] AH00489: Apache/2.4.37 (Red Hat Enterprise Linux) configured -- resuming normal operations
[Fri Mar 11 09:43:55.168812 2022] [mpm_event:info] [pid 1:tid 139763775478016] AH00490: Server built: Apr  5 2019 07:31:21
[Fri Mar 11 09:43:55.168828 2022] [core:notice] [pid 1:tid 139763775478016] AH00094: Command line: '/usr/sbin/httpd -D FOREGROUND'
[Fri Mar 11 09:43:55.168831 2022] [core:debug] [pid 1:tid 139763775478016] log.c(1571): AH02639: Using SO_REUSEPORT: yes (1)
[Fri Mar 11 09:43:55.170365 2022] [watchdog:debug] [pid 8:tid 139763509790464] mod_watchdog.c(158): AH02972: Singleton Watchdog (_proxy_hcheck_) running
[Fri Mar 11 09:43:55.170366 2022] [watchdog:debug] [pid 8:tid 139763775478016] mod_watchdog.c(590): AH02981: Watchdog: Created child worker thread (_proxy_hcheck_).
[Fri Mar 11 09:43:55.170420 2022] [proxy_hcheck:debug] [pid 8:tid 139763509790464] mod_proxy_hcheck.c(893): AH03258: _proxy_hcheck_ watchdog started.
[Fri Mar 11 09:43:55.170475 2022] [proxy:debug] [pid 8:tid 139763775478016] proxy_util.c(1923): AH00925: initializing worker proxy:reverse shared
[Fri Mar 11 09:43:55.170502 2022] [proxy:debug] [pid 8:tid 139763775478016] proxy_util.c(1980): AH00927: initializing worker proxy:reverse local
[Fri Mar 11 09:43:55.170552 2022] [proxy:debug] [pid 8:tid 139763775478016] proxy_util.c(2015): AH00930: initialized pool in child 8 for (*) min=0 max=61 smax=61
[Fri Mar 11 09:43:55.171781 2022] [watchdog:debug] [pid 7:tid 139763775478016] mod_watchdog.c(590): AH02981: Watchdog: Created child worker thread (_proxy_hcheck_).
[Fri Mar 11 09:43:55.171835 2022] [proxy:debug] [pid 7:tid 139763775478016] proxy_util.c(1923): AH00925: initializing worker proxy:reverse shared
[Fri Mar 11 09:43:55.171853 2022] [proxy:debug] [pid 7:tid 139763775478016] proxy_util.c(1980): AH00927: initializing worker proxy:reverse local
[Fri Mar 11 09:43:55.171876 2022] [proxy:debug] [pid 7:tid 139763775478016] proxy_util.c(2015): AH00930: initialized pool in child 7 for (*) min=0 max=61 smax=61
[Fri Mar 11 09:43:55.173470 2022] [mpm_event:debug] [pid 7:tid 139763190867712] event.c(2313): AH02471: start_threads: Using epoll (wakeable)
[Fri Mar 11 09:43:55.174483 2022] [proxy_hcheck:debug] [pid 8:tid 139763509790464] mod_proxy_hcheck.c(907): AH03313: apr_thread_pool_create() with 16 threads succeeded
[Fri Mar 11 09:43:55.175710 2022] [watchdog:debug] [pid 9:tid 139763775478016] mod_watchdog.c(590): AH02981: Watchdog: Created child worker thread (_proxy_hcheck_).
[Fri Mar 11 09:43:55.175758 2022] [proxy:debug] [pid 9:tid 139763775478016] proxy_util.c(1923): AH00925: initializing worker proxy:reverse shared
[Fri Mar 11 09:43:55.175775 2022] [proxy:debug] [pid 9:tid 139763775478016] proxy_util.c(1980): AH00927: initializing worker proxy:reverse local
[Fri Mar 11 09:43:55.175803 2022] [proxy:debug] [pid 9:tid 139763775478016] proxy_util.c(2015): AH00930: initialized pool in child 9 for (*) min=0 max=61 smax=61
[Fri Mar 11 09:43:55.177369 2022] [mpm_event:debug] [pid 8:tid 139762983556864] event.c(2313): AH02471: start_threads: Using epoll (wakeable)
[Fri Mar 11 09:43:55.180144 2022] [mpm_event:debug] [pid 9:tid 139763190867712] event.c(2313): AH02471: start_threads: Using epoll (wakeable)
[Fri Mar 11 09:44:41.370385 2022] [authz_core:debug] [pid 9:tid 139763182475008] mod_authz_core.c(820): [client 10.0.2.2:51492] AH01626: authorization result of Require all granted: granted
[Fri Mar 11 09:44:41.370457 2022] [authz_core:debug] [pid 9:tid 139763182475008] mod_authz_core.c(820): [client 10.0.2.2:51492] AH01626: authorization result of <RequireAny>: granted
[Fri Mar 11 09:44:41.370746 2022] [authz_core:debug] [pid 9:tid 139763182475008] mod_authz_core.c(820): [client 10.0.2.2:51492] AH01626: authorization result of Require all granted: granted
[Fri Mar 11 09:44:41.370755 2022] [authz_core:debug] [pid 9:tid 139763182475008] mod_authz_core.c(820): [client 10.0.2.2:51492] AH01626: authorization result of <RequireAny>: granted
10.0.2.2 - - [11/Mar/2022:09:44:41 +0000] "GET / HTTP/1.1" 200 39
^C
[student@workstation troubleshoot-container]$ lab troubleshoot-container finish 

Completing the Guided Excercise: Configuring Apache Container Logs for Debugging

 · Stopping the troubleshoot-container container...............  SUCCESS
 · Removing the troubleshoot-container container...............  SUCCESS
 · Removing the troubleshoot-container container image.........  SUCCESS
 · Removing redhattraining/httpd-parent container image........  SUCCESS
[student@workstation troubleshoot-container]$ lab troubleshoot-review start 

Checking prerequisites for Lab: Troubleshooting Containerized Applications

 Checking local clone of the applications repository:
 · Folder '/home/student/DO180-apps' is a git repo.............  SUCCESS
 · Git repo '/home/student/DO180-apps' has no pending changes..  SUCCESS
 · Project 'nodejs-app' exists in student's GitHub fork........  SUCCESS
 Checking for conflicts with existing OpenShift projects:
 · Project 'philbb-nodejs-app' is absent.......................  SUCCESS
 Checking for conflicts with existing local containers:
 · Container 'test' is absent..................................  SUCCESS
 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS

Setting up the classroom for Lab: Troubleshooting Containerized Applications

 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


Overall start status...........................................  SUCCESS

[student@workstation troubleshoot-container]$ source /usr/local/etc/ocp4.config 
[student@workstation troubleshoot-container]$ cd 
[student@workstation ~]$ cd DO180-apps/
[student@workstation DO180-apps]$ git checkout master 
Switched to branch 'master'
Your branch is up to date with 'origin/master'.
[student@workstation DO180-apps]$ git checkout -b troubleshoot-review
Switched to a new branch 'troubleshoot-review'
[student@workstation DO180-apps]$ git push -u origin troubleshoot-review
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.
fatal: Authentication failed for 'https://github.com/lmatouse/DO180-apps/'
[student@workstation DO180-apps]$ git push -u origin troubleshoot-review
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Total 0 (delta 0), reused 0 (delta 0)
remote: 
remote: Create a pull request for 'troubleshoot-review' on GitHub by visiting:
remote:      https://github.com/lmatouse/DO180-apps/pull/new/troubleshoot-review
remote: 
To https://github.com/lmatouse/DO180-apps
 * [new branch]      troubleshoot-review -> troubleshoot-review
Branch 'troubleshoot-review' set up to track remote branch 'troubleshoot-review' from 'origin'.
[student@workstation DO180-apps]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation DO180-apps]$ oc new-project ${RHT_OCP4_DEV_USER}-nodejs-app
Now using project "philbb-nodejs-app" on server "https://api.eu46.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation DO180-apps]$ oc new-app --context-dir=nodejs-app --name nodejs-dev -i nodejs:12 https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#troubleshoot-review --build-env npm_config_registry=http://${RHT_OCP4_NEXUS_SERVER}/repository/npm-proxy 
--> Found image 1ad9bd1 (3 months old) in image stream "openshift/nodejs" under tag "12" for "nodejs:12"

    Node.js 12 
    ---------- 
    Node.js 12 available as container is a base platform for building and running various Node.js 12 applications and frameworks. Node.js is a platform built on Chrome's JavaScript runtime for easily building fast, scalable network applications. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient, perfect for data-intensive real-time applications that run across distributed devices.

    Tags: builder, nodejs, nodejs12

    * The source repository appears to match: nodejs
    * A source build using source code from https://github.com/lmatouse/DO180-apps#troubleshoot-review will be created
      * The resulting image will be pushed to image stream tag "nodejs-dev:latest"
      * Use 'oc start-build' to trigger a new build

--> Creating resources ...
    imagestream.image.openshift.io "nodejs-dev" created
    buildconfig.build.openshift.io "nodejs-dev" created
    deployment.apps "nodejs-dev" created
    service "nodejs-dev" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/nodejs-dev' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/nodejs-dev' 
    Run 'oc status' to view your app.
[student@workstation DO180-apps]$ oc get pods -w
NAME                 READY   STATUS     RESTARTS   AGE
nodejs-dev-1-build   0/1     Init:0/2   0          15s
nodejs-dev-1-build   0/1     Init:1/2   0          21s
nodejs-dev-1-build   0/1     PodInitializing   0          22s
nodejs-dev-1-build   1/1     Running           0          23s
nodejs-dev-1-build   0/1     Error             0          50s
^C[student@workstation DO180-apps]$ oc get pods 
NAME                 READY   STATUS   RESTARTS   AGE
nodejs-dev-1-build   0/1     Error    0          70s
[student@workstation DO180-apps]$ oc logs bc/nodejs-dev
Cloning "https://github.com/lmatouse/DO180-apps" ...
WARNING: timed out waiting for git server, will wait 1m4s
	Commit:	f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all apps previously in course)
	Author:	Jordi Sola <someth2say@gmail.com>
	Date:	Fri Oct 4 13:04:03 2019 +0200
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 2: LABEL "io.openshift.build.commit.ref"="troubleshoot-review"       "io.openshift.build.commit.message"="Initial commit, including all apps previously in course"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"       "io.openshift.build.source-context-dir"="nodejs-app"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0"       "io.openshift.build.commit.author"="Jordi Sola <someth2say@gmail.com>"       "io.openshift.build.commit.date"="Fri Oct 4 13:04:03 2019 +0200"       "io.openshift.build.commit.id"="f7cd8963ef353d9173c3a21dcccf402f3616840b"
STEP 3: ENV OPENSHIFT_BUILD_NAME="nodejs-dev-1"     OPENSHIFT_BUILD_NAMESPACE="philbb-nodejs-app"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="troubleshoot-review"     OPENSHIFT_BUILD_COMMIT="f7cd8963ef353d9173c3a21dcccf402f3616840b"     npm_config_registry="http://nexus-common.apps.eu46.prod.nextcle.com/repository/npm-proxy"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-11T09:57:13Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T09:57:13Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-11T09:57:14Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T09:57:14Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source ...
---> Installing all dependencies
npm ERR! code ETARGET
npm ERR! notarget No matching version found for express@4.20.
npm ERR! notarget In most cases you or one of your dependencies are requesting
npm ERR! notarget a package version that doesn't exist.
npm ERR! notarget 
npm ERR! notarget It was specified as a dependency of 'src'
npm ERR! notarget 

npm ERR! A complete log of this run can be found in:
npm ERR!     /opt/app-root/src/.npm/_logs/2022-03-11T09_57_15_862Z-debug.log
error: build error: error building at STEP "RUN /usr/libexec/s2i/assemble": error while running runtime: exit status 1
[student@workstation DO180-apps]$ vim nodejs-app/package.json 
[student@workstation DO180-apps]$ git commit -am "Updated Express dependency version"
[troubleshoot-review 54ecaed] Updated Express dependency version
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 404 bytes | 404.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   f7cd896..54ecaed  troubleshoot-review -> troubleshoot-review
[student@workstation DO180-apps]$ oc sta
start-build  status       
[student@workstation DO180-apps]$ oc start-build bc/node-dev
Error from server (Forbidden): buildconfigs.build.openshift.io "node-dev" is forbidden: buildconfigs.build.openshift.io "node-dev" not found
[student@workstation DO180-apps]$ oc start-build node-dev
Error from server (Forbidden): buildconfigs.build.openshift.io "node-dev" is forbidden: buildconfigs.build.openshift.io "node-dev" not found
[student@workstation DO180-apps]$ oc start-build bc/nodejs-dev
build.build.openshift.io/nodejs-dev-2 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-dev
Cloning "https://github.com/lmatouse/DO180-apps" ...
rpc error: code = DeadlineExceeded desc = context deadline exceeded[student@workstation DO180-apps]$ 
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-dev
Error from server (BadRequest): pods "nodejs-dev-2-build" not found
[student@workstation DO180-apps]$ oc start-build bc/nodejs-dev
build.build.openshift.io/nodejs-dev-3 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-dev
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	54ecaed143aeabdf08e755c17d8037c8be321fe5 (Updated Express dependency version)
	Author:	Student User <student@workstation.lab.example.com>
	Date:	Fri Mar 11 04:59:13 2022 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 2: LABEL "io.openshift.build.source-context-dir"="nodejs-app"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0"       "io.openshift.build.commit.author"="Student User <student@workstation.lab.example.com>"       "io.openshift.build.commit.date"="Fri Mar 11 04:59:13 2022 -0500"       "io.openshift.build.commit.id"="54ecaed143aeabdf08e755c17d8037c8be321fe5"       "io.openshift.build.commit.ref"="troubleshoot-review"       "io.openshift.build.commit.message"="Updated Express dependency version"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"
STEP 3: ENV OPENSHIFT_BUILD_NAME="nodejs-dev-3"     OPENSHIFT_BUILD_NAMESPACE="philbb-nodejs-app"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="troubleshoot-review"     OPENSHIFT_BUILD_COMMIT="54ecaed143aeabdf08e755c17d8037c8be321fe5"     npm_config_registry="http://nexus-common.apps.eu46.prod.nextcle.com/repository/npm-proxy"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-11T10:17:04Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T10:17:04Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-11T10:17:05Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T10:17:05Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source ...
---> Installing all dependencies
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN nodejs-app@1.0.0 No repository field.
npm WARN nodejs-app@1.0.0 license should be a valid SPDX license expression

added 51 packages from 38 contributors in 2.012s

2 packages are looking for funding
  run `npm fund` for details

---> Building in production mode
---> Pruning the development dependencies
npm WARN nodejs-app@1.0.0 No repository field.
npm WARN nodejs-app@1.0.0 license should be a valid SPDX license expression

up to date in 0.333s

2 packages are looking for funding
  run `npm fund` for details

/opt/app-root/src/.npm is not a mountpoint
---> Cleaning the npm cache /opt/app-root/src/.npm
/tmp is not a mountpoint
---> Cleaning the /tmp/npm-*
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/philbb-nodejs-app/nodejs-dev-3:cea24c1f
Getting image source signatures
Copying blob sha256:cc423b2000aec40199a4f4e1012f2e9b573d4ce6bc1ca416a598f8e1d45f3d13
Copying blob sha256:41d099875e8768dcadb9f7e388d68c50eb25f6160c8a3858b966d12d89e4d288
Copying blob sha256:3cd3b63408eccc3f9a1ffb740cf311d927927f94247e952af1c9b67c1ad2db4f
Copying blob sha256:3dca2e66497972abbd6a7796a701296ada6bb53013b52d4432bc0d3f1cf0e7bd
Copying blob sha256:cbd14b4998e05d5a05f10fa887ca9e0bfb2f5731caf1726b31d57f8d6b2a8341
Copying blob sha256:431c997b06809c769c362c1b44d2fe4de9521fe9c6bc24b0587cca17b009c807
Copying config sha256:c668bebeecc6961f235bd5a00297b405f39a9fc2160983ebdad90c8ce46bd3b3
Writing manifest to image destination
Storing signatures
--> c668bebeecc
c668bebeecc6961f235bd5a00297b405f39a9fc2160983ebdad90c8ce46bd3b3
Getting image source signatures

Pushing image image-registry.openshift-image-registry.svc:5000/philbb-nodejs-app/nodejs-dev:latest ...
Copying blob sha256:431c997b06809c769c362c1b44d2fe4de9521fe9c6bc24b0587cca17b009c807
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying config sha256:c668bebeecc6961f235bd5a00297b405f39a9fc2160983ebdad90c8ce46bd3b3
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/philbb-nodejs-app/nodejs-dev@sha256:5caa99b953628f5ece6bb6fb61f994a800ed5ab02982b413e0b0f3a83a9d7e42
Push successful
[student@workstation DO180-apps]$ oc get pods
NAME                        READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build          0/1     Error       0          21m
nodejs-dev-3-build          0/1     Completed   0          91s
nodejs-dev-bfc69859-mjtz7   0/1     Error       3          54s
[student@workstation DO180-apps]$ oc get pods
NAME                        READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build          0/1     Error       0          21m
nodejs-dev-3-build          0/1     Completed   0          93s
nodejs-dev-bfc69859-mjtz7   0/1     Error       3          56s
[student@workstation DO180-apps]$ oc logs -f nodejs-dev-bfc69859-mjtz7
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

internal/modules/cjs/loader.js:818
  throw err;
  ^

Error: Cannot find module 'http-error'
Require stack:
- /opt/app-root/src/server.js
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:815:15)
    at Function.Module._load (internal/modules/cjs/loader.js:667:27)
    at Module.require (internal/modules/cjs/loader.js:887:19)
    at require (internal/modules/cjs/helpers.js:74:18)
    at Object.<anonymous> (/opt/app-root/src/server.js:1:19)
    at Module._compile (internal/modules/cjs/loader.js:999:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10)
    at Module.load (internal/modules/cjs/loader.js:863:32)
    at Function.Module._load (internal/modules/cjs/loader.js:708:14)
    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [ '/opt/app-root/src/server.js' ]
}
npm info lifecycle nodejs-app@1.0.0~start: Failed to exec start script
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! nodejs-app@1.0.0 start: `node server.js`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the nodejs-app@1.0.0 start script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm timing npm Completed in 143ms

npm ERR! A complete log of this run can be found in:
npm ERR!     /opt/app-root/src/.npm/_logs/2022-03-11T10_17_58_746Z-debug.log
[student@workstation DO180-apps]$ vi nodejs-app/server.js 
[student@workstation DO180-apps]$ ls nodejs-app/
package.json  server.js     
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ git commit -am "Corrected typo in httpd error module"
[troubleshoot-review 78f5b77] Corrected typo in httpd error module
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push 
^C
[student@workstation DO180-apps]$ git push -u origin troubleshoot-review 
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 404 bytes | 404.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   54ecaed..78f5b77  troubleshoot-review -> troubleshoot-review
Branch 'troubleshoot-review' set up to track remote branch 'troubleshoot-review' from 'origin'.
[student@workstation DO180-apps]$ oc start-build bc/nodejs-dev
build.build.openshift.io/nodejs-dev-4 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-dev
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	78f5b77b44c7f7e0b4c00599a27e70423700d9ec (Corrected typo in httpd error module)
	Author:	Student User <student@workstation.lab.example.com>
	Date:	Fri Mar 11 05:22:40 2022 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 2: LABEL "io.openshift.build.commit.date"="Fri Mar 11 05:22:40 2022 -0500"       "io.openshift.build.commit.id"="78f5b77b44c7f7e0b4c00599a27e70423700d9ec"       "io.openshift.build.commit.ref"="troubleshoot-review"       "io.openshift.build.commit.message"="Corrected typo in httpd error module"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"       "io.openshift.build.source-context-dir"="nodejs-app"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0"       "io.openshift.build.commit.author"="Student User <student@workstation.lab.example.com>"
STEP 3: ENV OPENSHIFT_BUILD_NAME="nodejs-dev-4"     OPENSHIFT_BUILD_NAMESPACE="philbb-nodejs-app"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="troubleshoot-review"     OPENSHIFT_BUILD_COMMIT="78f5b77b44c7f7e0b4c00599a27e70423700d9ec"     npm_config_registry="http://nexus-common.apps.eu46.prod.nextcle.com/repository/npm-proxy"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-11T10:24:15Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T10:24:15Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-11T10:24:16Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T10:24:16Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source ...
---> Installing all dependencies
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN nodejs-app@1.0.0 No repository field.
npm WARN nodejs-app@1.0.0 license should be a valid SPDX license expression

added 51 packages from 38 contributors in 2.464s

2 packages are looking for funding
  run `npm fund` for details

---> Building in production mode
---> Pruning the development dependencies
npm WARN nodejs-app@1.0.0 No repository field.
npm WARN nodejs-app@1.0.0 license should be a valid SPDX license expression

up to date in 0.327s

2 packages are looking for funding
  run `npm fund` for details

/opt/app-root/src/.npm is not a mountpoint
---> Cleaning the npm cache /opt/app-root/src/.npm
/tmp is not a mountpoint
---> Cleaning the /tmp/npm-*
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/philbb-nodejs-app/nodejs-dev-4:762c8d63
Getting image source signatures
Copying blob sha256:cc423b2000aec40199a4f4e1012f2e9b573d4ce6bc1ca416a598f8e1d45f3d13
Copying blob sha256:41d099875e8768dcadb9f7e388d68c50eb25f6160c8a3858b966d12d89e4d288
Copying blob sha256:3cd3b63408eccc3f9a1ffb740cf311d927927f94247e952af1c9b67c1ad2db4f
Copying blob sha256:3dca2e66497972abbd6a7796a701296ada6bb53013b52d4432bc0d3f1cf0e7bd
Copying blob sha256:cbd14b4998e05d5a05f10fa887ca9e0bfb2f5731caf1726b31d57f8d6b2a8341
Copying blob sha256:ef58d8cfa57c7605f1af9d0d4f50f4645d47d1cb8c897ec09499d66c1209cfa9
Copying config sha256:b155be3c9981b56db706fc0d40fd4ccd0f096ce8056508311f5c72ed2e747d9b
Writing manifest to image destination
Storing signatures
--> b155be3c998
b155be3c9981b56db706fc0d40fd4ccd0f096ce8056508311f5c72ed2e747d9b

Pushing image image-registry.openshift-image-registry.svc:5000/philbb-nodejs-app/nodejs-dev:latest ...
Getting image source signatures
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:ef58d8cfa57c7605f1af9d0d4f50f4645d47d1cb8c897ec09499d66c1209cfa9
Copying config sha256:b155be3c9981b56db706fc0d40fd4ccd0f096ce8056508311f5c72ed2e747d9b
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/philbb-nodejs-app/nodejs-dev@sha256:df95a2b5092cb4536c9365ad85e1a563e22c30924d9ef700e546c934b5a218ce
Push successful
[student@workstation DO180-apps]$ oc get pods -w
NAME                         READY   STATUS        RESTARTS   AGE
nodejs-dev-1-build           0/1     Error         0          28m
nodejs-dev-3-build           0/1     Completed     0          8m8s
nodejs-dev-4-build           0/1     Completed     0          60s
nodejs-dev-bfc69859-mjtz7    0/1     Terminating   6          7m31s
nodejs-dev-c4499c978-wlbm9   0/1     Error         2          20s
nodejs-dev-bfc69859-mjtz7    0/1     Terminating   6          7m36s
nodejs-dev-bfc69859-mjtz7    0/1     Terminating   6          7m36s
nodejs-dev-c4499c978-wlbm9   0/1     CrashLoopBackOff   2          35s
^C[student@workstation DO180-apps]$ oc get pods
NAME                         READY   STATUS             RESTARTS   AGE
nodejs-dev-1-build           0/1     Error              0          28m
nodejs-dev-3-build           0/1     Completed          0          8m35s
nodejs-dev-4-build           0/1     Completed          0          87s
nodejs-dev-c4499c978-wlbm9   0/1     CrashLoopBackOff   2          47s
[student@workstation DO180-apps]$ oc logs -f nodejs-dev-c4499c978-wlbm9
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

internal/modules/cjs/loader.js:818
  throw err;
  ^

Error: Cannot find module 'httpd-error'
Require stack:
- /opt/app-root/src/server.js
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:815:15)
    at Function.Module._load (internal/modules/cjs/loader.js:667:27)
    at Module.require (internal/modules/cjs/loader.js:887:19)
    at require (internal/modules/cjs/helpers.js:74:18)
    at Object.<anonymous> (/opt/app-root/src/server.js:1:19)
    at Module._compile (internal/modules/cjs/loader.js:999:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10)
    at Module.load (internal/modules/cjs/loader.js:863:32)
    at Function.Module._load (internal/modules/cjs/loader.js:708:14)
    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [ '/opt/app-root/src/server.js' ]
}
npm info lifecycle nodejs-app@1.0.0~start: Failed to exec start script
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! nodejs-app@1.0.0 start: `node server.js`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the nodejs-app@1.0.0 start script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm timing npm Completed in 156ms

npm ERR! A complete log of this run can be found in:
npm ERR!     /opt/app-root/src/.npm/_logs/2022-03-11T10_25_11_862Z-debug.log
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ git commit -am "Corrected typo in createerror module"
[troubleshoot-review a15e2d5] Corrected typo in createerror module
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 410 bytes | 410.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   78f5b77..a15e2d5  troubleshoot-review -> troubleshoot-review
[student@workstation DO180-apps]$ oc start-build bc/nodejs-dev
build.build.openshift.io/nodejs-dev-5 started
[student@workstation DO180-apps]$ oc get pods -w
NAME                         READY   STATUS             RESTARTS   AGE
nodejs-dev-1-build           0/1     Error              0          35m
nodejs-dev-3-build           0/1     Completed          0          15m
nodejs-dev-4-build           0/1     Completed          0          8m16s
nodejs-dev-5-build           1/1     Running            0          16s
nodejs-dev-c4499c978-wlbm9   0/1     CrashLoopBackOff   6          7m36s
^C[student@workstation DO180-apps]oc logs -f bc/nodejs-dev
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	a15e2d5d4dd68bdd47d3fe6210d3b9c23efbfe85 (Corrected typo in createerror module)
	Author:	Student User <student@workstation.lab.example.com>
	Date:	Fri Mar 11 05:31:24 2022 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0
STEP 2: LABEL "io.openshift.build.commit.author"="Student User <student@workstation.lab.example.com>"       "io.openshift.build.commit.date"="Fri Mar 11 05:31:24 2022 -0500"       "io.openshift.build.commit.id"="a15e2d5d4dd68bdd47d3fe6210d3b9c23efbfe85"       "io.openshift.build.commit.ref"="troubleshoot-review"       "io.openshift.build.commit.message"="Corrected typo in createerror module"       "io.openshift.build.source-location"="https://github.com/lmatouse/DO180-apps"       "io.openshift.build.source-context-dir"="nodejs-app"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/nodejs@sha256:6e20b81d4261bd1050048d157a50b4af531ff19aaccdf1e1abfa24ebfa051fa0"
STEP 3: ENV OPENSHIFT_BUILD_NAME="nodejs-dev-5"     OPENSHIFT_BUILD_NAMESPACE="philbb-nodejs-app"     OPENSHIFT_BUILD_SOURCE="https://github.com/lmatouse/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="troubleshoot-review"     OPENSHIFT_BUILD_COMMIT="a15e2d5d4dd68bdd47d3fe6210d3b9c23efbfe85"     npm_config_registry="http://nexus-common.apps.eu46.prod.nextcle.com/repository/npm-proxy"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-03-11T10:32:13Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T10:32:13Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-03-11T10:32:14Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-03-11T10:32:14Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source ...
---> Installing all dependencies
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN nodejs-app@1.0.0 No repository field.
npm WARN nodejs-app@1.0.0 license should be a valid SPDX license expression

added 51 packages from 38 contributors in 2.251s

2 packages are looking for funding
  run `npm fund` for details

---> Building in production mode
---> Pruning the development dependencies
npm WARN nodejs-app@1.0.0 No repository field.
npm WARN nodejs-app@1.0.0 license should be a valid SPDX license expression

up to date in 0.354s

2 packages are looking for funding
  run `npm fund` for details

/opt/app-root/src/.npm is not a mountpoint
---> Cleaning the npm cache /opt/app-root/src/.npm
/tmp is not a mountpoint
---> Cleaning the /tmp/npm-*
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/philbb-nodejs-app/nodejs-dev-5:9dbe1556
Getting image source signatures
Copying blob sha256:cc423b2000aec40199a4f4e1012f2e9b573d4ce6bc1ca416a598f8e1d45f3d13
Copying blob sha256:41d099875e8768dcadb9f7e388d68c50eb25f6160c8a3858b966d12d89e4d288
Copying blob sha256:3cd3b63408eccc3f9a1ffb740cf311d927927f94247e952af1c9b67c1ad2db4f
Copying blob sha256:3dca2e66497972abbd6a7796a701296ada6bb53013b52d4432bc0d3f1cf0e7bd
Copying blob sha256:cbd14b4998e05d5a05f10fa887ca9e0bfb2f5731caf1726b31d57f8d6b2a8341
Copying blob sha256:d7d9620af8a57209296d46b81d9cdadc4ecaf4fc9eaa01fd2f7111f46d0fd2e7
Copying config sha256:e29844e19cfcf09169e7618143258dfaeaf9594c0639f7ef23d95afe37621cd1
Writing manifest to image destination
Storing signatures
--> e29844e19cf
e29844e19cfcf09169e7618143258dfaeaf9594c0639f7ef23d95afe37621cd1

Pushing image image-registry.openshift-image-registry.svc:5000/philbb-nodejs-app/nodejs-dev:latest ...
Getting image source signatures
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:d7d9620af8a57209296d46b81d9cdadc4ecaf4fc9eaa01fd2f7111f46d0fd2e7
Copying config sha256:e29844e19cfcf09169e7618143258dfaeaf9594c0639f7ef23d95afe37621cd1
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/philbb-nodejs-app/nodejs-dev@sha256:5fc8afec848e37ace8b80323c0c701c02b0eac801e58967367058ae9b34fd149
Push successful
[student@workstation DO180-apps]$ oc get pods
NAME                          READY   STATUS             RESTARTS   AGE
nodejs-dev-1-build            0/1     Error              0          36m
nodejs-dev-3-build            0/1     Completed          0          16m
nodejs-dev-4-build            0/1     Completed          0          8m52s
nodejs-dev-5-build            0/1     Completed          0          52s
nodejs-dev-856dd6ddd7-cwjr9   0/1     CrashLoopBackOff   1          13s
nodejs-dev-c4499c978-wlbm9    0/1     Terminating        6          8m12s
[student@workstation DO180-apps]$ oc get pods 
NAME                          READY   STATUS             RESTARTS   AGE
nodejs-dev-1-build            0/1     Error              0          36m
nodejs-dev-3-build            0/1     Completed          0          16m
nodejs-dev-4-build            0/1     Completed          0          8m58s
nodejs-dev-5-build            0/1     Completed          0          58s
nodejs-dev-856dd6ddd7-cwjr9   0/1     CrashLoopBackOff   1          19s
[student@workstation DO180-apps]$ oc logs -f nodejs-dev-856dd6ddd7-cwjr9
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

internal/modules/cjs/loader.js:818
  throw err;
  ^

Error: Cannot find module 'createerror'
Require stack:
- /opt/app-root/src/server.js
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:815:15)
    at Function.Module._load (internal/modules/cjs/loader.js:667:27)
    at Module.require (internal/modules/cjs/loader.js:887:19)
    at require (internal/modules/cjs/helpers.js:74:18)
    at Object.<anonymous> (/opt/app-root/src/server.js:1:19)
    at Module._compile (internal/modules/cjs/loader.js:999:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10)
    at Module.load (internal/modules/cjs/loader.js:863:32)
    at Function.Module._load (internal/modules/cjs/loader.js:708:14)
    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [ '/opt/app-root/src/server.js' ]
}
npm info lifecycle nodejs-app@1.0.0~start: Failed to exec start script
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! nodejs-app@1.0.0 start: `node server.js`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the nodejs-app@1.0.0 start script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm timing npm Completed in 166ms

npm ERR! A complete log of this run can be found in:
npm ERR!     /opt/app-root/src/.npm/_logs/2022-03-11T10_32_45_276Z-debug.log
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ vim nodejs-app/package.json 
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ vim nodejs-app/package.json 
[student@workstation DO180-apps]$ git commit -am "Corrected typo in error module"
[troubleshoot-review 5309e29] Corrected typo in error module
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 412 bytes | 412.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   a15e2d5..5309e29  troubleshoot-review -> troubleshoot-review
[student@workstation DO180-apps]$ oc start-build bc/nodejs-dev
build.build.openshift.io/nodejs-dev-6 started
[student@workstation DO180-apps]$ oc get pods -w
NAME                          READY   STATUS             RESTARTS   AGE
nodejs-dev-1-build            0/1     Error              0          39m
nodejs-dev-3-build            0/1     Completed          0          19m
nodejs-dev-4-build            0/1     Completed          0          12m
nodejs-dev-5-build            0/1     Completed          0          4m30s
nodejs-dev-6-build            0/1     Init:0/2           0          6s
nodejs-dev-856dd6ddd7-cwjr9   0/1     CrashLoopBackOff   5          3m51s
nodejs-dev-6-build            0/1     Init:1/2           0          21s
nodejs-dev-6-build            0/1     PodInitializing    0          22s
nodejs-dev-6-build            1/1     Running            0          23s
nodejs-dev-56c8f586f9-mxz6f   0/1     Pending            0          0s
nodejs-dev-56c8f586f9-mxz6f   0/1     Pending            0          0s
nodejs-dev-56c8f586f9-mxz6f   0/1     ContainerCreating   0          0s
nodejs-dev-6-build            0/1     Completed           0          52s
nodejs-dev-56c8f586f9-mxz6f   0/1     ContainerCreating   0          2s
nodejs-dev-56c8f586f9-mxz6f   1/1     Running             0          4s
nodejs-dev-856dd6ddd7-cwjr9   0/1     Terminating         5          4m41s
nodejs-dev-856dd6ddd7-cwjr9   0/1     Terminating         5          4m55s
nodejs-dev-856dd6ddd7-cwjr9   0/1     Terminating         5          4m55s
^C[student@workstation DO180-apps]$ oc get pods
NAME                          READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build            0/1     Error       0          42m
nodejs-dev-3-build            0/1     Completed   0          22m
nodejs-dev-4-build            0/1     Completed   0          15m
nodejs-dev-5-build            0/1     Completed   0          7m5s
nodejs-dev-56c8f586f9-mxz6f   1/1     Running     0          109s
nodejs-dev-6-build            0/1     Completed   0          2m41s
[student@workstation DO180-apps]$ oc log -f nodejs-dev-56c8f586f9-mxz6f
Error: unknown command "log" for "oc"

Did you mean this?
	login
	logout
	logs
	tag

Run 'oc --help' for usage.
[student@workstation DO180-apps]$ oc logs -f nodejs-dev-56c8f586f9-mxz6f
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

Example app listening on port 8080!
^C
[student@workstation DO180-apps]$ oc describe svc/nodejs-dev
Name:              nodejs-dev
Namespace:         philbb-nodejs-app
Labels:            app=nodejs-dev
                   app.kubernetes.io/component=nodejs-dev
                   app.kubernetes.io/instance=nodejs-dev
                   app.kubernetes.io/name=nodejs
Annotations:       openshift.io/generated-by: OpenShiftNewApp
Selector:          deployment=nodejs-dev
Type:              ClusterIP
IP:                172.30.10.107
Port:              8080-tcp  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.131.2.78:8080
Session Affinity:  None
Events:            <none>
[student@workstation DO180-apps]$ oc expose svc/nodejs-dev
route.route.openshift.io/nodejs-dev exposed
[student@workstation DO180-apps]$ 
[student@workstation DO180-apps]$ ^C
[student@workstation DO180-apps]$ 
[student@workstation DO180-apps]$ ^C
[student@workstation DO180-apps]$ oc logs -f svc/nodejs-dev
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

Example app listening on port 8080!
^C
[student@workstation DO180-apps]$ oc get route
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ oc describe route
Name:			nodejs-dev
Namespace:		philbb-nodejs-app
Created:		54 seconds ago
Labels:			app=nodejs-dev
			app.kubernetes.io/component=nodejs-dev
			app.kubernetes.io/instance=nodejs-dev
			app.kubernetes.io/name=nodejs
Annotations:		openshift.io/host.generated=true
Requested Host:		nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com
			   exposed on router default (host apps.eu46.prod.nextcle.com) 54 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	nodejs-dev
Weight:		100 (100%)
Endpoints:	10.131.2.78:8080
[student@workstation DO180-apps]$ oc logs route
Error from server (NotFound): pods "route" not found
[student@workstation DO180-apps]$ oc logs route/nodejs-dev
error: cannot get the logs from *v1.Route: selector for *v1.Route not implemented
[student@workstation DO180-apps]$ oc get pods
NAME                          READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build            0/1     Error       0          51m
nodejs-dev-3-build            0/1     Completed   0          31m
nodejs-dev-4-build            0/1     Completed   0          24m
nodejs-dev-5-build            0/1     Completed   0          16m
nodejs-dev-56c8f586f9-mxz6f   1/1     Running     0          11m
nodejs-dev-6-build            0/1     Completed   0          11m
[student@workstation DO180-apps]$ oc logs nodejs-dev-56c8f586f9-mxz6f
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

Example app listening on port 8080!
[student@workstation DO180-apps]$ oc expose nodejs-dev-56c8f586f9-mxz6f
error: the server doesn't have a resource type "nodejs-dev-56c8f586f9-mxz6f"
[student@workstation DO180-apps]$ oc get route
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ oc status 
In project philbb-nodejs-app on server https://api.eu46.prod.nextcle.com:6443

http://nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com to pod port 8080-tcp (svc/nodejs-dev)
  deployment/nodejs-dev deploys istag/nodejs-dev:latest <-
    bc/nodejs-dev source builds https://github.com/lmatouse/DO180-apps#troubleshoot-review on openshift/nodejs:12 
    deployment #5 running for 12 minutes - 1 pod
    deployment #4 deployed 17 minutes ago
    deployment #3 deployed 25 minutes ago
    deployment #2 deployed 32 minutes ago
    deployment #1 deployed 52 minutes ago


1 info identified, use 'oc status --suggest' to see details.
[student@workstation DO180-apps]$ curl -w "\n" http://nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Internal Server Error</pre>
</body>
</html>

[student@workstation DO180-apps]$ oc status --sugest
Error: unknown flag: --sugest
See 'oc status --help' for usage.
[student@workstation DO180-apps]$ oc status --suggest
In project philbb-nodejs-app on server https://api.eu46.prod.nextcle.com:6443

http://nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com to pod port 8080-tcp (svc/nodejs-dev)
  deployment/nodejs-dev deploys istag/nodejs-dev:latest <-
    bc/nodejs-dev source builds https://github.com/lmatouse/DO180-apps#troubleshoot-review on openshift/nodejs:12 
    deployment #5 running for 13 minutes - 1 pod
    deployment #4 deployed 18 minutes ago
    deployment #3 deployed 25 minutes ago
    deployment #2 deployed 33 minutes ago
    deployment #1 deployed 53 minutes ago

Info:
  * deployment/nodejs-dev has no liveness probe to verify pods are still running.
    try: oc set probe deployment/nodejs-dev --liveness ...

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation DO180-apps]$ oc get routes.route.openshift.io 
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ oc get rroute
error: the server doesn't have a resource type "rroute"
[student@workstation DO180-apps]$ oc get route
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ oc get route nodejs-dev
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ oc get route nodejs-dev detail
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
Error from server (NotFound): routes.route.openshift.io "detail" not found
[student@workstation DO180-apps]$ oc get route nodejs-dev --detail
Error: unknown flag: --detail
See 'oc get --help' for usage.
[student@workstation DO180-apps]$ oc logs --help
Print the logs for a resource

 Supported resources are builds, build configs (bc), deployment configs (dc), and pods. When a pod is specified and has
more than one container, the container name should be specified via -c. When a build config or deployment config is
specified, you can view the logs for a particular version of it via --version.

 If your pod is failing to start, you may need to use the --previous option to see the logs of the last attempt.

Usage:
  oc logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER] [flags]

Examples:
  # Start streaming the logs of the most recent build of the openldap build config.
  oc logs -f bc/openldap
  
  # Start streaming the logs of the latest deployment of the mysql deployment config.
  oc logs -f dc/mysql
  
  # Get the logs of the first deployment for the mysql deployment config. Note that logs
  # from older deployments may not exist either because the deployment was successful
  # or due to deployment pruning or manual deletion of the deployment.
  oc logs --version=1 dc/mysql
  
  # Return a snapshot of ruby-container logs from pod backend.
  oc logs backend -c ruby-container
  
  # Start streaming of ruby-container logs from pod backend.
  oc logs -f pod/backend -c ruby-container

Options:
      --all-containers=false: Get all containers' logs in the pod(s).
  -c, --container='': Print the logs of this container
  -f, --follow=false: Specify if the logs should be streamed.
      --ignore-errors=false: If watching / following pod logs, allow for any errors that occur to be non-fatal
      --insecure-skip-tls-verify-backend=false: Skip verifying the identity of the kubelet that logs are requested from.
In theory, an attacker could provide invalid log content back. You might want to use this if your kubelet serving
certificates have expired.
      --limit-bytes=0: Maximum bytes of logs to return. Defaults to no limit.
      --max-log-requests=5: Specify maximum number of concurrent logs to follow when using by a selector. Defaults to 5.
      --pod-running-timeout=20s: The length of time (like 5s, 2m, or 3h, higher than zero) to wait until at least one
pod is running
      --prefix=false: Prefix each log line with the log source (pod name and container name)
  -p, --previous=false: If true, print the logs for the previous instance of the container in a pod if it exists.
  -l, --selector='': Selector (label query) to filter on.
      --since=0s: Only return logs newer than a relative duration like 5s, 2m, or 3h. Defaults to all logs. Only one of
since-time / since may be used.
      --since-time='': Only return logs after a specific date (RFC3339). Defaults to all logs. Only one of since-time /
since may be used.
      --tail=-1: Lines of recent log file to display. Defaults to -1 with no selector, showing all log lines otherwise
10, if a selector is provided.
      --timestamps=false: Include timestamps on each line in the log output
      --version=0: View the logs of a particular build or deployment by version if greater than zero

Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation DO180-apps]$ oc get pods
NAME                          READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build            0/1     Error       0          55m
nodejs-dev-3-build            0/1     Completed   0          35m
nodejs-dev-4-build            0/1     Completed   0          28m
nodejs-dev-5-build            0/1     Completed   0          20m
nodejs-dev-56c8f586f9-mxz6f   1/1     Running     0          14m
nodejs-dev-6-build            0/1     Completed   0          15m
[student@workstation DO180-apps]$ oc get pods nodejs-dev-56c8f586f9-mxz6f
NAME                          READY   STATUS    RESTARTS   AGE
nodejs-dev-56c8f586f9-mxz6f   1/1     Running   0          14m
[student@workstation DO180-apps]$ oc get container
error: the server doesn't have a resource type "container"
[student@workstation DO180-apps]$ oc get containers
error: the server doesn't have a resource type "containers"
[student@workstation DO180-apps]$ oc get app
error: the server doesn't have a resource type "app"
[student@workstation DO180-apps]$ oc get apps
error: the server doesn't have a resource type "apps"
[student@workstation DO180-apps]$ oc get all
NAME                              READY   STATUS      RESTARTS   AGE
pod/nodejs-dev-1-build            0/1     Error       0          55m
pod/nodejs-dev-3-build            0/1     Completed   0          35m
pod/nodejs-dev-4-build            0/1     Completed   0          28m
pod/nodejs-dev-5-build            0/1     Completed   0          20m
pod/nodejs-dev-56c8f586f9-mxz6f   1/1     Running     0          15m
pod/nodejs-dev-6-build            0/1     Completed   0          16m

NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
service/nodejs-dev   ClusterIP   172.30.10.107   <none>        8080/TCP   55m

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nodejs-dev   1/1     1            1           55m

NAME                                    DESIRED   CURRENT   READY   AGE
replicaset.apps/nodejs-dev-56c8f586f9   1         1         1       15m
replicaset.apps/nodejs-dev-7f59cd4779   0         0         0       55m
replicaset.apps/nodejs-dev-856dd6ddd7   0         0         0       19m
replicaset.apps/nodejs-dev-bfc69859     0         0         0       35m
replicaset.apps/nodejs-dev-c4499c978    0         0         0       27m

NAME                                        TYPE     FROM                      LATEST
buildconfig.build.openshift.io/nodejs-dev   Source   Git@troubleshoot-review   6

NAME                                    TYPE     FROM                      STATUS                        STARTED          DURATION
build.build.openshift.io/nodejs-dev-1   Source   Git@f7cd896               Failed (GenericBuildFailed)   55 minutes ago   49s
build.build.openshift.io/nodejs-dev-2   Source   Git@troubleshoot-review   Failed (FetchSourceFailed)    51 minutes ago   8m12s
build.build.openshift.io/nodejs-dev-3   Source   Git@54ecaed               Complete                      35 minutes ago   37s
build.build.openshift.io/nodejs-dev-4   Source   Git@78f5b77               Complete                      28 minutes ago   41s
build.build.openshift.io/nodejs-dev-5   Source   Git@a15e2d5               Complete                      20 minutes ago   40s
build.build.openshift.io/nodejs-dev-6   Source   Git@5309e29               Complete                      16 minutes ago   52s

NAME                                        IMAGE REPOSITORY                                                                                 TAGS     UPDATED
imagestream.image.openshift.io/nodejs-dev   default-route-openshift-image-registry.apps.eu46.prod.nextcle.com/philbb-nodejs-app/nodejs-dev   latest   15 minutes ago

NAME                                  HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
route.route.openshift.io/nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ curl -w "\n" http://nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Internal Server Error</pre>
</body>
</html>

[student@workstation DO180-apps]$ oc exec nodejs-dev-56c8f586f9-mxz6f cat /var/log/httpd.log
kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.
cat: /var/log/httpd.log: No such file or directory
command terminated with exit code 1
[student@workstation DO180-apps]$ vi nodejs-app/server.js 
[student@workstation DO180-apps]$ vi nodejs-app/package.json 
[student@workstation DO180-apps]$ oc exec nodejs-dev-56c8f586f9-mxz6f -- ls /var/log/httpd*
ls: cannot access /var/log/httpd*: No such file or directory
command terminated with exit code 2
[student@workstation DO180-apps]$ oc exec nodejs-dev-56c8f586f9-mxz6f -- ls /var/log/*
ls: cannot access /var/log/audit: No such file or directory
ls: cannot access /var/log/boot.log: No such file or directory
ls: cannot access /var/log/boot.log-20220308: No such file or directory
ls: cannot access /var/log/chrony: No such file or directory
ls: cannot access /var/log/cloud-init.log: No such file or directory
ls: cannot access /var/log/cloud-init-output.log: No such file or directory
ls: cannot access /var/log/cron: No such file or directory
ls: cannot access /var/log/cups: No such file or directory
ls: cannot access /var/log/dnf.librepo.log: No such file or directory
ls: cannot access /var/log/dnf.log: No such file or directory
ls: cannot access /var/log/dnf.rpm.log: No such file or directory
ls: cannot access /var/log/firewalld: No such file or directory
ls: cannot access /var/log/gdm: No such file or directory
ls: cannot access /var/log/glusterfs: No such file or directory
ls: cannot access /var/log/hawkey.log: No such file or directory
ls: cannot access /var/log/insights-client: No such file or directory
ls: cannot access /var/log/libvirt: No such file or directory
ls: cannot access /var/log/maillog: No such file or directory
ls: cannot access /var/log/messages: No such file or directory
ls: cannot access /var/log/private: No such file or directory
ls: cannot access /var/log/qemu-ga: No such file or directory
/var/log/btmp
/var/log/lastlog
/var/log/wtmp

/var/log/anaconda:
anaconda.log
ifcfg.log
journal.log
ks-script-0nRK9e.log
ks-script-ZyqDwL.log
ks-script-kLZRNY.log
packaging.log
program.log
storage.log
syslog

/var/log/rhsm:
rhsm.log
ls: cannot access /var/log/samba: No such file or directory
ls: cannot access /var/log/secure: No such file or directory
ls: cannot access /var/log/speech-dispatcher: No such file or directory
ls: cannot access /var/log/spooler: No such file or directory
ls: cannot access /var/log/sssd: No such file or directory
ls: cannot access /var/log/swtpm: No such file or directory
ls: cannot access /var/log/tuned: No such file or directory
command terminated with exit code 2
[student@workstation DO180-apps]$ oc exec -it nodejs-dev-56c8f586f9-mxz6f -- /bin/bash
bash-4.2$ whoami
1002870000
bash-4.2$ id
uid=1002870000(1002870000) gid=0(root) groups=0(root),1002870000
bash-4.2$ ls /var/log/
anaconda  btmp	lastlog  rhsm  tallylog  wtmp  yum.log
bash-4.2$ ls /etc/    
Display all 130 possibilities? (y or n)
bash-4.2$ ls /etc/httpd
ls: cannot access /etc/httpd: No such file or directory
bash-4.2$ sudo -i      
bash: sudo: command not found
bash-4.2$ exit
exit
command terminated with exit code 127
[student@workstation DO180-apps]$ oc logs nodejs-dev-56c8f586f9-mxz6f
Environment: 
	DEV_MODE=false
	NODE_ENV=production
	DEBUG_PORT=5858
Launching via npm...
npm info it worked if it ends with ok
npm info using npm@6.14.14
npm info using node@v12.22.5
npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0
npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0

> nodejs-app@1.0.0 start /opt/app-root/src
> node server.js

Example app listening on port 8080!
TypeError: Cannot read property 'HOSTNAME' of undefined
    at /opt/app-root/src/server.js:7:59
    at Layer.handle [as handle_request] (/opt/app-root/src/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/app-root/src/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/opt/app-root/src/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/opt/app-root/src/node_modules/express/lib/router/layer.js:95:5)
    at /opt/app-root/src/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/opt/app-root/src/node_modules/express/lib/router/index.js:341:12)
    at next (/opt/app-root/src/node_modules/express/lib/router/index.js:275:10)
    at expressInit (/opt/app-root/src/node_modules/express/lib/middleware/init.js:40:5)
    at Layer.handle [as handle_request] (/opt/app-root/src/node_modules/express/lib/router/layer.js:95:5)
TypeError: Cannot read property 'HOSTNAME' of undefined
    at /opt/app-root/src/server.js:7:59
    at Layer.handle [as handle_request] (/opt/app-root/src/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/app-root/src/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/opt/app-root/src/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/opt/app-root/src/node_modules/express/lib/router/layer.js:95:5)
    at /opt/app-root/src/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/opt/app-root/src/node_modules/express/lib/router/index.js:341:12)
    at next (/opt/app-root/src/node_modules/express/lib/router/index.js:275:10)
    at expressInit (/opt/app-root/src/node_modules/express/lib/middleware/init.js:40:5)
    at Layer.handle [as handle_request] (/opt/app-root/src/node_modules/express/lib/router/layer.js:95:5)
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ vim nodejs-app/server.js 
[student@workstation DO180-apps]$ git commit -am "Corrected server.js process.env typo"
[troubleshoot-review dba6f52] Corrected server.js process.env typo
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push 
Username for 'https://github.com': lmatouse
Password for 'https://lmatouse@github.com': 
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 401 bytes | 401.00 KiB/s, done.
Total 4 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/lmatouse/DO180-apps
   5309e29..dba6f52  troubleshoot-review -> troubleshoot-review
[student@workstation DO180-apps]$ oc start-build bc/nodejs-dev
build.build.openshift.io/nodejs-dev-7 started
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-devb
Error from server (NotFound): buildconfigs.build.openshift.io "nodejs-devb" not found
[student@workstation DO180-apps]$ oc logs -f bc/nodejs-dev
Cloning "https://github.com/lmatouse/DO180-apps" ...
	Commit:	dba6f52809925793442c71e59aed01f7f9db33d1 (Corrected server.js process.env typo)
	Author:	Student User <student@workstation.lab.example.com>
	Date:	Fri Mar 11 05:59:38 2022 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:b46ca46c303b49d886a7585735ebd1dc8651e83d0fab5823300cf3a9fd2febc1
Copying blob sha256:8e111a1c7b205e8d46bf83e9725922a10ac4b59f7ce26679318682def91efa55
Copying blob sha256:ac08ca107ad9ed699cbd28339749dd6463a84c73aa1d468a4241385fc4ec3876
Copying blob sha256:aa05f1490571b1a76608228bc66534dffe56c139de13f4ba89d9dfba0de8eb3f
Copying blob sha256:faf2fea3663b6b26a48698856e64b859d6d8cb46bf7d4700e58b7aa941f6fd5f
Copying config sha256:1ad9bd1d0c04a3b3b229aec8e2cdc45d20ea121155531d44a3c5c49f70e35619
Writing manifest to image destination
Storing signatures
^C
[student@workstation DO180-apps]$ oc get pods -w
NAME                          READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build            0/1     Error       0          64m
nodejs-dev-3-build            0/1     Completed   0          44m
nodejs-dev-4-build            0/1     Completed   0          36m
nodejs-dev-5-build            0/1     Completed   0          28m
nodejs-dev-56c8f586f9-mxz6f   1/1     Running     0          23m
nodejs-dev-6-build            0/1     Completed   0          24m
nodejs-dev-7-build            1/1     Running     0          31s
nodejs-dev-7d6f47786d-jlvvb   0/1     Pending     0          0s
nodejs-dev-7d6f47786d-jlvvb   0/1     Pending     0          0s
nodejs-dev-7d6f47786d-jlvvb   0/1     ContainerCreating   0          0s
nodejs-dev-7-build            0/1     Completed           0          37s
nodejs-dev-7d6f47786d-jlvvb   0/1     ContainerCreating   0          2s
nodejs-dev-7d6f47786d-jlvvb   1/1     Running             0          7s
nodejs-dev-56c8f586f9-mxz6f   1/1     Terminating         0          23m
nodejs-dev-56c8f586f9-mxz6f   0/1     Terminating         0          23m
nodejs-dev-56c8f586f9-mxz6f   0/1     Terminating         0          24m
nodejs-dev-56c8f586f9-mxz6f   0/1     Terminating         0          24m
^C[student@workstation DO180-apps]$ oc get pods
NAME                          READY   STATUS      RESTARTS   AGE
nodejs-dev-1-build            0/1     Error       0          66m
nodejs-dev-3-build            0/1     Completed   0          46m
nodejs-dev-4-build            0/1     Completed   0          39m
nodejs-dev-5-build            0/1     Completed   0          31m
nodejs-dev-6-build            0/1     Completed   0          26m
nodejs-dev-7-build            0/1     Completed   0          2m56s
nodejs-dev-7d6f47786d-jlvvb   1/1     Running     0          2m20s
[student@workstation DO180-apps]$ 
[student@workstation DO180-apps]$ oc get route
NAME         HOST/PORT                                                 PATH   SERVICES     PORT       TERMINATION   WILDCARD
nodejs-dev   nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com          nodejs-dev   8080-tcp                 None
[student@workstation DO180-apps]$ curl -w "\n" http://nodejs-dev-philbb-nodejs-app.apps.eu46.prod.nextcle.com
Hello World from pod: nodejs-dev-7d6f47786d-jlvvb

[student@workstation DO180-apps]$ lab troubleshoot-review grade 

Grading the student's work for the Lab: Troubleshooting Containerized Applications

 · The nodejs-dev application response is correct..............  PASS

[student@workstation DO180-apps]$ lab troubleshoot-review finish

Completing the Lab: Troubleshooting Containerized Applications

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the 'philbb-nodejs-app' OpenShift project..........  SUCCESS
[student@workstation DO180-apps]$ 
[student@workstation DO180-apps]$ 

